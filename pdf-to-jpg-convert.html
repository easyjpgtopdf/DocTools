<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>PDF to JPG - Convert | easyjpgtopdf</title>
<link href="css/footer.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script>pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
<style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
    :root{--primary:#4361ee;--secondary:#3a0ca3;--accent:#4cc9f0;--light:#f8f9fa;--dark:#212529;--gray:#6c757d;--card:#ffffff;--border:#e5e7eb;--brand:var(--primary);--brand-dark:var(--secondary)}
    body{background-color:#f5f7ff;color:var(--dark);min-height:100vh;display:flex;flex-direction:column;line-height:1.6}
    .container{max-width:1400px;margin:0 auto;padding:0 24px}

    .logo i{color:var(--brand-dark)}
    nav 
    nav a{color:var(--dark);text-decoration:none;font-weight:500}
    nav a:hover,nav a.active{color:var(--brand)}

    .dropdown:hover 
    .dropdown-content a{display:block;padding:10px 18px}
    .hero{background:linear-gradient(135deg,var(--brand),var(--brand-dark));color:#fff;padding:40px 0;text-align:center;margin-bottom:24px}
    .workbench{display:flex;gap:22px;align-items:flex-start}
    .panel{background:#fff;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.08);padding:20px}
    .left{flex:0 0 70%;min-width:0}
    .right{flex:0 0 30%;min-width:280px;display:flex;flex-direction:column;align-self:flex-start;position:sticky;top:90px}
    .preview-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px;margin-top:16px}
    .preview-item{position:relative;border:2px solid #e5e7eb;border-radius:10px;overflow:hidden;background:#fff;display:flex;align-items:center;justify-content:center;aspect-ratio:3/4;cursor:pointer;transition:.15s border-color,.15s box-shadow}
    .preview-item.selected{border-color:var(--primary);box-shadow:0 8px 20px rgba(67,97,238,.15)}
    .preview-item canvas{width:100%;height:100%;object-fit:contain;background:#fff}
    .check-badge{position:absolute;top:8px;right:8px;background:var(--primary);color:#fff;width:22px;height:22px;border-radius:999px;display:flex;align-items:center;justify-content:center;font-size:12px;box-shadow:0 2px 6px rgba(0,0,0,.2)}
    .thumb-toolbar{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
    .toolbar-actions{display:flex;gap:8px}
    .btn.sm{padding:6px 10px;border-radius:20px;font-size:.9rem}
    .upload-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:10px}
    .btn{display:inline-flex;align-items:center;gap:8px;background:var(--brand);color:#fff;border:none;border-radius:40px;padding:10px 16px;cursor:pointer;transition:.2s transform,.2s box-shadow}
    .btn:hover{transform:translateY(-1px);box-shadow:0 6px 16px rgba(67,97,238,.25)}
    .btn.secondary{background:#fff;color:var(--brand);border:1px solid var(--brand)}
    .right-sections{display:grid;grid-template-columns:1fr;gap:12px;flex:1}
    .section{border:1px dashed #e5e7eb;border-radius:14px;padding:18px;background:#fff}
    .section h3{font-size:18px;margin-bottom:12px;color:var(--brand);font-weight:700}
    .convert-bar{margin-top:auto;display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
    .muted{color:var(--gray);font-size:.9rem}
    #convertBtn{background:linear-gradient(135deg,#4cc9f0,#4361ee);font-size:16px;padding:12px 22px}
    .comments{margin:40px 0}
    .section-title{margin-bottom:14px;color:var(--brand)}
    .comment-form{background:#fff;border-radius:12px;padding:20px;box-shadow:0 5px 15px rgba(0,0,0,.05)}
    .comment-form .form-group{margin-bottom:14px}
    .comment-form .form-control{padding:10px 12px;border:1px solid #ddd;border-radius:8px;outline:none;width:100%}
    .comment-form .form-control:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(67,97,238,.08)}
    footer{background:#212529;color:#fff;padding:40px 0 20px;margin-top:24px}
    .footer-content{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:22px;margin-bottom:20px}
    .footer-links{list-style:none}
    .footer-links a{color:#aaa;text-decoration:none}
    .footer-links a:hover{color:#fff}
    .copyright{text-align:center;color:#aaa;border-top:1px solid #444;padding-top:16px;font-size:.9rem}
    @media (max-width: 992px){
      .left{flex:1 1 100%}
      .right{flex:1 1 100%; position:static}
      .workbench{flex-direction:column}
      .preview-grid{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}
    }
  </style>
<link href="css/header.css" rel="stylesheet"/>
<link href="css/theme-modern.css" rel="stylesheet"/>
<link rel="stylesheet" href="css/voice-assistant.css">
<script src="js/voice-assistant.js" defer></script>
</head>
<body>
    <div id="global-header-placeholder"></div>

    <nav aria-label="Breadcrumb" style="padding: 15px 0; background: #f8f9ff; border-bottom: 1px solid #e2e6ff;">
        <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 24px;">
            <ol style="list-style: none; display: flex; flex-wrap: wrap; gap: 10px; margin: 0; padding: 0; align-items: center;">
                <li><a href="index.html" style="color: #4361ee; text-decoration: none; font-weight: 500; transition: color 0.3s;" onmouseover="this.style.color='#3a0ca3'" onmouseout="this.style.color='#4361ee'">Home</a></li>
                <li><span style="margin: 0 8px; color: #9ca3af;">|</span></li>
                <li><a href="login.html" style="color: #56607a; font-weight: 500; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#4361ee'" onmouseout="this.style.color='#56607a'">Sign In</a></li>
                <li><span style="margin: 0 8px; color: #9ca3af;">|</span></li>
                <li><a href="signup.html" style="color: #56607a; font-weight: 500; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#4361ee'" onmouseout="this.style.color='#56607a'">Signup</a></li>
            </ol>
        </div>
    </nav>
<section class="hero"><div class="container"><h1>PDF to JPG</h1><p>Preview pages, choose quality/DPI, and export pages as JPG.</p></div></section>
<main class="container">
<div class="workbench">
<div class="panel left">
<h2 style="font-size:18px">PDF Pages</h2>
<!-- Upload new PDF removed as requested -->
<div class="muted" id="currentFileHint" style="margin-top:6px">Current file: <span id="pdfName">Loaded from session</span>.</div>
<div class="thumb-toolbar">
<div class="muted">Tip: Click pages to select. If none selected, range applies.</div>
<div class="toolbar-actions">
<button class="btn sm secondary" id="selectAllBtn">Select All</button>
<button class="btn sm secondary" id="clearSelBtn">Clear</button>
</div>
</div>
<div class="preview-grid" id="preview"></div>
<!-- Share Section moved into left preview panel -->
</div>
<div class="panel right">
<div class="right-sections">
<div class="section">
<h3>Export Range</h3>
<div class="options" style="gap:12px;align-items:center">
<label class="opt"><input checked="" name="range" type="radio" value="all"/> All pages</label>
<label class="opt"><input name="range" type="radio" value="custom"/> Range</label>
<input class="form-control" id="rangeInput" placeholder="e.g. 1-3,5" style="width:160px"/>
</div>
</div>
<div class="section">
<h3>Quality</h3>
<div style="display:flex;gap:12px;align-items:center">
<input id="qualitySlider" max="1" min="0.4" step="0.05" type="range" value="0.8"/>
<span class="muted" id="qualityLabel">80%</span>
</div>
</div>
<div class="section">
<h3>DPI</h3>
<div class="options" style="gap:12px;align-items:center">
<label class="opt"><input name="dpi" type="radio" value="72"/> 72</label>
<label class="opt"><input checked="" name="dpi" type="radio" value="150"/> 150</label>
<label class="opt"><input name="dpi" type="radio" value="300"/> 300</label>
</div>
</div>
</div>
<div class="convert-bar">
<span class="muted" id="count">0 pages</span>
<div style="display:flex;gap:10px;flex-wrap:wrap">
<a class="btn secondary" href="pdf-to-jpg.html"><i class="fas fa-arrow-left"></i> Back</a>
<button class="btn" id="convertBtn"><i class="fas fa-download"></i> Download JPG(s)</button>
<button class="btn secondary" id="zipBtn"><i class="fas fa-file-zipper"></i> Download ZIP</button>
</div>
</div>
</div>
</div>
</main>
<script>
  (function(){
    const preview = document.getElementById('preview');
    const count = document.getElementById('count');
    const selectAllBtn = document.getElementById('selectAllBtn');
    const clearSelBtn = document.getElementById('clearSelBtn');
    const qualitySlider = document.getElementById('qualitySlider');
    const qualityLabel = document.getElementById('qualityLabel');
    const rangeInput = document.getElementById('rangeInput');
    const convertBtn = document.getElementById('convertBtn');
    const zipBtn = document.getElementById('zipBtn');
    let pdfDoc = null;
    let selectedPages = new Set();
    const pdfNameEl = document.getElementById('pdfName');

    // IndexedDB helpers (mirror of upload page) for large files
    function idb(){
      return new Promise((res,rej)=>{
        const open = indexedDB.open('easyjpgtopdf',1);
        open.onupgradeneeded = ()=>{
          const db = open.result; if(!db.objectStoreNames.contains('pdfstore')) db.createObjectStore('pdfstore');
        };
        open.onsuccess = ()=>res(open.result);
        open.onerror = ()=>rej(open.error);
      });
    }
    async function getPdfFromIDB(){
      const db = await idb();
      return await new Promise((res,rej)=>{
        const tx = db.transaction('pdfstore','readonly');
        const req = tx.objectStore('pdfstore').get('pdf2jpg');
        req.onsuccess = ()=>res(req.result||null);
        req.onerror = ()=>rej(req.error);
      });
    }
    async function setPdfToIDB(blob,name){
      const db = await idb();
      return await new Promise((res,rej)=>{
        const tx = db.transaction('pdfstore','readwrite');
        tx.objectStore('pdfstore').put({blob,name,ts:Date.now()}, 'pdf2jpg');
        tx.oncomplete = res; tx.onerror = ()=>rej(tx.error);
      });
    }

    async function loadPdfFromSession(){
      let rec = null;
      try{ rec = await getPdfFromIDB(); }catch(_){ rec = null; }
      let blob = rec && rec.blob ? rec.blob : null;
      let name = rec && rec.name ? rec.name : null;
      if(!blob){
        // fallback to sessionStorage dataURL
        try{
          const b64 = sessionStorage.getItem('pdf2jpg_b64');
          const sname = sessionStorage.getItem('pdf2jpg_name');
          if(b64){
            const resp = await fetch(b64);
            blob = await resp.blob();
            name = name || sname || 'document.pdf';
            // write into IDB for consistency
            try{ await setPdfToIDB(blob, name); }catch(_){ }
          }
        }catch(_){ /* ignore */ }
      }
      if(!blob){ alert('PDF file not found. Please upload again.'); location.href = 'pdf-to-jpg.html'; return; }
      if (pdfNameEl && name) pdfNameEl.textContent = name;
      // clear fallback to free memory
      try{ sessionStorage.removeItem('pdf2jpg_b64'); sessionStorage.removeItem('pdf2jpg_name'); }catch(_){ }
      const ab = await blob.arrayBuffer();
      const loadingTask = pdfjsLib.getDocument({data:new Uint8Array(ab)});
      pdfDoc = await loadingTask.promise;
      await renderThumbnails();
    }

    async function renderThumbnails(){
      preview.innerHTML = '';
      for(let i=1;i<=pdfDoc.numPages;i++){
        const page = await pdfDoc.getPage(i);
        const viewport = page.getViewport({ scale: 0.3 });
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = Math.ceil(viewport.width);
        canvas.height = Math.ceil(viewport.height);
        await page.render({ canvasContext: ctx, viewport }).promise;
        const wrap = document.createElement('div');
        wrap.className = 'preview-item';
        wrap.dataset.page = String(i);
        if (selectedPages.has(i)) wrap.cla
    <section class="faq-section" style="margin: 40px 0; padding: 40px; background: #f8f9ff; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <h2 style="font-size: 2rem; color: #4361ee; margin-bottom: 30px; text-align: center;">
            <i class="fas fa-question-circle" style="margin-right: 10px;"></i>
            Frequently Asked Questions
        </h2>
        <div class="faq-container" style="max-width: 800px; margin: 0 auto;">
            <div class="faq-item" style="margin-bottom: 20px; padding: 20px; background: white; border-radius: 12px; border-left: 4px solid #4361ee; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                <h3 style="font-size: 1.2rem; color: #0b1630; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center;" onclick="toggleFaq(this)">
                    <i class="fas fa-chevron-right" style="color: #4361ee; margin-right: 10px; transition: transform 0.3s;"></i>
                    How accurate is the conversion?
                </h3>
                <div class="faq-answer" style="font-size: 1rem; color: #56607a; line-height: 1.6; margin-top: 10px; display: none; padding-left: 30px;">
                    Our conversion tools maintain 99% accuracy, preserving all formatting, fonts, and layout from your original files.
                </div>
            </div>
            <div class="faq-item" style="margin-bottom: 20px; padding: 20px; background: white; border-radius: 12px; border-left: 4px solid #4361ee; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                <h3 style="font-size: 1.2rem; color: #0b1630; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center;" onclick="toggleFaq(this)">
                    <i class="fas fa-chevron-right" style="color: #4361ee; margin-right: 10px; transition: transform 0.3s;"></i>
                    What file sizes are supported?
                </h3>
                <div class="faq-answer" style="font-size: 1rem; color: #56607a; line-height: 1.6; margin-top: 10px; display: none; padding-left: 30px;">
                    Free users can convert files up to 10MB. Premium users can process files up to 100MB with faster processing.
                </div>
            </div>
            <div class="faq-item" style="margin-bottom: 20px; padding: 20px; background: white; border-radius: 12px; border-left: 4px solid #4361ee; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                <h3 style="font-size: 1.2rem; color: #0b1630; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center;" onclick="toggleFaq(this)">
                    <i class="fas fa-chevron-right" style="color: #4361ee; margin-right: 10px; transition: transform 0.3s;"></i>
                    Will my data be secure?
                </h3>
                <div class="faq-answer" style="font-size: 1rem; color: #56607a; line-height: 1.6; margin-top: 10px; display: none; padding-left: 30px;">
                    Yes, all files are processed securely and automatically deleted after conversion. We never store or share your documents.
                </div>
            </div>
            <div class="faq-item" style="margin-bottom: 20px; padding: 20px; background: white; border-radius: 12px; border-left: 4px solid #4361ee; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                <h3 style="font-size: 1.2rem; color: #0b1630; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center;" onclick="toggleFaq(this)">
                    <i class="fas fa-chevron-right" style="color: #4361ee; margin-right: 10px; transition: transform 0.3s;"></i>
                    Can I convert multiple files at once?
                </h3>
                <div class="faq-answer" style="font-size: 1rem; color: #56607a; line-height: 1.6; margin-top: 10px; display: none; padding-left: 30px;">
                    Yes, premium users can convert multiple files simultaneously. Free users can process one file at a time.
                </div>
            </div>
            <div class="faq-item" style="margin-bottom: 20px; padding: 20px; background: white; border-radius: 12px; border-left: 4px solid #4361ee; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                <h3 style="font-size: 1.2rem; color: #0b1630; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center;" onclick="toggleFaq(this)">
                    <i class="fas fa-chevron-right" style="color: #4361ee; margin-right: 10px; transition: transform 0.3s;"></i>
                    What formats are supported?
                </h3>
                <div class="faq-answer" style="font-size: 1rem; color: #56607a; line-height: 1.6; margin-top: 10px; display: none; padding-left: 30px;">
                    We support all major file formats. Check the tool page for specific format compatibility.
                </div>
            </div>
        </div>
    </section>

    <script>
    function toggleFaq(element) {
        const answer = element.nextElementSibling;
        const icon = element.querySelector('i');
        const isOpen = answer.style.display === 'block';

        answer.style.display = isOpen ? 'none' : 'block';
        icon.style.transform = isOpen ? 'rotate(0deg)' : 'rotate(90deg)';
    }
    </script>

    
ssList.add('selected');
        wrap.appendChild(canvas);
        const badge = document.createElement('div');
        badge.className = 'check-badge';
        badge.innerHTML = '<i class="fas fa-check"></i>';
        if (selectedPages.has(i)) wrap.appendChild(badge);
        wrap.addEventListener('click', ()=>{
          const p = i;
          if (selectedPages.has(p)){
            selectedPages.delete(p);
          } else {
            selectedPages.add(p);
          }
          renderThumbnails();
        });
        preview.appendChild(wrap);
      }
      count.textContent = pdfDoc.numPages + (pdfDoc.numPages===1?' page':' pages');
    }

    // Upload new PDF feature removed

    

    selectAllBtn.addEventListener('click', ()=>{
      selectedPages = new Set(Array.from({length: pdfDoc?.numPages||0}, (_,idx)=>idx+1));
      renderThumbnails();
    });
    clearSelBtn.addEventListener('click', ()=>{
      selectedPages.clear();
      renderThumbnails();
    });
    qualitySlider.addEventListener('input', ()=>{
      qualityLabel.textContent = Math.round(parseFloat(qualitySlider.value)*100)+'%';
    });

    function parseRange(str, max){
      str = (str||'').trim(); if(!str) return null; // null means invalid/empty
      const parts = str.split(','); const set = new Set();
      for(const p of parts){
        const m = p.match(/^(\d+)(?:-(\d+))?$/);
        if(!m) continue; const a = parseInt(m[1],10), b = m[2]?parseInt(m[2],10):a;
        const start = Math.max(1, Math.min(a,b)), end = Math.min(max, Math.max(a,b));
        for(let x=start;x<=end;x++) set.add(x);
      }
      return Array.from(set).sort((x,y)=>x-y);
    }

    async function renderPageToJpg(pageNumber, dpi, quality){
      const page = await pdfDoc.getPage(pageNumber);
      const scale = dpi/72; // pdf.js default 72 DPI
      const viewport = page.getViewport({ scale });
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = Math.ceil(viewport.width);
      canvas.height = Math.ceil(viewport.height);
      await page.render({ canvasContext: ctx, viewport }).promise;
      return await new Promise(res=>canvas.toBlob(b=>{
        // Return raw JPEG Blob to zip directly (avoids base64 issues)
        if (b) { res(b); return; }
        // Fallback: some browsers may return null; use dataURL->Blob
        try {
          const dataUrl = canvas.toDataURL('image/jpeg', quality);
          fetch(dataUrl).then(r=>r.blob()).then(res);
        } catch (e) {
          // Last resort: return empty blob to avoid crashes
          res(new Blob([],{type:'image/jpeg'}));
        }
      }, 'image/jpeg', quality));
    }

    async function downloadPages(pages, quality, dpi){
      const base = (pdfNameEl?.textContent?.replace(/\.pdf$/i,'')||'page');
      for(let i=0;i<pages.length;i++){
        const pNo = pages[i];
        const blob = await renderPageToJpg(pNo, dpi, quality);
        saveAs(blob, `${base}-page-${pNo}.jpg`);
      }
    }

    function getExportConfig(){
      if(!pdfDoc){ alert('No PDF loaded.'); return null; }
      const quality = parseFloat(qualitySlider.value||'0.8');
      const dpi = parseInt(document.querySelector('input[name="dpi"]:checked').value||'150',10);
      const rangeType = (document.querySelector('input[name="range"]:checked')||{}).value;
      const rangeRaw = rangeInput.value;
      let pages = [];
      if (selectedPages.size>0){
        pages = Array.from(selectedPages).sort((a,b)=>a-b);
      } else if(rangeType==='all'){
        for(let i=1;i<=pdfDoc.numPages;i++) pages.push(i);
      } else {
        const parsed = parseRange(rangeRaw, pdfDoc.numPages);
        if(!parsed||!parsed.length){
          alert('Please enter a valid page range, e.g., 1-3,5 or select pages.');
          return null;
        }
        pages = parsed;
      }
      return { quality, dpi, pages };
    }

    convertBtn.addEventListener('click', async function(){
      const config = getExportConfig();
      if(!config) return;
      await downloadPages(config.pages, config.quality, config.dpi);
    });

    zipBtn.addEventListener('click', async function(){
      const config = getExportConfig();
      if(!config) return;
      const zip = new JSZip();
      const folder = zip.folder('pdf-to-jpg');
      for(const pageNumber of config.pages){
        const blob = await renderPageToJpg(pageNumber, config.dpi, config.quality);
        folder.file(`page-${pageNumber}.jpg`, blob);
      }
      const baseName = (pdfNameEl?.textContent?.replace(/\.pdf$/i,'')||'pages');
      const zipBlob = await zip.generateAsync({ type:'blob' });
      saveAs(zipBlob, `${baseName}-images.zip`);
    });

    loadPdfFromSession();
  })();
</script>
    
<script src="js/auth.js" type="module"></script>

    <footer>
        <div class="container footer-inner">
            <div class="footer-company-links">
                <span>Company</span>
                <a href="index.html#about">About Us</a>
                <a href="index.html#contact">Contact</a>
                <a href="pricing.html">Pricing</a>
                <a href="privacy-policy.html">Privacy Policy</a>
                <a href="terms-of-service.html">Terms of Service</a>
                <a href="dmca-en.html">DMCA</a>
                <a href="blog.html">Blog</a>
            </div>
            <p class="footer-brand-line">&copy; easyjpgtopdf &mdash; Free PDF &amp; Image Tools for everyone. All rights reserved.</p>
            <p class="footer-credits">
                Thanks to Font Awesome, Google Fonts, jsPDF, pdf.js, pdf-lib, Mammoth, Tesseract.js, IMG.LY, Firebase, Unsplash photographers, and every open-source contributor powering this site.
                <a href="attributions.html">See full acknowledgements</a>.
            </p>
        </div>
    </footer>
    <script src="js/global-components.js"></script>

    <section class="feedback-section" style="margin: 40px 0; padding: 40px; background: #f8f9ff; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <h2 style="font-size: 2rem; color: #4361ee; margin-bottom: 30px; text-align: center;">
            <i class="fas fa-comments" style="margin-right: 10px;"></i>
            Reviews & Comments
        </h2>
        
        <div class="feedback-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; align-items: flex-start; max-width: 1200px; margin: 0 auto;">
            <!-- Left Side: Comments List -->
            <div class="feedback-card" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); min-height: 400px; max-height: 600px; overflow-y: auto;">
                <div class="thread-header" style="margin-bottom: 20px; border-bottom: 2px solid #e2e6ff; padding-bottom: 12px;">
                    <h3 style="font-size: 1.3rem; color: #0b1630; margin-bottom: 8px;">Live Comments</h3>
                    <p class="feedback-hint" style="font-size: 0.85rem; color: #9ca3af; margin: 0;">Share your experience and see what others are saying.</p>
                </div>
                <ul class="comment-list" id="feedbackList" style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 16px;">
                    <li class="feedback-muted" id="feedback-empty-state" style="text-align: center; padding: 40px 20px; color: #9ca3af; font-size: 0.95rem;">No comments yet. Start the conversation!</li>
                </ul>
            </div>
            
            <!-- Right Side: Feedback Form -->
            <div class="feedback-form-card" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); position: sticky; top: 20px;">
                <h3 style="font-size: 1.3rem; color: #0b1630; margin-bottom: 20px;">
                    <i class="fas fa-edit" style="color: #4361ee; margin-right: 8px;"></i>
                    Share Your Feedback
                </h3>
                <form id="feedbackForm" style="display: flex; flex-direction: column; gap: 15px;">
                    <div class="form-group">
                        <label for="feedbackName" style="display: block; margin-bottom: 8px; color: #56607a; font-weight: 600; font-size: 0.9rem;">Your Name</label>
                        <input type="text" id="feedbackName" placeholder="Enter your name" required style="width: 100%; padding: 12px 16px; border: 1px solid #e2e6ff; border-radius: 8px; font-size: 0.95rem; transition: border-color 0.3s; box-sizing: border-box;" onfocus="this.style.borderColor='#4361ee'" onblur="this.style.borderColor='#e2e6ff'">
                    </div>
                    <div class="form-group">
                        <label for="feedbackMessage" style="display: block; margin-bottom: 8px; color: #56607a; font-weight: 600; font-size: 0.9rem;">Your Comment</label>
                        <textarea id="feedbackMessage" placeholder="Write your feedback or comment here..." required rows="5" style="width: 100%; padding: 12px 16px; border: 1px solid #e2e6ff; border-radius: 8px; font-size: 0.95rem; resize: vertical; transition: border-color 0.3s; font-family: inherit; box-sizing: border-box;" onfocus="this.style.borderColor='#4361ee'" onblur="this.style.borderColor='#e2e6ff'"></textarea>
                    </div>
                    <button type="submit" style="background: linear-gradient(135deg, #4361ee, #3a0ca3); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; width: 100%;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(67, 97, 238, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        <i class="fas fa-paper-plane" style="margin-right: 8px;"></i>
                        Submit Feedback
                    </button>
                </form>
                <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #e2e6ff;">
                    <a href="feedback.html" style="color: #4361ee; text-decoration: none; font-weight: 600; font-size: 0.9rem; display: inline-flex; align-items: center; gap: 8px; transition: color 0.3s;" onmouseover="this.style.color='#3a0ca3'" onmouseout="this.style.color='#4361ee'">
                        <i class="fas fa-arrow-right"></i>
                        View All Feedback
                    </a>
                </div>
            </div>
        </div>
    </section>

    <style>
    @media (max-width: 768px) {
        .feedback-grid {
            grid-template-columns: 1fr !important;
        }
        .feedback-form-card {
            position: static !important;
        }
    }
    </style>

    <script>
    // Store feedback in localStorage (in production, use backend API)
    const currentPage = window.location.pathname.split('/').pop() || 'index.html';
    
    // Load feedbacks for this page (max 3, only genuine user comments)
    function loadFeedbacks() {
        const storedFeedbacks = JSON.parse(localStorage.getItem('feedbacks') || '{}');
        const pageFeedbacks = (storedFeedbacks[currentPage] || []).slice(0, 3);
        const feedbackList = document.getElementById('feedbackList');
        const emptyState = document.getElementById('feedback-empty-state');
        
        if (!feedbackList) return;
        
        // Clear existing content
        feedbackList.innerHTML = '';
        
        if (pageFeedbacks.length === 0) {
            // Show empty state
            if (emptyState) {
                feedbackList.appendChild(emptyState);
            } else {
                const empty = document.createElement('li');
                empty.className = 'feedback-muted';
                empty.id = 'feedback-empty-state';
                empty.style.cssText = 'text-align: center; padding: 40px 20px; color: #9ca3af; font-size: 0.95rem;';
                empty.textContent = 'No comments yet. Start the conversation!';
                feedbackList.appendChild(empty);
            }
            return;
        }
        
        // Remove empty state
        if (emptyState) {
            emptyState.remove();
        }
        
        // Display genuine user feedbacks
        pageFeedbacks.forEach(fb => {
            const li = document.createElement('li');
            li.className = 'live-comment';
            li.style.cssText = 'background: #f8f9ff; padding: 16px; border-radius: 8px; border-left: 3px solid #4361ee; margin-bottom: 12px;';
            
            const header = document.createElement('div');
            header.style.cssText = 'display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;';
            
            const nameDiv = document.createElement('div');
            const name = document.createElement('h4');
            name.style.cssText = 'font-size: 1rem; color: #0b1630; margin: 0 0 4px 0; font-weight: 600;';
            name.textContent = fb.name || 'Anonymous';
            
            const time = document.createElement('span');
            time.style.cssText = 'font-size: 0.8rem; color: #9ca3af;';
            time.textContent = fb.date || 'Recently';
            
            nameDiv.appendChild(name);
            nameDiv.appendChild(time);
            header.appendChild(nameDiv);
            
            li.appendChild(header);
            
            const body = document.createElement('p');
            body.style.cssText = 'color: #56607a; line-height: 1.6; margin: 0 0 12px 0; font-size: 0.9rem;';
            body.textContent = fb.message || '';
            li.appendChild(body);
            
            // Add reply if exists
            if (fb.reply) {
                const replyDiv = document.createElement('div');
                replyDiv.style.cssText = 'margin-left: 20px; padding: 12px; background: white; border-radius: 6px; margin-top: 10px; border-left: 2px solid #4361ee;';
                
                const replyHeader = document.createElement('div');
                replyHeader.style.cssText = 'display: flex; align-items: center; gap: 8px; margin-bottom: 6px;';
                
                const replyIcon = document.createElement('i');
                replyIcon.className = 'fas fa-reply';
                replyIcon.style.cssText = 'color: #4361ee; font-size: 0.85rem;';
                
                const replyLabel = document.createElement('strong');
                replyLabel.style.cssText = 'color: #4361ee; font-size: 0.85rem;';
                replyLabel.textContent = 'Admin Reply:';
                
                replyHeader.appendChild(replyIcon);
                replyHeader.appendChild(replyLabel);
                replyDiv.appendChild(replyHeader);
                
                const replyText = document.createElement('p');
                replyText.style.cssText = 'color: #56607a; font-size: 0.85rem; line-height: 1.5; margin: 0;';
                replyText.textContent = fb.reply;
                replyDiv.appendChild(replyText);
                
                li.appendChild(replyDiv);
            }
            
            feedbackList.appendChild(li);
        });
    }
    
    // Handle feedback form submission
    const feedbackForm = document.getElementById('feedbackForm');
    if (feedbackForm) {
        feedbackForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('feedbackName').value.trim();
            const message = document.getElementById('feedbackMessage').value.trim();
            
            if (!name || !message) {
                alert('Please fill in all fields');
                return;
            }
            
            const feedback = {
                name: name,
                message: message,
                date: new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }),
                page: currentPage
            };
            
            // Store in localStorage
            const storedFeedbacks = JSON.parse(localStorage.getItem('feedbacks') || '{}');
            if (!storedFeedbacks[currentPage]) {
                storedFeedbacks[currentPage] = [];
            }
            storedFeedbacks[currentPage].unshift(feedback);
            localStorage.setItem('feedbacks', JSON.stringify(storedFeedbacks));
            
            // Reset form
            this.reset();
            
            // Reload feedbacks
            loadFeedbacks();
            
            alert('Thank you for your feedback!');
        });
    }
    
    // Load feedbacks on page load
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadFeedbacks);
    } else {
        loadFeedbacks();
    }
    </script>

        <script>
    // Ensure header loads - call after script loads
    if (typeof loadGlobalHeader === 'function') {
        loadGlobalHeader();
    } else {
        // Wait for script to load
        var checkHeader = setInterval(function() {
            if (typeof loadGlobalHeader === 'function') {
                loadGlobalHeader();
                clearInterval(checkHeader);
            }
        }, 50);
        // Stop checking after 2 seconds
        setTimeout(function() { clearInterval(checkHeader); }, 2000);
    }
    </script>
</body>
</html>
