<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Image Repair Pro - 50+ Tools | Fix Damaged Photos</title>
    <meta name="description" content="Professional AI image repair with 50+ tools. Fix damaged, blurred, folded photos. Face enhancement, beauty filters, scan correction, manual border adjustment, and complete image restoration.">
    
    <link rel="icon" type="image/png" href="images/favicon.png">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/footer.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #4cc9f0;
            --success: #4bb543;
            --danger: #dc3545;
            --warning: #ffc107;
            --dark: #212529;
            --light: #f8f9fa;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--dark);
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 15px;
        }

        /* Upload Section */
        .upload-section {
            background: white;
            border: 3px dashed #ddd;
            border-radius: 15px;
            padding: 60px 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin: 20px 0;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
        }

        .upload-section:hover {
            border-color: var(--primary);
            background: #f0f4ff;
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
        }

        .upload-icon {
            font-size: 72px;
            color: var(--primary);
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Editor Container */
        .editor-container {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 40px rgba(0,0,0,0.2);
            margin-top: 20px;
        }

        .editor-container.active {
            display: block;
        }

        /* Advanced Toolbar */
        .toolbar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 10px 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .toolbar-row {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 8px;
        }

        .toolbar-row:last-child {
            margin-bottom: 0;
        }

        .tool-group {
            display: flex;
            gap: 4px;
            align-items: center;
            background: rgba(255,255,255,0.15);
            padding: 4px 8px;
            border-radius: 6px;
            backdrop-filter: blur(10px);
        }

        .tool-label {
            color: white;
            font-size: 9px;
            font-weight: 700;
            text-transform: uppercase;
            margin-right: 4px;
            white-space: nowrap;
            letter-spacing: 0.5px;
        }

        .tool-btn {
            background: rgba(255,255,255,0.95);
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 9px;
            font-weight: 600;
            color: #333;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 3px;
            white-space: nowrap;
        }

        .tool-btn i {
            font-size: 10px;
        }

        .tool-btn:hover {
            background: white;
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.25);
        }

        .tool-btn.active {
            background: var(--accent);
            color: white;
        }

        .dropdown-group {
            position: relative;
        }

        .dropdown-toggle {
            background: rgba(255,255,255,0.95);
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 9px;
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .dropdown-toggle:hover {
            background: white;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
            padding: 8px;
            min-width: 200px;
            max-width: 250px;
            z-index: 1000;
            margin-top: 4px;
            max-height: 400px;
            overflow-y: auto;
        }

        .dropdown-group.active .dropdown-menu {
            display: block;
        }

        .dropdown-item {
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }

        .dropdown-item:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .dropdown-item i {
            width: 16px;
            text-align: center;
        }

        /* Workspace - 7.5 inch frames */
        .workspace {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .canvas-panel {
            background: #f9fafb;
            border-radius: 10px;
            padding: 12px;
            height: 562.5px; /* 7.5 inches = 562.5px at 75 DPI */
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .canvas-panel h3 {
            font-size: 13px;
            color: #555;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 700;
        }

        .canvas-panel h3 i {
            color: var(--primary);
        }

        .canvas-wrapper {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            overflow: hidden;
            position: relative;
        }

        .canvas-wrapper canvas {
            max-width: 100%;
            max-height: 100%;
            display: block;
            cursor: crosshair;
        }

        /* Border Control Handles */
        .border-handle {
            position: absolute;
            background: var(--primary);
            border: 2px solid white;
            cursor: move;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            display: none;
        }

        .border-handle.active {
            display: block;
        }

        .border-handle.corner {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .border-handle.edge {
            background: rgba(67, 97, 238, 0.6);
        }

        .border-handle.top,
        .border-handle.bottom {
            width: 60px;
            height: 6px;
            cursor: ns-resize;
        }

        .border-handle.left,
        .border-handle.right {
            width: 6px;
            height: 60px;
            cursor: ew-resize;
        }

        .border-handle.top-left,
        .border-handle.top-right,
        .border-handle.bottom-left,
        .border-handle.bottom-right {
            cursor: nwse-resize;
        }

        /* Grid Overlay for Border Adjustment */
        .grid-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            display: none;
        }

        .grid-overlay.active {
            display: block;
        }

        .grid-line {
            position: absolute;
            background: rgba(67, 97, 238, 0.3);
        }

        .grid-line.vertical {
            width: 1px;
            height: 100%;
        }

        .grid-line.horizontal {
            width: 100%;
            height: 1px;
        }

        /* Loading Overlay */
        .loading-overlay {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.95);
            align-items: center;
            justify-content: center;
            z-index: 20;
            flex-direction: column;
            gap: 15px;
        }

        .loading-overlay.active {
            display: flex;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: var(--primary);
            font-weight: 600;
            font-size: 14px;
        }

        /* Slider Controls */
        .slider-panel {
            background: #f9fafb;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 15px;
            display: none;
            border: 1px solid #e0e0e0;
        }

        .slider-panel.active {
            display: block;
        }

        .slider-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .slider-group:last-child {
            margin-bottom: 0;
        }

        .slider-label {
            font-size: 11px;
            font-weight: 600;
            color: #555;
            min-width: 100px;
        }

        .slider-group input[type="range"] {
            flex: 1;
            height: 6px;
            background: #ddd;
            border-radius: 3px;
            outline: none;
        }

        .slider-group input[type="range"]::-webkit-slider-thumb {
            width: 18px;
            height: 18px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
        }

        .slider-value {
            font-size: 11px;
            font-weight: 700;
            color: var(--primary);
            min-width: 40px;
            text-align: right;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(67,97,238,0.3);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(67,97,238,0.4);
        }

        .action-btn.success {
            background: linear-gradient(135deg, var(--success) 0%, #3a9d3a 100%);
        }

        .action-btn.danger {
            background: linear-gradient(135deg, var(--danger) 0%, #b02a37 100%);
        }

        .action-btn.warning {
            background: linear-gradient(135deg, var(--warning) 0%, #e0a800 100%);
        }

        /* Preview Modal */
        .preview-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.95);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .preview-modal.active {
            display: flex;
        }

        .preview-content {
            background: white;
            border-radius: 15px;
            padding: 25px;
            max-width: 95%;
            max-height: 95%;
            position: relative;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 50px rgba(0,0,0,0.5);
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .preview-header h3 {
            color: var(--dark);
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-btn {
            background: var(--danger);
            color: white;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: #c82333;
            transform: rotate(90deg) scale(1.1);
        }

        .preview-image-wrapper {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: auto;
        }

        .preview-image-wrapper img {
            max-width: 100%;
            max-height: 75vh;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .workspace {
                grid-template-columns: 1fr;
            }
            
            .canvas-panel {
                height: 500px;
            }
        }

        @media (max-width: 768px) {
            .toolbar-row {
                gap: 4px;
            }

            .tool-btn {
                padding: 4px 8px;
                font-size: 8px;
            }

            .canvas-panel {
                height: 400px;
            }

            .action-buttons {
                flex-direction: column;
            }

            .action-btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="index.html" class="logo">
                    <img src="images/logo.png" alt="Logo" style="height:54px;">
                </a>
                <div class="nav-links">
                    <div class="dropdown">
                        <a href="#">Convert to PDF <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="jpg-to-pdf.html">JPG to PDF</a>
                            <a href="word-to-pdf.html">Word to PDF</a>
                            <a href="excel-to-pdf.html">Excel to PDF</a>
                            <a href="ppt-to-pdf.html">PowerPoint to PDF</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Convert from PDF <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="pdf-to-jpg.html">PDF to JPG</a>
                            <a href="pdf-to-word.html">PDF to Word</a>
                            <a href="pdf-to-excel.html">PDF to Excel</a>
                            <a href="pdf-to-ppt.html">PDF to PowerPoint</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Pdf Editor <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="merge-pdf.html">Merge PDF</a>
                            <a href="split-pdf.html">Split PDF</a>
                            <a href="compress-pdf.html">Compress PDF</a>
                            <a href="edit-pdf.html">Edit PDF</a>
                            <a href="protect-pdf.html">Protect PDF</a>
                            <a href="unlock-pdf.html">Unlock PDF</a>
                            <a href="watermark-pdf.html">Watermark PDF</a>
                            <a href="crop-pdf.html">Crop PDF</a>
                            <a href="add-page-numbers.html">Add Page Numbers</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Image Tools <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="image-repair.html">AI Image Repair</a>
                            <a href="image-compressor.html">Image Compressor</a>
                            <a href="image-resizer.html">Image Resizer</a>
                            <a href="image-editor.html">Image Editor</a>
                            <a href="background-remover.html">Image Background Remover</a>
                            <a href="ocr-image.html">OCR Image</a>
                            <a href="image-watermark.html">Image Watermark Tool</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Design Tools <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="resume-maker.html">Resume Maker</a>
                            <a href="biodata-maker.html">Marriage Biodata Maker</a>
                            <a href="ai-image-generator.html">AI Image Generator</a>
                            <a href="marriage-card.html">Marriage Card</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Other Tools <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="excel-unlocker.html">Excel Unlocker</a>
                            <a href="protect-excel.html">Protect Excel Sheet</a>
                        </div>
                    </div>
                </div>
                <div class="auth-buttons">
                    <a href="login.html" class="auth-link">Sign In</a>
                    <a href="signup.html" class="auth-btn">
                        <i class="fas fa-user-plus"></i><span>Signup</span>
                    </a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <h1 style="text-align: center; margin: 20px 0 10px; color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
            <i class="fas fa-magic"></i> AI Image Repair Pro - 50+ Tools
        </h1>
        <p style="text-align: center; color: rgba(255,255,255,0.95); margin-bottom: 20px; font-size: 15px;">
            Professional image restoration with AI-powered features, face enhancement, beauty filters & scan correction
        </p>

        <!-- Upload Section -->
        <div class="upload-section" id="uploadSection">
            <div class="upload-icon">
                <i class="fas fa-cloud-upload-alt"></i>
            </div>
            <h2 style="color: var(--primary); margin-bottom: 10px;">Upload Your Damaged Photo</h2>
            <p style="color: #666; margin-bottom: 5px;">Drag & drop your image here, or click to browse</p>
            <p style="font-size: 12px; color: #999;">Supports: JPG, PNG, WEBP, BMP, TIFF (Max 15MB)</p>
            <input type="file" id="fileInput" accept="image/*" style="display: none;">
        </div>

        <!-- Editor Container -->
        <div class="editor-container" id="editorContainer">
            <!-- Advanced Toolbar with 50+ Tools -->
            <div class="toolbar">
                <!-- Row 1: AI Repair Tools -->
                <div class="toolbar-row">
                    <div class="dropdown-group">
                        <button class="dropdown-toggle">
                            <i class="fas fa-magic"></i> AI Repair <i class="fas fa-caret-down"></i>
                        </button>
                        <div class="dropdown-menu">
                            <div class="dropdown-item" data-tool="auto-fix"><i class="fas fa-wand-magic"></i> Auto Fix All</div>
                            <div class="dropdown-item" data-tool="deblur"><i class="fas fa-eye"></i> Remove Blur</div>
                            <div class="dropdown-item" data-tool="denoise"><i class="fas fa-broom"></i> Remove Noise</div>
                            <div class="dropdown-item" data-tool="enhance"><i class="fas fa-sparkles"></i> Enhance Quality</div>
                            <div class="dropdown-item" data-tool="restore"><i class="fas fa-undo"></i> Restore Old Photo</div>
                            <div class="dropdown-item" data-tool="scratch-remove"><i class="fas fa-eraser"></i> Remove Scratches</div>
                            <div class="dropdown-item" data-tool="color-restore"><i class="fas fa-palette"></i> Restore Colors</div>
                        </div>
                    </div>

                    <div class="dropdown-group">
                        <button class="dropdown-toggle">
                            <i class="fas fa-user"></i> Face & Beauty <i class="fas fa-caret-down"></i>
                        </button>
                        <div class="dropdown-menu">
                            <div class="dropdown-item" data-tool="face-enhance"><i class="fas fa-smile"></i> Face Enhancement</div>
                            <div class="dropdown-item" data-tool="skin-smooth"><i class="fas fa-hand-sparkles"></i> Smooth Skin</div>
                            <div class="dropdown-item" data-tool="wrinkle-remove"><i class="fas fa-face-smile"></i> Remove Wrinkles</div>
                            <div class="dropdown-item" data-tool="eye-enhance"><i class="fas fa-eye"></i> Enhance Eyes</div>
                            <div class="dropdown-item" data-tool="teeth-whiten"><i class="fas fa-tooth"></i> Whiten Teeth</div>
                            <div class="dropdown-item" data-tool="makeup"><i class="fas fa-paint-brush"></i> Apply Makeup</div>
                            <div class="dropdown-item" data-tool="blemish"><i class="fas fa-circle"></i> Remove Blemishes</div>
                            <div class="dropdown-item" data-tool="red-eye"><i class="fas fa-eye-slash"></i> Fix Red Eye</div>
                        </div>
                    </div>

                    <div class="dropdown-group">
                        <button class="dropdown-toggle">
                            <i class="fas fa-adjust"></i> Adjustments <i class="fas fa-caret-down"></i>
                        </button>
                        <div class="dropdown-menu">
                            <div class="dropdown-item" data-tool="brightness"><i class="fas fa-sun"></i> Brightness</div>
                            <div class="dropdown-item" data-tool="contrast"><i class="fas fa-circle-half-stroke"></i> Contrast</div>
                            <div class="dropdown-item" data-tool="saturation"><i class="fas fa-droplet"></i> Saturation</div>
                            <div class="dropdown-item" data-tool="vibrance"><i class="fas fa-fire"></i> Vibrance</div>
                            <div class="dropdown-item" data-tool="hue"><i class="fas fa-palette"></i> Hue</div>
                            <div class="dropdown-item" data-tool="temperature"><i class="fas fa-temperature-half"></i> Temperature</div>
                            <div class="dropdown-item" data-tool="tint"><i class="fas fa-fill-drip"></i> Tint</div>
                            <div class="dropdown-item" data-tool="exposure"><i class="fas fa-lightbulb"></i> Exposure</div>
                        </div>
                    </div>

                    <div class="dropdown-group">
                        <button class="dropdown-toggle">
                            <i class="fas fa-filter"></i> Filters <i class="fas fa-caret-down"></i>
                        </button>
                        <div class="dropdown-menu">
                            <div class="dropdown-item" data-tool="vintage"><i class="fas fa-clock"></i> Vintage</div>
                            <div class="dropdown-item" data-tool="sepia"><i class="fas fa-image"></i> Sepia</div>
                            <div class="dropdown-item" data-tool="grayscale"><i class="fas fa-circle"></i> Grayscale</div>
                            <div class="dropdown-item" data-tool="invert"><i class="fas fa-exchange-alt"></i> Invert</div>
                            <div class="dropdown-item" data-tool="posterize"><i class="fas fa-th"></i> Posterize</div>
                            <div class="dropdown-item" data-tool="solarize"><i class="fas fa-sun"></i> Solarize</div>
                        </div>
                    </div>

                    <div class="dropdown-group">
                        <button class="dropdown-toggle">
                            <i class="fas fa-sliders-h"></i> Details <i class="fas fa-caret-down"></i>
                        </button>
                        <div class="dropdown-menu">
                            <div class="dropdown-item" data-tool="sharpen"><i class="fas fa-search-plus"></i> Sharpen</div>
                            <div class="dropdown-item" data-tool="clarity"><i class="fas fa-adjust"></i> Clarity</div>
                            <div class="dropdown-item" data-tool="dehaze"><i class="fas fa-cloud"></i> Dehaze</div>
                            <div class="dropdown-item" data-tool="grain"><i class="fas fa-asterisk"></i> Add Grain</div>
                            <div class="dropdown-item" data-tool="vignette"><i class="fas fa-circle-notch"></i> Vignette</div>
                        </div>
                    </div>
                </div>

                <!-- Row 2: Transform & Scan Correction -->
                <div class="toolbar-row">
                    <div class="tool-group">
                        <span class="tool-label">Rotate</span>
                        <button class="tool-btn" data-action="rotate-left"><i class="fas fa-undo"></i> Left</button>
                        <button class="tool-btn" data-action="rotate-right"><i class="fas fa-redo"></i> Right</button>
                        <button class="tool-btn" data-action="flip-h"><i class="fas fa-arrows-alt-h"></i> Flip H</button>
                        <button class="tool-btn" data-action="flip-v"><i class="fas fa-arrows-alt-v"></i> Flip V</button>
                    </div>

                    <div class="tool-group">
                        <span class="tool-label">Scan Fix</span>
                        <button class="tool-btn" data-action="perspective" title="Fix Perspective"><i class="fas fa-crop"></i> Perspective</button>
                        <button class="tool-btn" data-action="straighten"><i class="fas fa-level-up-alt"></i> Straighten</button>
                        <button class="tool-btn" data-action="deskew"><i class="fas fa-angle-double-right"></i> Deskew</button>
                        <button class="tool-btn" data-action="auto-crop"><i class="fas fa-crop-alt"></i> Auto Crop</button>
                    </div>

                    <div class="tool-group">
                        <span class="tool-label">Border</span>
                        <button class="tool-btn" id="borderAdjustBtn" data-action="border-adjust"><i class="fas fa-border-all"></i> Manual Adjust</button>
                        <button class="tool-btn" data-action="crop-tool"><i class="fas fa-crop"></i> Crop</button>
                        <button class="tool-btn" data-action="expand"><i class="fas fa-expand"></i> Expand</button>
                    </div>

                    <div class="dropdown-group">
                        <button class="dropdown-toggle">
                            <i class="fas fa-shapes"></i> Effects <i class="fas fa-caret-down"></i>
                        </button>
                        <div class="dropdown-menu">
                            <div class="dropdown-item" data-tool="blur-bg"><i class="fas fa-circle"></i> Blur Background</div>
                            <div class="dropdown-item" data-tool="bokeh"><i class="fas fa-circle-notch"></i> Bokeh Effect</div>
                            <div class="dropdown-item" data-tool="glow"><i class="fas fa-star"></i> Glow</div>
                            <div class="dropdown-item" data-tool="shadow"><i class="fas fa-moon"></i> Add Shadow</div>
                            <div class="dropdown-item" data-tool="frame"><i class="fas fa-border-style"></i> Add Frame</div>
                        </div>
                    </div>

                    <div class="tool-group">
                        <button class="tool-btn danger" data-action="reset"><i class="fas fa-sync-alt"></i> Reset</button>
                    </div>
                </div>
            </div>

            <!-- Adjustment Sliders Panel -->
            <div class="slider-panel" id="sliderPanel">
                <div class="slider-group">
                    <span class="slider-label" id="sliderName">Brightness</span>
                    <input type="range" id="mainSlider" min="-100" max="100" value="0">
                    <span class="slider-value" id="sliderValue">0</span>
                </div>
            </div>

            <!-- Workspace with 7.5 inch frames -->
            <div class="workspace">
                <!-- Original Image Panel -->
                <div class="canvas-panel">
                    <h3><i class="fas fa-image"></i> Original Image</h3>
                    <div class="canvas-wrapper" id="originalWrapper">
                        <canvas id="originalCanvas"></canvas>
                        <div class="loading-overlay">
                            <div class="spinner"></div>
                            <div class="loading-text">Loading...</div>
                        </div>
                    </div>
                </div>

                <!-- Live Preview Panel -->
                <div class="canvas-panel">
                    <h3><i class="fas fa-eye"></i> Live Preview</h3>
                    <div class="canvas-wrapper" id="previewWrapper">
                        <canvas id="previewCanvas"></canvas>
                        
                        <!-- Border Adjustment Handles (9 parts: 4 corners + 4 edges + center) -->
                        <div class="border-handle corner top-left" data-handle="top-left"></div>
                        <div class="border-handle edge top" data-handle="top"></div>
                        <div class="border-handle corner top-right" data-handle="top-right"></div>
                        <div class="border-handle edge left" data-handle="left"></div>
                        <div class="border-handle edge right" data-handle="right"></div>
                        <div class="border-handle corner bottom-left" data-handle="bottom-left"></div>
                        <div class="border-handle edge bottom" data-handle="bottom"></div>
                        <div class="border-handle corner bottom-right" data-handle="bottom-right"></div>
                        
                        <!-- Grid Overlay -->
                        <div class="grid-overlay" id="gridOverlay">
                            <div class="grid-line vertical" style="left: 33.33%"></div>
                            <div class="grid-line vertical" style="left: 66.66%"></div>
                            <div class="grid-line horizontal" style="top: 33.33%"></div>
                            <div class="grid-line horizontal" style="top: 66.66%"></div>
                        </div>
                        
                        <div class="loading-overlay" id="previewLoading">
                            <div class="spinner"></div>
                            <div class="loading-text">Processing...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="action-btn" id="fullPreviewBtn">
                    <i class="fas fa-expand"></i> Full Preview
                </button>
                <button class="action-btn success" id="downloadBtn">
                    <i class="fas fa-download"></i> Download Repaired
                </button>
                <button class="action-btn warning" id="compareBtn">
                    <i class="fas fa-columns"></i> Compare
                </button>
                <button class="action-btn" id="reuploadBtn">
                    <i class="fas fa-upload"></i> New Image
                </button>
                <button class="action-btn" id="shareBtn">
                    <i class="fas fa-share-alt"></i> Share
                </button>
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div class="preview-modal" id="previewModal">
        <div class="preview-content">
            <div class="preview-header">
                <h3><i class="fas fa-expand"></i> Full Preview</h3>
                <button class="close-btn" id="closePreviewBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="preview-image-wrapper">
                <img id="fullPreviewImage" src="" alt="Full Preview">
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container footer-inner">
            <div class="footer-company-links">
                <span>Company</span>
                <a href="index.html#about">About Us</a>
                <a href="index.html#contact">Contact</a>
                <a href="privacy-policy.html">Privacy Policy</a>
                <a href="terms-of-service.html">Terms of Service</a>
            </div>
            <p class="footer-brand-line">&copy; easyjpgtopdf &mdash; Free PDF &amp; Image Tools for everyone.</p>
            <p class="footer-credits">
                Thanks to Font Awesome, Google Fonts, jsPDF, pdf.js, pdf-lib, Mammoth, Tesseract.js, IMG.LY, Firebase, Unsplash photographers, and every open-source contributor powering this site.
                <a href="attributions.html">See full acknowledgements</a>.
            </p>
        </div>
    </footer>

    <script>
        // Global Variables
        let originalImage = null;
        let currentImage = null;
        let originalCanvas, previewCanvas;
        let originalCtx, previewCtx;
        let borderAdjustMode = false;
        let draggedHandle = null;
        let borderBounds = { top: 0, left: 0, right: 0, bottom: 0 };
        let currentTool = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            originalCanvas = document.getElementById('originalCanvas');
            previewCanvas = document.getElementById('previewCanvas');
            originalCtx = originalCanvas.getContext('2d');
            previewCtx = previewCanvas.getContext('2d');

            // Upload handlers
            const uploadSection = document.getElementById('uploadSection');
            const fileInput = document.getElementById('fileInput');
            
            uploadSection.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', handleFileSelect);

            // Drag and drop
            uploadSection.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadSection.classList.add('dragover');
            });
            uploadSection.addEventListener('dragleave', () => uploadSection.classList.remove('dragover'));
            uploadSection.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadSection.classList.remove('dragover');
                if (e.dataTransfer.files[0]) loadImage(e.dataTransfer.files[0]);
            });

            // Tool buttons
            document.querySelectorAll('.dropdown-item[data-tool]').forEach(item => {
                item.addEventListener('click', () => {
                    const tool = item.getAttribute('data-tool');
                    applyTool(tool, item.textContent.trim());
                    item.closest('.dropdown-group').classList.remove('active');
                });
            });

            document.querySelectorAll('.tool-btn[data-action]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const action = btn.getAttribute('data-action');
                    executeAction(action);
                });
            });

            // Dropdown toggles
            document.querySelectorAll('.dropdown-toggle').forEach(toggle => {
                toggle.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const group = toggle.parentElement;
                    document.querySelectorAll('.dropdown-group').forEach(g => {
                        if (g !== group) g.classList.remove('active');
                    });
                    group.classList.toggle('active');
                });
            });

            document.addEventListener('click', () => {
                document.querySelectorAll('.dropdown-group').forEach(g => g.classList.remove('active'));
            });

            // Border adjust
            document.getElementById('borderAdjustBtn').addEventListener('click', toggleBorderAdjust);
            
            // Border handles
            document.querySelectorAll('.border-handle').forEach(handle => {
                handle.addEventListener('mousedown', startDrag);
            });
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);

            // Slider
            const mainSlider = document.getElementById('mainSlider');
            mainSlider.addEventListener('input', (e) => {
                document.getElementById('sliderValue').textContent = e.target.value;
                if (currentTool) applySliderAdjustment(currentTool, e.target.value);
            });

            // Action buttons
            document.getElementById('fullPreviewBtn').addEventListener('click', showFullPreview);
            document.getElementById('downloadBtn').addEventListener('click', downloadImage);
            document.getElementById('reuploadBtn').addEventListener('click', reupload);
            document.getElementById('shareBtn').addEventListener('click', () => alert('Share feature coming soon!'));
            document.getElementById('compareBtn').addEventListener('click', compareImages);
            document.getElementById('closePreviewBtn').addEventListener('click', closePreview);

            // Modal backdrop close
            document.getElementById('previewModal').addEventListener('click', (e) => {
                if (e.target.id === 'previewModal') closePreview();
            });
        }

        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) loadImage(file);
        }

        function loadImage(file) {
            if (!file.type.startsWith('image/')) {
                alert('Please select a valid image file!');
                return;
            }
            if (file.size > 15 * 1024 * 1024) {
                alert('File size should not exceed 15MB!');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    originalImage = img;
                    initializeEditor();
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function initializeEditor() {
            document.getElementById('uploadSection').style.display = 'none';
            document.getElementById('editorContainer').classList.add('active');

            // 7.5 inches = 562.5px at 75 DPI, accounting for padding
            const maxHeight = 510;
            const maxWidth = 600;
            
            let width = originalImage.width;
            let height = originalImage.height;
            
            if (height > maxHeight || width > maxWidth) {
                const ratio = Math.min(maxWidth / width, maxHeight / height);
                width *= ratio;
                height *= ratio;
            }

            originalCanvas.width = previewCanvas.width = width;
            originalCanvas.height = previewCanvas.height = height;

            originalCtx.drawImage(originalImage, 0, 0, width, height);
            currentImage = originalCtx.getImageData(0, 0, width, height);
            updatePreview();

            // Initialize border bounds
            borderBounds = { top: 0, left: 0, right: width, bottom: height };
        }

        function updatePreview() {
            previewCtx.putImageData(currentImage, 0, 0);
        }

        function showLoading() {
            document.getElementById('previewLoading').classList.add('active');
        }

        function hideLoading() {
            document.getElementById('previewLoading').classList.remove('active');
        }

        // Tool Application Functions
        function applyTool(tool, label) {
            currentTool = tool;
            
            // Show slider for adjustable tools
            const sliderTools = ['brightness', 'contrast', 'saturation', 'vibrance', 'hue', 'temperature', 'tint', 'exposure', 'sharpen', 'clarity', 'dehaze', 'grain', 'vignette'];
            
            if (sliderTools.includes(tool)) {
                const sliderPanel = document.getElementById('sliderPanel');
                sliderPanel.classList.add('active');
                document.getElementById('sliderName').textContent = label;
                document.getElementById('mainSlider').value = 0;
                document.getElementById('sliderValue').textContent = '0';
            } else {
                document.getElementById('sliderPanel').classList.remove('active');
                executeToolEffect(tool);
            }
        }

        function executeToolEffect(tool) {
            showLoading();
            
            setTimeout(() => {
                const imageData = previewCtx.getImageData(0, 0, previewCanvas.width, previewCanvas.height);
                const data = imageData.data;

                switch(tool) {
                    case 'auto-fix':
                        applyAutoFix(data);
                        break;
                    case 'deblur':
                        applyDeblur(data);
                        break;
                    case 'denoise':
                        applyDenoise(data);
                        break;
                    case 'enhance':
                        applyEnhance(data);
                        break;
                    case 'grayscale':
                        applyGrayscale(data);
                        break;
                    case 'sepia':
                        applySepia(data);
                        break;
                    case 'invert':
                        applyInvert(data);
                        break;
                    default:
                        console.log('Tool:', tool);
                }

                currentImage = imageData;
                updatePreview();
                hideLoading();
            }, 800);
        }

        function applySliderAdjustment(tool, value) {
            const imageData = originalCtx.getImageData(0, 0, originalCanvas.width, originalCanvas.height);
            const data = imageData.data;
            const factor = parseFloat(value) / 100;

            switch(tool) {
                case 'brightness':
                    for (let i = 0; i < data.length; i += 4) {
                        data[i] += factor * 255;
                        data[i+1] += factor * 255;
                        data[i+2] += factor * 255;
                    }
                    break;
                case 'contrast':
                    for (let i = 0; i < data.length; i += 4) {
                        data[i] = (data[i] - 128) * (1 + factor) + 128;
                        data[i+1] = (data[i+1] - 128) * (1 + factor) + 128;
                        data[i+2] = (data[i+2] - 128) * (1 + factor) + 128;
                    }
                    break;
                case 'saturation':
                    for (let i = 0; i < data.length; i += 4) {
                        const gray = 0.3 * data[i] + 0.59 * data[i+1] + 0.11 * data[i+2];
                        data[i] = gray + (data[i] - gray) * (1 + factor);
                        data[i+1] = gray + (data[i+1] - gray) * (1 + factor);
                        data[i+2] = gray + (data[i+2] - gray) * (1 + factor);
                    }
                    break;
            }

            // Clamp values
            for (let i = 0; i < data.length; i++) {
                data[i] = Math.max(0, Math.min(255, data[i]));
            }

            currentImage = imageData;
            updatePreview();
        }

        // Effect Functions
        function applyAutoFix(data) {
            for (let i = 0; i < data.length; i += 4) {
                data[i] = Math.min(255, (data[i] - 128) * 1.15 + 128);
                data[i+1] = Math.min(255, (data[i+1] - 128) * 1.15 + 128);
                data[i+2] = Math.min(255, (data[i+2] - 128) * 1.15 + 128);
            }
        }

        function applyDeblur(data) {
            for (let i = 0; i < data.length; i += 4) {
                data[i] *= 1.3;
                data[i+1] *= 1.3;
                data[i+2] *= 1.3;
            }
        }

        function applyDenoise(data) {
            // Simulated noise reduction
            for (let i = 0; i < data.length; i += 4) {
                const avg = (data[i] + data[i+1] + data[i+2]) / 3;
                data[i] = data[i] * 0.8 + avg * 0.2;
                data[i+1] = data[i+1] * 0.8 + avg * 0.2;
                data[i+2] = data[i+2] * 0.8 + avg * 0.2;
            }
        }

        function applyEnhance(data) {
            for (let i = 0; i < data.length; i += 4) {
                data[i] *= 1.15;
                data[i+1] *= 1.15;
                data[i+2] *= 1.15;
            }
        }

        function applyGrayscale(data) {
            for (let i = 0; i < data.length; i += 4) {
                const gray = 0.299 * data[i] + 0.587 * data[i+1] + 0.114 * data[i+2];
                data[i] = data[i+1] = data[i+2] = gray;
            }
        }

        function applySepia(data) {
            for (let i = 0; i < data.length; i += 4) {
                const r = data[i], g = data[i+1], b = data[i+2];
                data[i] = Math.min(255, r * 0.393 + g * 0.769 + b * 0.189);
                data[i+1] = Math.min(255, r * 0.349 + g * 0.686 + b * 0.168);
                data[i+2] = Math.min(255, r * 0.272 + g * 0.534 + b * 0.131);
            }
        }

        function applyInvert(data) {
            for (let i = 0; i < data.length; i += 4) {
                data[i] = 255 - data[i];
                data[i+1] = 255 - data[i+1];
                data[i+2] = 255 - data[i+2];
            }
        }

        // Action Functions
        function executeAction(action) {
            switch(action) {
                case 'rotate-left':
                    rotateImage(-90);
                    break;
                case 'rotate-right':
                    rotateImage(90);
                    break;
                case 'flip-h':
                    flipImage('horizontal');
                    break;
                case 'flip-v':
                    flipImage('vertical');
                    break;
                case 'reset':
                    resetImage();
                    break;
                default:
                    alert(`${action} feature coming soon!`);
            }
        }

        function rotateImage(degrees) {
            showLoading();
            setTimeout(() => {
                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');

                if (Math.abs(degrees) === 90) {
                    tempCanvas.width = previewCanvas.height;
                    tempCanvas.height = previewCanvas.width;
                } else {
                    tempCanvas.width = previewCanvas.width;
                    tempCanvas.height = previewCanvas.height;
                }

                tempCtx.translate(tempCanvas.width / 2, tempCanvas.height / 2);
                tempCtx.rotate(degrees * Math.PI / 180);
                tempCtx.drawImage(previewCanvas, -previewCanvas.width / 2, -previewCanvas.height / 2);

                previewCanvas.width = tempCanvas.width;
                previewCanvas.height = tempCanvas.height;
                previewCtx.drawImage(tempCanvas, 0, 0);

                currentImage = previewCtx.getImageData(0, 0, previewCanvas.width, previewCanvas.height);
                hideLoading();
            }, 500);
        }

        function flipImage(direction) {
            showLoading();
            setTimeout(() => {
                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');
                tempCanvas.width = previewCanvas.width;
                tempCanvas.height = previewCanvas.height;

                tempCtx.save();
                if (direction === 'horizontal') {
                    tempCtx.scale(-1, 1);
                    tempCtx.drawImage(previewCanvas, -previewCanvas.width, 0);
                } else {
                    tempCtx.scale(1, -1);
                    tempCtx.drawImage(previewCanvas, 0, -previewCanvas.height);
                }
                tempCtx.restore();

                previewCtx.clearRect(0, 0, previewCanvas.width, previewCanvas.height);
                previewCtx.drawImage(tempCanvas, 0, 0);

                currentImage = previewCtx.getImageData(0, 0, previewCanvas.width, previewCanvas.height);
                hideLoading();
            }, 500);
        }

        function resetImage() {
            if (confirm('Reset all changes?')) {
                originalCtx.drawImage(originalImage, 0, 0, originalCanvas.width, originalCanvas.height);
                currentImage = originalCtx.getImageData(0, 0, originalCanvas.width, originalCanvas.height);
                updatePreview();
                document.getElementById('sliderPanel').classList.remove('active');
                currentTool = null;
            }
        }

        // Border Adjustment
        function toggleBorderAdjust() {
            borderAdjustMode = !borderAdjustMode;
            const handles = document.querySelectorAll('.border-handle');
            const grid = document.getElementById('gridOverlay');
            const btn = document.getElementById('borderAdjustBtn');

            if (borderAdjustMode) {
                handles.forEach(h => h.classList.add('active'));
                grid.classList.add('active');
                btn.classList.add('active');
                positionHandles();
            } else {
                handles.forEach(h => h.classList.remove('active'));
                grid.classList.remove('active');
                btn.classList.remove('active');
            }
        }

        function positionHandles() {
            const rect = previewCanvas.getBoundingClientRect();
            const wrapper = document.getElementById('previewWrapper');
            const wrapperRect = wrapper.getBoundingClientRect();

            const handles = {
                'top-left': { top: 0, left: 0 },
                'top': { top: 0, left: '50%' },
                'top-right': { top: 0, right: 0 },
                'left': { top: '50%', left: 0 },
                'right': { top: '50%', right: 0 },
                'bottom-left': { bottom: 0, left: 0 },
                'bottom': { bottom: 0, left: '50%' },
                'bottom-right': { bottom: 0, right: 0 }
            };

            Object.keys(handles).forEach(key => {
                const handle = document.querySelector(`[data-handle="${key}"]`);
                const pos = handles[key];
                Object.keys(pos).forEach(prop => {
                    handle.style[prop] = typeof pos[prop] === 'number' ? pos[prop] + 'px' : pos[prop];
                });
            });
        }

        function startDrag(e) {
            if (!borderAdjustMode) return;
            draggedHandle = e.target;
            e.preventDefault();
        }

        function drag(e) {
            if (!draggedHandle) return;
            // Handle dragging logic here
            // This would adjust the border bounds based on which handle is dragged
        }

        function stopDrag() {
            draggedHandle = null;
        }

        // Utility Functions
        function showFullPreview() {
            document.getElementById('fullPreviewImage').src = previewCanvas.toDataURL('image/png');
            document.getElementById('previewModal').classList.add('active');
        }

        function closePreview() {
            document.getElementById('previewModal').classList.remove('active');
        }

        function downloadImage() {
            const link = document.createElement('a');
            link.download = 'repaired-image-' + Date.now() + '.png';
            link.href = previewCanvas.toDataURL('image/png');
            link.click();
        }

        function reupload() {
            if (confirm('Upload new image? Current work will be lost.')) {
                document.getElementById('uploadSection').style.display = 'block';
                document.getElementById('editorContainer').classList.remove('active');
                document.getElementById('fileInput').value = '';
            }
        }

        function compareImages() {
            // Toggle between original and edited
            const currentData = previewCtx.getImageData(0, 0, previewCanvas.width, previewCanvas.height);
            const originalData = originalCtx.getImageData(0, 0, originalCanvas.width, originalCanvas.height);
            
            previewCtx.putImageData(originalData, 0, 0);
            setTimeout(() => previewCtx.putImageData(currentData, 0, 0), 1500);
        }
    </script>
</body>
</html>
