<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Test Donation API - EasyJpgToPdf</title>
<link href="css/footer.css" rel="stylesheet"/>
<link href="css/header.css" rel="stylesheet"/><style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 5px;
        }
        button {
            background: #007bff;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            background: #0056b3;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            background: #e9ecef;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 400px;
            overflow-y: auto;
        }
        .success {
            background: #d4edda;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        input {
            padding: 10px;
            margin: 5px 0;
            width: 200px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Test Donation API - EasyJpgToPdf",
      "description": "Online PDF and image conversion tools",
      "url": "https://easyjpgtopdf.com/test-donation.html",
      "inLanguage": "en-US",
      "isPartOf": {
        "@type": "WebSite",
        "name": "easyjpgtopdf",
        "url": "https://easyjpgtopdf.com"
      },
      "publisher": {
        "@type": "Organization",
        "name": "easyjpgtopdf",
        "url": "https://easyjpgtopdf.com"
      }
    }
    </script>
</head>
<body>
<header>
        <div class="container">
            <nav class="navbar">
                <a href="index.html" class="logo"><img src="images/logo.png" alt="Logo" style="height:54px;"></a>
                <div class="nav-links">
                    <div class="dropdown">
                        <a href="#">Convert to PDF <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="jpg-to-pdf.html">JPG to PDF</a>
                            <a href="word-to-pdf.html">Word to PDF</a>
                            <a href="excel-to-pdf.html">Excel to PDF</a>
                            <a href="ppt-to-pdf.html">PowerPoint to PDF</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Convert from PDF <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="pdf-to-jpg.html">PDF to JPG</a>
                            <a href="pdf-to-word.html">PDF to Word</a>
                            <a href="pdf-to-excel.html">PDF to Excel</a>
                            <a href="pdf-to-ppt.html">PDF to PowerPoint</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Pdf Editor <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="merge-pdf.html">Merge PDF</a>
                            <a href="split-pdf.html">Split PDF</a>
                            <a href="compress-pdf.html">Compress PDF</a>
                            <a href="edit-pdf.html">Pdf Editor</a>
                            <a href="protect-pdf.html">Protect PDF</a>
                            <a href="unlock-pdf.html">Unlock PDF</a>
                            <a href="watermark-pdf.html">Watermark PDF</a>
                            <a href="crop-pdf.html">Crop PDF</a>
                            <a href="add-page-numbers.html">Add Page Numbers</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Image Tools <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="image-repair.html">AI Image Repair</a>
                            <a href="image-compressor.html">Image Compressor</a>
                            <a href="image-resizer.html">Image Resizer</a>
                            <a href="image-editor.html">Image Editor</a>
                            <a href="background-remover.html">Image Background Remover</a>
                            <a href="ocr-image.html">OCR Image</a>
                            <a href="image-watermark.html">Image Watermark Tool</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Other Tools <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="resume-maker.html">Resume Maker</a>
                            <a href="biodata-maker.html">Marrige Biodata-Data Maker</a>
                            <a href="ai-image-generator.html">AI Image Generator</a>
                            <a href="marriage-card.html">Marriage Card</a>
                            <a href="excel-unlocker/" target="_blank">Excel Unlocker</a>
                            <a href="protect-excel.html">Protect Excel Sheet</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">More <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="pricing.html">Pricing</a>
                            <a href="blog.html">Blog/Articles</a>
                            
                            
                        </div>
                    </div>
                </div>
                <div class="auth-buttons">
                    <a href="login.html" class="auth-link">Sign In</a>
                    <a href="signup.html" class="auth-btn"><i class="fas fa-user-plus" aria-hidden="true"></i><span>Signup</span></a>
                </div>
                <div id="user-menu" class="user-menu" data-open="false">
                    <button id="user-menu-toggle" class="user-menu-toggle" type="button" aria-haspopup="true" aria-expanded="false" aria-label="Account menu">
                        <span class="user-initial" aria-hidden="true">U</span>
                        <i class="fas fa-chevron-down" aria-hidden="true"></i>
                    </button>
                    <div class="user-dropdown" id="user-dropdown" hidden>
                        <a href="dashboard.html#dashboard-overview" data-user-nav="dashboard-overview"><i class="fas fa-user-circle"></i> Account Dashboard</a>
                        <a href="dashboard.html#dashboard-billing" data-user-nav="dashboard-billing"><i class="fas fa-file-invoice"></i> Billing Details</a>
                        <a href="dashboard.html#dashboard-payments" data-user-nav="dashboard-payments"><i class="fas fa-wallet"></i> Payment History</a>
                        <a href="dashboard.html#dashboard-orders" data-user-nav="dashboard-orders"><i class="fas fa-clipboard-list"></i> Orders &amp; Subscriptions</a>
                        <a href="accounts.html#login"><i class="fas fa-user-cog"></i> Account Center</a>
                        <button type="button" id="logout-button" class="dropdown-logout"><i class="fas fa-sign-out-alt"></i> Sign out</button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <nav aria-label="Breadcrumb" style="padding: 15px 0; background: #f8f9ff; border-bottom: 1px solid #e2e6ff;">
        <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 24px;">
            <ol style="list-style: none; display: flex; flex-wrap: wrap; gap: 10px; margin: 0; padding: 0; align-items: center;">
                <li><a href="index.html" style="color: #4361ee; text-decoration: none; font-weight: 500;">Home</a> <span style="margin: 0 8px; color: #9ca3af;">/</span></li>
                <li style="color: #56607a; font-weight: 500;">Test Donation</li>
            </ol>
        </div>
    </nav>

<div class="container">
<h1>ðŸ§ª Donation API Test Page</h1>
<div class="info">
<strong>API Base URL:</strong> <span id="api-base-url">Loading...</span><br/>
<strong>Test Endpoint:</strong> <span id="test-endpoint">Loading...</span>
</div>
<div class="test-section">
<h2>Test 1: Check API Endpoint</h2>
<p>This will verify that the API endpoint is accessible</p>
<button onclick="testEndpointAccess()">Test API Access</button>
<div class="result" id="result1" style="display:none;"></div>
</div>
<div class="test-section">
<h2>Test 2: Create Test Order</h2>
<p>This will attempt to create a Razorpay order</p>
<div>
<label>Amount (INR): <input id="test-amount" min="1" type="number" value="100"/></label><br/>
<label>Name: <input id="test-name" type="text" value="Test User"/></label><br/>
<label>Email: <input id="test-email" type="email" value="test@example.com"/></label>
</div>
<button onclick="testCreateOrder()">Create Test Order</button>
<div class="result" id="result2" style="display:none;"></div>
</div>
<div class="test-section">
<h2>Test 3: Full Donation Flow</h2>
<p>This will test the complete donation flow with Razorpay checkout</p>
<button onclick="testFullDonation()">Test Full Flow</button>
<div class="result" id="result3" style="display:none;"></div>
</div>
</div>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
        // Get API base URL
        const API_BASE_URL = window.location.origin;
        const CREATE_ORDER_URL = `${API_BASE_URL}/api/create-order`;

        // Display URLs
        document.getElementById('api-base-url').textContent = API_BASE_URL;
        document.getElementById('test-endpoint').textContent = CREATE_ORDER_URL;

        function showResult(resultId, message, type = 'info') {
            const resultEl = document.getElementById(resultId);
            resultEl.style.display = 'block';
            resultEl.className = `result ${type}`;
            resultEl.textContent = message;
        }

        async function testEndpointAccess() {
            showResult('result1', 'Testing API endpoint access...', 'info');
            
            try {
                const response = await fetch(CREATE_ORDER_URL, {
                    method: 'OPTIONS',
                    headers: {
                        'Origin': window.location.origin
                    }
                });
                
                const message = `âœ… API Endpoint Accessible!\n\nStatus: ${response.status}\nHeaders:\n${JSON.stringify(Object.fromEntries(response.headers), null, 2)}`;
                showResult('result1', message, 'success');
            } catch (error) {
                const message = `âŒ API Endpoint NOT Accessible\n\nError: ${error.message}\n\nThis means the API is not deployed or not reachable.`;
                showResult('result1', message, 'error');
            }
        }

        async function testCreateOrder() {
            showResult('result2', 'Creating test order...', 'info');
            
            try {
                const amount = document.getElementById('test-amount').value;
                const name = document.getElementById('test-name').value;
                const email = document.getElementById('test-email').value;

                const response = await fetch(CREATE_ORDER_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        amount: parseInt(amount),
                        name: name,
                        email: email,
                        firebaseUid: 'test_user_123',
                        currency: 'INR'
                    })
                });

                const data = await response.json();

                if (response.ok) {
                    const message = `âœ… Order Created Successfully!\n\n${JSON.stringify(data, null, 2)}`;
                    showResult('result2', message, 'success');
                } else {
                    const message = `âŒ Order Creation Failed\n\nStatus: ${response.status}\nResponse:\n${JSON.stringify(data, null, 2)}`;
                    showResult('result2', message, 'error');
                }
            } catch (error) {
                const message = `âŒ Request Failed\n\nError: ${error.message}\n\nCheck console for details.`;
                showResult('result2', message, 'error');
                console.error('Test order error:', error);
            }
        }

        async function testFullDonation() {
            showResult('result3', 'Testing full donation flow...', 'info');
            
            try {
                // Step 1: Create order
                const amount = 100;
                const response = await fetch(CREATE_ORDER_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        amount: amount,
                        name: 'Test User',
                        email: 'test@example.com',
                        firebaseUid: 'test_user_123',
                        currency: 'INR'
                    })
                });

                const data = await response.json();

                if (!response.ok) {
                    throw new Error(`Order creation failed: ${JSON.stringify(data)}`);
                }

                showResult('result3', `âœ… Order created! Opening Razorpay checkout...\n\nOrder ID: ${data.id}\nAmount: â‚¹${amount}`, 'success');

                // Step 2: Open Razorpay checkout
                const options = {
                    key: data.key,
                    amount: data.amountInPaise,
                    currency: data.currency,
                    name: 'EasyJpgToPdf',
                    description: 'Test Donation',
                    order_id: data.id,
                    handler: function(response) {
                        const message = `âœ… Payment Successful!\n\nPayment ID: ${response.razorpay_payment_id}\nOrder ID: ${response.razorpay_order_id}\nSignature: ${response.razorpay_signature}`;
                        showResult('result3', message, 'success');
                    },
                    modal: {
                        ondismiss: function() {
                            showResult('result3', 'âš ï¸ Payment cancelled by user', 'error');
                        }
                    },
                    prefill: {
                        name: 'Test User',
                        email: 'test@example.com'
                    },
                    theme: {
                        color: '#007bff'
                    }
                };

                const rzp = new Razorpay(options);
                rzp.open();
            } catch (error) {
                const message = `âŒ Full flow test failed\n\nError: ${error.message}\n\nCheck console for details.`;
                showResult('result3', message, 'error');
                console.error('Full flow error:', error);
            }
        }

        // Auto-test on load
        window.addEventListener('load', () => {
            console.log('Test page loaded');
            console.log('API Base URL:', API_BASE_URL);
            console.log('Create Order URL:', CREATE_ORDER_URL);
        });
    </script>
    
<script src="js/auth.js"></script>

    
    <div class="trust-badges" style="text-align: center; padding: 20px; background: linear-gradient(135deg, #f8f9ff, #ffffff); border-radius: 12px; margin: 30px 0; border: 2px solid #e2e6ff;">
        <div style="display: flex; justify-content: center; align-items: center; gap: 40px; flex-wrap: wrap;">
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-shield-alt" style="font-size: 2rem; color: #4361ee;"></i>
                <div style="text-align: left;">
                    <div style="color: #0b1630; font-weight: 600; font-size: 1.1rem;">SSL Secured</div>
                    <div style="color: #56607a; font-size: 0.9rem;">256-bit Encryption</div>
                </div>
            </div>
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-lock" style="font-size: 2rem; color: #4361ee;"></i>
                <div style="text-align: left;">
                    <div style="color: #0b1630; font-weight: 600; font-size: 1.1rem;">100% Secure</div>
                    <div style="color: #56607a; font-size: 0.9rem;">Files Auto-Deleted</div>
                </div>
            </div>
            
        </div>
    </div>
<footer>
        <div class="container footer-inner">
            <div class="footer-company-links">
                <span>Company</span>
                <a href="index.html#about">About Us</a>
                <a href="index.html#contact">Contact</a>
                <a href="pricing.html">Pricing</a>
                <a href="privacy-policy.html">Privacy Policy</a>
                <a href="terms-of-service.html">Terms of Service</a>
                <a href="dmca-en.html">DMCA</a>
                <a href="blog.html">Blog</a>
            </div>
            <p class="footer-brand-line">&copy; easyjpgtopdf &mdash; Free PDF &amp; Image Tools for everyone. All rights reserved.</p>
            <p class="footer-credits">
                Thanks to Font Awesome, Google Fonts, jsPDF, pdf.js, pdf-lib, Mammoth, Tesseract.js, IMG.LY, Firebase, Unsplash photographers, and every open-source contributor powering this site.
                <a href="attributions.html">See full acknowledgements</a>.
            </p>
        </div>
    </footer>
</body>
</html>
