<!DOCTYPE html>

<html dir="ltr" lang="hi">
<head>
<meta charset="utf-8"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Dashboard - Online Free Tool | easyjpgtopdf</title>
    <meta name="description" content="Use our free Dashboard tool online. Fast, secure, and easy to use.">
    <meta name="keywords" content="dashboard, dashboard, free dashboard, online dashboard">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://easyjpgtopdf.com/dashboard.html">
<link href="css/footer.css" rel="stylesheet"/>
<!-- Fonts -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Hind:wght@400;500;600;700&amp;family=Poppins:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<!-- CSS -->
<link href="css/fonts.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #4cc9f0;
            --light: #f5f7ff;
            --dark: #1f1f2e;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --surface: #ffffff;
            --border: rgba(67, 97, 238, 0.12);
            --bg-primary: #f5f7ff;
            --bg-secondary: #ffffff;
            --text-primary: #1f1f2e;
            --text-secondary: #6c757d;
        }
        
        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2b2b2b;
            --text-primary: #e5e5e5;
            --text-secondary: #9ca3af;
            --light: #1a1a1a;
            --dark: #e5e5e5;
            --surface: #2b2b2b;
            --border: rgba(255, 255, 255, 0.1);
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Hind', 'Poppins', 'Arial Unicode MS', 'Nirmala UI', 'Mangal', 'Arial', sans-serif;
            background: linear-gradient(180deg, rgba(67, 97, 238, 0.08), rgba(67, 97, 238, 0.02));
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background 0.3s, color 0.3s;
        }

        header {
            background: var(--bg-secondary);
            box-shadow: 0 2px 12px rgba(15, 23, 42, 0.08);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: background 0.3s;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 24px;
            padding: 16px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .logo img {
            height: 54px;
        }

        .nav-links {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            position: relative;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--primary);
        }

        .dropdown {
            position: relative;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            min-width: 220px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 12px 24px rgba(15, 23, 42, 0.12);
            padding: 10px 0;
            z-index: 50;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown-content a {
            display: block;
            padding: 10px 18px;
            color: var(--dark);
            text-decoration: none;
        }

        .dropdown-content a:hover {
            background: rgba(67, 97, 238, 0.08);
        }

        .auth-buttons {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .auth-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            border-radius: 999px;
            border: 1px solid rgba(67, 97, 238, 0.28);
            color: var(--primary);
            font-weight: 600;
            text-decoration: none;
            transition: background 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
        }

        .auth-link:hover {
            background: rgba(67, 97, 238, 0.1);
            color: var(--secondary);
            box-shadow: 0 8px 20px rgba(67, 97, 238, 0.22);
        }

        .auth-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 999px;
            border: none;
            background: linear-gradient(135deg, #ff6b6b, #f06595);
            color: #fff;
            font-weight: 600;
            text-decoration: none;
            box-shadow: 0 12px 28px rgba(240, 101, 149, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .auth-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 32px rgba(240, 101, 149, 0.35);
        }

        .user-menu {
            display: none;
            align-items: center;
            position: relative;
        }

        .user-menu-toggle {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 16px;
            border-radius: 999px;
            border: 1px solid rgba(67, 97, 238, 0.22);
            background: white;
            color: var(--dark);
            font-weight: 600;
            cursor: pointer;
            transition: box-shadow 0.2s ease, border-color 0.2s ease;
        }

        .user-menu[data-open="true"] .user-menu-toggle,
        .user-menu-toggle:hover {
            border-color: rgba(67, 97, 238, 0.42);
            box-shadow: 0 12px 28px rgba(67, 97, 238, 0.15);
        }

        .user-menu-toggle i {
            transition: transform 0.2s ease;
        }

        .user-menu[data-open="true"] .user-menu-toggle i {
            transform: rotate(180deg);
        }

        .user-initial {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: #fff;
            font-weight: 700;
            font-size: 0.95rem;
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(67, 97, 238, 0.15);
            min-width: 240px;
            display: none;
            flex-direction: column;
            padding: 12px 0;
            margin-top: 8px;
            z-index: 1000;
            border: 1px solid rgba(67, 97, 238, 0.1);
            transition: all 0.2s ease;
            overflow: hidden;
        }

        .user-menu:hover .user-dropdown,
        .user-menu[data-open="true"] .user-dropdown {
            display: flex;
            animation: fadeIn 0.15s ease-out forwards;
        }

        .user-dropdown a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            color: var(--dark);
            text-decoration: none;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }

        .user-dropdown a:hover {
            background-color: rgba(67, 97, 238, 0.08);
            color: var(--primary);
            border-left-color: var(--primary);
            padding-left: 24px;
        }

        .user-dropdown a i {
            width: 20px;
            text-align: center;
            color: var(--primary);
        }

        .user-dropdown button {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: transparent;
            border: none;
            width: 100%;
            text-align: left;
            color: var(--dark);
            font-weight: 500;
            font-size: 0.95rem;
            text-decoration: none;
            cursor: pointer;
            transition: background 0.2s ease, color 0.2s ease, padding-left 0.2s ease;
        }

        .user-dropdown button:hover {
            background: rgba(67, 97, 238, 0.08);
            color: var(--primary);
            padding-left: 24px;
        }

        .dropdown-logout {
            color: #c92a2a;
        }

        .dropdown-logout:hover {
            background: rgba(201, 42, 42, 0.12);
            color: #c92a2a;
        }

        main {
            flex: 1;
            width: 100%;
            padding: 40px 0 70px;
        }

        .dashboard-shell {
            display: flex;
            align-items: flex-start;
            gap: 32px;
        }

        .dashboard-sidebar {
            flex: 0 0 260px;
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 14px 36px rgba(15, 23, 42, 0.1);
            padding: 24px 20px;
            position: sticky;
            top: 110px;
        }

        .sidebar-profile {
            text-align: center;
            margin-bottom: 24px;
        }

        .sidebar-avatar {
            width: 74px;
            height: 74px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: #fff;
            font-weight: 700;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 14px;
        }

        .sidebar-name {
            font-weight: 600;
            color: var(--dark);
        }

        .sidebar-email {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .dashboard-nav {
            display: grid;
            gap: 6px;
        }

        .dashboard-nav h4 {
            font-size: 0.85rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            color: var(--gray);
            margin: 16px 0 8px;
        }

        .dashboard-nav button {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            border: none;
            border-radius: 12px;
            background: transparent;
            color: var(--dark);
            font-weight: 500;
            font-size: 0.95rem;
            cursor: pointer;
            transition: background 0.2s ease, color 0.2s ease, padding-left 0.2s ease;
        }

        .dashboard-nav button i {
            color: var(--primary);
        }

        .dashboard-nav button.active,
        .dashboard-nav button:hover {
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
            padding-left: 16px;
        }

        .dashboard-content {
            flex: 1;
            display: grid;
            gap: 24px;
        }

        .dashboard-panel {
            display: none;
            gap: 24px;
        }

        .dashboard-panel.active {
            display: grid;
        }

        .dashboard-card {
            background: #fff;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 12px 28px rgba(15, 23, 42, 0.08);
            border: 1px solid rgba(67, 97, 238, 0.08);
        }

        .dashboard-card h3 {
            margin: 0 0 12px;
            font-size: 1.2rem;
            color: var(--secondary);
        }

        .dashboard-card p {
            margin: 6px 0;
            color: var(--gray);
        }

        .dashboard-subtext {
            color: var(--gray);
            margin-bottom: 16px;
            font-size: 0.95rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 20px;
        }

        .notification-list,
        .payment-list,
        .usage-list,
        .order-list,
        .cancellation-list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: grid;
            gap: 12px;
        }

        .notification-item,
        .order-item,
        .cancellation-item,
        .payment-list li,
        .usage-list li {
            padding: 12px 14px;
            border-radius: 12px;
            border: 1px solid rgba(67, 97, 238, 0.15);
            background: rgba(67, 97, 238, 0.05);
            color: var(--dark);
        }

        .notification-item {
            display: flex;
            gap: 12px;
        }

        .notification-item i {
            color: var(--primary);
            margin-top: 4px;
        }

        .inline-link-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            border-radius: 999px;
            border: 1px solid rgba(67, 97, 238, 0.28);
            background: #fff;
            color: var(--primary);
            font-weight: 600;
            text-decoration: none;
            margin-top: 12px;
        }

        .inline-link-btn:hover {
            background: rgba(67, 97, 238, 0.1);
        }

        .billing-form {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .billing-form .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
        }

        .form-field {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .form-field label {
            font-weight: 600;
            color: var(--secondary);
        }

        .form-field input,
        .form-field textarea {
            border: 1px solid var(--light-gray);
            border-radius: 10px;
            padding: 10px 12px;
            font-size: 0.95rem;
            background: #fff;
            transition: border-color 0.2s ease;
        }

        .form-field input:focus,
        .form-field textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.12);
        }

        .form-field textarea {
            resize: vertical;
            min-height: 90px;
        }

        .form-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .form-feedback {
            font-size: 0.9rem;
            color: var(--primary);
        }

        .dashboard-hero {
            margin-bottom: 28px;
        }

        .dashboard-hero h1 {
            margin: 0;
            font-size: 2rem;
            color: var(--secondary);
        }

        .dashboard-hero p {
            margin: 8px 0 0;
            color: var(--gray);
            max-width: 640px;
        }

        .guest-callout {
            display: none;
            background: #fff;
            padding: 24px;
            border-radius: 16px;
            border: 1px dashed rgba(67, 97, 238, 0.25);
            box-shadow: 0 10px 26px rgba(15, 23, 42, 0.08);
            text-align: center;
            gap: 16px;
        }

        .guest-callout h3 {
            margin: 0 0 8px;
        }

        @media (max-width: 1024px) {
            .dashboard-shell {
                flex-direction: column;
            }

            .dashboard-sidebar {
                position: static;
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                flex-wrap: wrap;
                gap: 16px;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }

            .dashboard-nav {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .dashboard-nav h4 {
                grid-column: 1 / -1;
            }
        }
        
        /* Subscription Management Styles */
        .subscription-status {
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }
        
        .subscription-plan-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .subscription-plan-badge #plan-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .plan-status-badge {
            padding: 4px 12px;
            border-radius: 999px;
            font-size: 0.875rem;
            font-weight: 600;
            background: #4bb543;
            color: white;
        }
        
        .plan-status-badge.expired {
            background: #dc3545;
        }
        
        .plan-status-badge.trial {
            background: #ff9800;
        }
        
        .subscription-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }
        
        .subscription-details p {
            margin: 0;
            color: var(--text-secondary);
        }
        
        .subscription-details strong {
            color: var(--text-primary);
        }
        
        .usage-tracking-section {
            margin: 32px 0;
        }
        
        .usage-tracking-section h4 {
            margin-bottom: 20px;
            color: var(--text-primary);
        }
        
        .usage-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .usage-stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
        }
        
        .usage-stat-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
        
        .usage-stat-header i {
            color: var(--primary);
        }
        
        .usage-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
        }
        
        .usage-progress-bar {
            width: 100%;
            height: 8px;
            background: var(--light-gray);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .usage-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.3s;
        }
        
        .usage-progress-fill.warning {
            background: linear-gradient(90deg, #ff9800, #f57c00);
        }
        
        .usage-progress-fill.danger {
            background: linear-gradient(90deg, #dc3545, #c82333);
        }
        
        .usage-charts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .usage-chart-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
        }
        
        .usage-chart-card h5 {
            margin: 0 0 16px 0;
            color: var(--text-primary);
        }
        
        .subscription-actions {
            margin: 32px 0;
            padding: 24px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
        }
        
        .subscription-actions h4 {
            margin-bottom: 16px;
            color: var(--text-primary);
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .subscription-alerts {
            margin-top: 24px;
        }
        
        .alert {
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .alert.warning {
            background: rgba(255, 152, 0, 0.1);
            border: 1px solid #ff9800;
            color: #f57c00;
        }
        
        .alert.danger {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid #dc3545;
            color: #c82333;
        }
        
        .alert.info {
            background: rgba(67, 97, 238, 0.1);
            border: 1px solid var(--primary);
            color: var(--primary);
        }
        
        .theme-toggle-btn:hover {
            background: rgba(67, 97, 238, 0.1);
            border-color: rgba(67, 97, 238, 0.42);
        }
        
        [data-theme="dark"] .theme-toggle-btn {
            background: #2b2b2b;
            border-color: #3a3a3a;
            color: #e5e5e5;
        }
        
        [data-theme="dark"] .theme-toggle-btn:hover {
            background: #3a3a3a;
            border-color: #4a4a4a;
        }
    </style>
<link href="css/header.css" rel="stylesheet"/>
<link href="css/theme-modern.css" rel="stylesheet"/>
<link href="css/voice-assistant.css" rel="stylesheet"/>
<script src="js/voice-assistant.js" defer></script>
                <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Dashboard - Online Free Tool | easyjpgtopdf",
      "description": "Use our free Dashboard tool online. Fast, secure, and easy to use.",
      "url": "https://easyjpgtopdf.com/dashboard.html",
      "inLanguage": "en-US",
      "isPartOf": {
        "@type": "WebSite",
        "name": "easyjpgtopdf",
        "url": "https://easyjpgtopdf.com"
      },
      "publisher": {
        "@type": "Organization",
        "name": "easyjpgtopdf",
        "url": "https://easyjpgtopdf.com"
      }
    }
    </script>
</head>
<body>
    <div id="global-header-placeholder"></div>


        <nav aria-label="Breadcrumb" style="padding: 15px 0; background: #f8f9ff; border-bottom: 1px solid #e2e6ff;">
        <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 24px;">
            <ol style="list-style: none; display: flex; flex-wrap: wrap; gap: 10px; margin: 0; padding: 0; align-items: center;">
                <li><a href="index.html" style="color: #4361ee; text-decoration: none; font-weight: 500; transition: color 0.3s;" onmouseover="this.style.color='#3a0ca3'" onmouseout="this.style.color='#4361ee'">Home</a></li>
                <li><span style="margin: 0 8px; color: #9ca3af;">|</span></li>
                <li><a href="login.html" style="color: #56607a; font-weight: 500; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#4361ee'" onmouseout="this.style.color='#56607a'">Sign In</a></li>
                <li><span style="margin: 0 8px; color: #9ca3af;">|</span></li>
                <li><a href="signup.html" style="color: #56607a; font-weight: 500; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#4361ee'" onmouseout="this.style.color='#56607a'">Signup</a></li>
            </ol>
        </div>
    </nav>

<main>
<div class="container">
<div class="dashboard-hero">
<h1>Dashboard - Online Free Tool</h1>
<p>Manage your account, billing preferences, payment history, and support requests from a single, streamlined dashboard.</p>
</div>
<div class="guest-callout" id="dashboard-guest">
<h3>You are not signed in</h3>
<p>Please sign in to access your dashboard and personalized tools.</p>
<div style="display: flex; justify-content: center; gap: 12px; flex-wrap: wrap;">
<a class="auth-link" href="login.html">Sign In</a>
<a class="auth-btn" href="signup.html">Create Account</a>
</div>
</div>
<section class="user-dashboard" id="user-dashboard" style="display: none;">
<div class="dashboard-shell">
<aside class="dashboard-sidebar">
<div class="sidebar-profile">
<div class="sidebar-avatar sidebar-user-initial">U</div>
<div class="sidebar-name user-name">-</div>
<div class="sidebar-email user-email">Ã¢â‚¬â€</div>
</div>
<nav aria-label="Account navigation" class="dashboard-nav">
<h4>Profile</h4>
<button class="dashboard-nav-btn active" data-dashboard-target="dashboard-overview" type="button">
<i aria-hidden="true" class="fas fa-th-large"></i>
                                Account Overview
                            </button>
<button class="dashboard-nav-btn" data-dashboard-target="dashboard-billing" type="button">
<i aria-hidden="true" class="fas fa-file-invoice"></i>
                                Billing Details
                            </button>
<button class="dashboard-nav-btn" data-dashboard-target="dashboard-donation" type="button">
<i aria-hidden="true" class="fas fa-heart"></i>
                                Make a Donation
                            </button>
<button class="dashboard-nav-btn" data-dashboard-target="dashboard-payments" type="button">
<i aria-hidden="true" class="fas fa-wallet"></i>
                                Payment History
                            </button>
<button class="dashboard-nav-btn" data-dashboard-target="dashboard-orders" type="button">
<i aria-hidden="true" class="fas fa-clipboard-list"></i>
                                Orders &amp; Subscriptions
                            </button>
<button class="dashboard-nav-btn" data-dashboard-target="dashboard-credits" type="button">
<i aria-hidden="true" class="fas fa-coins"></i>
                                Credit Points
                            </button>
<h4>Support</h4>
<button class="dashboard-nav-btn" data-dashboard-target="dashboard-support" type="button">
<i aria-hidden="true" class="fas fa-life-ring"></i>
                                Support &amp; Notifications
                            </button>
<h4>Account</h4>
<button class="dashboard-nav-btn" id="dashboard-signout-btn" type="button" style="color: #dc2626;">
<i aria-hidden="true" class="fas fa-sign-out-alt"></i>
                                Sign Out
                            </button>
</nav>
</aside>
<div class="dashboard-content">
<div class="dashboard-panel active" id="dashboard-overview">
<div class="dashboard-card">
<h3>Profile Overview</h3>
<p><strong>नाम:</strong> <span class="user-name">-</span></p>
<p><strong>Email:</strong> <span class="user-email">Ã¢â‚¬â€</span></p>
<p><strong>Plan:</strong> <span class="user-plan">Free</span></p>
<p><strong>Total Conversions:</strong> <span class="user-conversions">0</span></p>
<p><strong>Credit Balance:</strong> <span class="user-credits" style="font-size: 1.2rem; font-weight: 700; color: var(--primary);">0</span> credits</p>
<p><strong>Billing Address:</strong> <span class="user-billing-address">Not added yet.</span></p>
</div>
<div class="dashboard-card" id="credit-card" style="background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%); color: white; border: none;">
<h3 style="color: white; margin-bottom: 16px;">
<i class="fas fa-coins"></i> Credit Points
</h3>
<div style="display: flex; align-items: baseline; gap: 12px; margin-bottom: 20px;">
<span id="credit-balance-display" style="font-size: 2.5rem; font-weight: 700;">0</span>
<span style="font-size: 1.2rem; opacity: 0.9;">credits</span>
</div>
<p style="margin: 8px 0; opacity: 0.9; font-size: 0.9rem;">
<i class="fas fa-info-circle"></i> 1 credit = 1 HD background removal
</p>
<a href="pricing.html#credit-packs" class="btn" style="background: white; color: #4361ee; margin-top: 16px; display: inline-block; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: 600; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
<i class="fas fa-shopping-cart"></i> Buy Credits
</a>
</div>
<div class="dashboard-card">
<h3>Recent Tool Usage</h3>
<ul class="usage-list">
<li>No activity recorded yet.</li>
</ul>
</div>
</div>
<div class="dashboard-panel" id="dashboard-billing">
<div class="dashboard-card" id="billing-card">
<h3>Billing Address</h3>
<p class="dashboard-subtext">Provide your address for invoices and compliance. This information remains confidential.</p>
<form class="billing-form" id="billing-form">
<div class="form-grid">
<div class="form-field">
<label for="billing-name">Full Name</label>
<input id="billing-name" name="billing-name" placeholder="Enter full legal name" type="text"/>
</div>
<div class="form-field">
<label for="billing-phone">Phone (optional)</label>
<input id="billing-phone" name="billing-phone" placeholder="e.g. +91-9876543210" type="tel"/>
</div>
<div class="form-field">
<label for="billing-line1">Address Line 1</label>
<input id="billing-line1" name="billing-line1" placeholder="House / Street" type="text"/>
</div>
<div class="form-field">
<label for="billing-line2">Address Line 2</label>
<input id="billing-line2" name="billing-line2" placeholder="Area / Landmark (optional)" type="text"/>
</div>
<div class="form-field">
<label for="billing-city">City</label>
<input id="billing-city" name="billing-city" placeholder="City" type="text"/>
</div>
<div class="form-field">
<label for="billing-state">State</label>
<input id="billing-state" name="billing-state" placeholder="State / Province" type="text"/>
</div>
<div class="form-field">
<label for="billing-postal">Postal Code</label>
<input id="billing-postal" name="billing-postal" placeholder="PIN / ZIP" type="text"/>
</div>
<div class="form-field">
<label for="billing-country">Country</label>
<input id="billing-country" name="billing-country" placeholder="Country" type="text" value="India"/>
</div>
</div>
<div class="form-field">
<label for="billing-notes">Additional Notes (optional)</label>
<textarea id="billing-notes" name="billing-notes" placeholder="Apartment, floor, GSTIN or anything we should mention on invoices."></textarea>
</div>
<div class="form-actions">
<button class="btn btn-primary" id="billing-save-button" type="submit">Save Address</button>
<p class="form-feedback" hidden="" id="billing-message"></p>
</div>
</form>
</div>
</div>
<div class="dashboard-panel" id="dashboard-donation">
<div class="dashboard-card">
<h3><i class="fas fa-heart"></i> Support easyjpgtopdf</h3>
<p style="color: #6c757d; margin: 12px 0;">Your donation helps us maintain free PDF and image tools for everyone.</p>
<a class="inline-link-btn" href="index.html#donation-section" style="background: linear-gradient(135deg, #4361ee, #f72585); color: white; display: inline-block; padding: 10px 20px; border-radius: 6px; text-decoration: none;" title="Opens donation form with Razorpay payment">
<i class="fas fa-heart"></i> Make a Donation
                                </a>
<p style="color: #999; font-size: 0.85rem; margin-top: 10px;">
<i class="fas fa-info-circle"></i> You'll be redirected to the donation page where you can choose your amount and proceed with secure Razorpay payment.
                                </p>
</div>
</div>
<div class="dashboard-panel" id="dashboard-payments">
<div class="dashboard-card" id="payment-card">
<h3>Payment History</h3>
<ul class="payment-list">
<li>No payments found yet.</li>
</ul>
</div>
</div>
<div class="dashboard-panel" id="dashboard-credits">
<div class="dashboard-card" id="credit-balance-card" style="background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%); color: white; border: none;">
<h3 style="color: white; margin-bottom: 16px;">
<i class="fas fa-coins"></i> Credit Points Balance
</h3>
<div style="display: flex; align-items: baseline; gap: 12px; margin-bottom: 20px;">
<span id="credit-balance-display-main" style="font-size: 2.5rem; font-weight: 700;">0</span>
<span style="font-size: 1.2rem; opacity: 0.9;">credits</span>
</div>
<div style="margin-top: 16px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
<div>
<p style="margin: 0; opacity: 0.9; font-size: 0.9rem;">Expires At</p>
<p style="margin: 4px 0 0; font-size: 1.1rem; font-weight: 600;" id="credit-expires-at">Never</p>
</div>
<div>
<p style="margin: 0; opacity: 0.9; font-size: 0.9rem;">Last Used</p>
<p style="margin: 4px 0 0; font-size: 1.1rem; font-weight: 600;" id="credit-last-used">Never</p>
</div>
</div>
<a href="pricing.html" class="btn" style="background: white; color: #4361ee; margin-top: 20px; display: inline-block; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: 600; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
<i class="fas fa-shopping-cart"></i> Buy More Credits
</a>
</div>
<div class="dashboard-card" id="credit-history-card">
<h3>Credit Transaction History</h3>
<div id="credit-transactions-list" style="margin-top: 20px;">
<p style="color: #999; text-align: center; padding: 20px;">Loading credit history...</p>
</div>
</div>
<div class="dashboard-card" id="page-visit-card">
<h3>Page Visit & Tool Usage History</h3>
<div id="page-visits-list" style="margin-top: 20px;">
<p style="color: #999; text-align: center; padding: 20px;">Loading visit history...</p>
</div>
</div>
</div>
<div class="dashboard-panel" id="dashboard-receipts">
<div class="dashboard-card" id="receipts-card">
<h3>Purchase Receipts</h3>
<div id="receipts-list" style="margin-top: 20px;">
<p style="color: #999; text-align: center; padding: 20px;">Loading receipts...</p>
</div>
</div>
</div>
<div class="dashboard-panel" id="dashboard-orders">
<div class="dashboard-card" id="subscription-card">
<h3>Subscription Management</h3>
<div id="subscription-status" class="subscription-status">
<div class="subscription-plan-badge" id="plan-badge">
<span id="plan-name">Free</span>
<span id="plan-status" class="plan-status-badge">Active</span>
</div>
<div class="subscription-details">
<p><strong>Current Plan:</strong> <span id="current-plan">Free</span></p>
<p><strong>Status:</strong> <span id="subscription-status-text">Active</span></p>
<p><strong>Expires At:</strong> <span id="subscription-expires">Never</span></p>
<p><strong>Days Remaining:</strong> <span id="days-remaining">∞</span></p>
</div>
</div>

<div class="usage-tracking-section">
<h4>Usage Tracking</h4>
<div class="usage-stats-grid">
<div class="usage-stat-card">
<div class="usage-stat-header">
<i class="fas fa-file-pdf"></i>
<span>PDFs This Month</span>
</div>
<div class="usage-stat-value">
<span id="pdfs-used">0</span> / <span id="pdfs-limit">10</span>
</div>
<div class="usage-progress-bar">
<div class="usage-progress-fill" id="pdfs-progress" style="width: 0%"></div>
</div>
</div>
<div class="usage-stat-card">
<div class="usage-stat-header">
<i class="fas fa-database"></i>
<span>Storage Used</span>
</div>
<div class="usage-stat-value">
<span id="storage-used">0</span> GB / <span id="storage-limit">1</span> GB
</div>
<div class="usage-progress-bar">
<div class="usage-progress-fill" id="storage-progress" style="width: 0%"></div>
</div>
</div>
<div class="usage-stat-card">
<div class="usage-stat-header">
<i class="fas fa-code"></i>
<span>API Calls This Month</span>
</div>
<div class="usage-stat-value">
<span id="api-used">0</span> / <span id="api-limit">100</span>
</div>
<div class="usage-progress-bar">
<div class="usage-progress-fill" id="api-progress" style="width: 0%"></div>
</div>
</div>
<div class="usage-stat-card">
<div class="usage-stat-header">
<i class="fas fa-image"></i>
<span>Image Background Remover</span>
</div>
<div class="usage-stat-value">
<span id="image-remover-used">0</span> / <span id="image-remover-limit">40</span>
</div>
<div class="usage-progress-bar">
<div class="usage-progress-fill" id="image-remover-progress" style="width: 0%"></div>
</div>
<div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 8px;">
Max file size: <span id="image-remover-max-size">1 MB</span>
</div>
<div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 4px;">
Monthly upload: <span id="image-remover-upload-used">0</span> MB / <span id="image-remover-upload-limit">10</span> MB
</div>
<div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 4px;">
Monthly download: <span id="image-remover-download-used">0</span> MB / <span id="image-remover-download-limit">2</span> MB
</div>
</div>
</div>

<div class="usage-charts">
<div class="usage-chart-card">
<h5>Daily Usage (Last 7 Days)</h5>
<canvas id="daily-usage-chart" width="400" height="200"></canvas>
</div>
<div class="usage-chart-card">
<h5>Monthly Usage (Last 6 Months)</h5>
<canvas id="monthly-usage-chart" width="400" height="200"></canvas>
</div>
</div>
</div>

<div class="subscription-actions">
<h4>Manage Subscription</h4>
<div class="action-buttons">
<a href="pricing.html" class="btn btn-primary">
<i class="fas fa-arrow-up"></i> Upgrade Plan
</a>
<button id="cancel-subscription-btn" class="btn btn-outline" style="display: none;">
<i class="fas fa-times"></i> Cancel Subscription
</button>
<button id="renew-subscription-btn" class="btn btn-outline" style="display: none;">
<i class="fas fa-sync"></i> Renew Subscription
</button>
</div>
</div>

<div class="subscription-alerts" id="subscription-alerts">
<!-- Alerts will be dynamically inserted here -->
</div>
</div>
</div>
<div class="dashboard-panel" id="dashboard-support">
<div class="dashboard-card">
<h3>Cancellation &amp; Support</h3>
<ul class="cancellation-list">
<li class="cancellation-item">
<strong>Pause auto-renewal anytime</strong>
                                        If you upgrade to premium later, visit your plan summary to cancel before the next billing date.
                                    </li>
<li class="cancellation-item">
<strong>Raise refund requests within 7 days</strong>
                                        Email easyjpgtopdf@gmail.com with payment reference and reason for faster resolution.
                                    </li>
</ul>
<a class="inline-link-btn" href="mailto:easyjpgtopdf@gmail.com">
<i class="fas fa-headset"></i>
                                    Contact support desk
                                </a>
</div>
<div class="dashboard-card">
<h3>Help &amp; Notifications</h3>
<ul class="notification-list">
<li class="notification-item">
<i class="fas fa-shield-alt"></i>
<div>
<strong>KYC &amp; Compliance Reminder</strong>
                                            Keep your Razorpay and PayU documents updated. Settlement alerts and compliance notices will appear here after you activate the gateways.
                                        </div>
</li>
<li class="notification-item">
<i class="fas fa-bell"></i>
<div>
<strong>Payment Status Updates</strong>
                                            Successful donations and premium purchases will show up under Payment History within a few minutes of gateway confirmation.
                                        </div>
</li>
<li class="notification-item">
<i class="fas fa-life-ring"></i>
<div>
<strong>Need Assistance?</strong>
                                            Reach our support team within 24 hours for billing disputes or urgent refunds. We reply from easyjpgtopdf@gmail.com.
                                        </div>
</li>
</ul>
<div class="notification-help-links">
<a href="mailto:easyjpgtopdf@gmail.com">
<i class="fas Ã Â¦Â¹Ã Â¦Â¿Ã Â¦Å¡"></i>
                                        Contact Support
                                    </a>
<a href="faq.html">
<i class="fas fa-question-circle"></i>
                                        Browse FAQs
                                    </a>
</div>
</div>
</div>
</div>
</div>
</section>
</div>

    <div class="trust-badges" style="text-align: center; padding: 20px; background: linear-gradient(135deg, #f8f9ff, #ffffff); border-radius: 12px; margin: 30px 0; border: 2px solid #e2e6ff;">
        <div style="display: flex; justify-content: center; align-items: center; gap: 40px; flex-wrap: wrap;">
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-shield-alt" style="font-size: 2rem; color: #4361ee;"></i>
                <div style="text-align: left;">
                    <div style="color: #0b1630; font-weight: 600; font-size: 1.1rem;">SSL Secured</div>
                    <div style="color: #56607a; font-size: 0.9rem;">256-bit Encryption</div>
                </div>
            </div>
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-lock" style="font-size: 2rem; color: #4361ee;"></i>
                <div style="text-align: left;">
                    <div style="color: #0b1630; font-weight: 600; font-size: 1.1rem;">100% Secure</div>
                    <div style="color: #56607a; font-size: 0.9rem;">Files Auto-Deleted</div>
                </div>
            </div>
            
        </div>
    </div>
</main>
<script defer="" src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script src="js/config.js" type="module"></script>
<script src="js/firebase-init.js" type="module"></script>
<script src="js/auth.js" type="module"></script>
<script>
    // Listen for credit updates from background workspace
    window.addEventListener('creditsUpdated', (event) => {
        const credits = event.detail.credits;
        if (typeof credits === 'number') {
            // Update credit display elements
            document.querySelectorAll('.user-credits').forEach(el => {
                el.textContent = credits.toFixed(0);
            });
            
            const creditBalanceDisplay = document.getElementById('credit-balance-display');
            if (creditBalanceDisplay) {
                creditBalanceDisplay.textContent = credits.toFixed(0);
            }
            
            const creditBalanceDisplayMain = document.getElementById('credit-balance-display-main');
            if (creditBalanceDisplayMain) {
                creditBalanceDisplayMain.textContent = credits.toFixed(0);
            }
        }
    });
    
    // Global function to update credit balance (called from background workspace)
    window.updateCreditBalance = function(credits) {
        if (typeof credits === 'number') {
            document.querySelectorAll('.user-credits, #credit-balance-display, #credit-balance-display-main').forEach(el => {
                if (el) {
                    el.textContent = credits.toFixed(0);
                }
            });
        }
    };
</script>
<script type="module">
        import { auth } from './js/firebase-init.js';
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js';
        import { getFirestore, collection, query, where, getDocs, orderBy, doc, getDoc } from 'https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js';

        // Real-time dashboard data updater
        async function updateDashboardData(user) {
            if (!user) return;

            try {
                const firestore = getFirestore();
                
                // Update Profile Overview section
                updateProfileOverview(user, firestore);
                
                // Load and display payment history
                await loadPaymentHistory(user, firestore);
                
                // Load credit transactions
                await loadCreditTransactions(user, firestore);
                
                // Load page visits
                await loadPageVisits(user);
                
                // Load receipts
                await loadReceipts(user, firestore);
                
                // Load user statistics
                await loadUserStatistics(user, firestore);
                
                // Load billing address if exists
                await loadBillingAddress(user, firestore);
                
            } catch (error) {
                console.error('Failed to update dashboard data:', error);
            }
        }

        // Update Profile Overview with real-time data
        async function updateProfileOverview(user, firestore) {
            // Update all user-name elements
            document.querySelectorAll('.user-name').forEach(el => {
                el.textContent = user.displayName || user.email || 'User';
            });
            
            // Update all user-email elements
            document.querySelectorAll('.user-email').forEach(el => {
                el.textContent = user.email || '—';
            });
            
            // Load and update credit balance
            await loadCreditBalance(user, firestore);
            
            // Update user plan will be handled by dashboard-subscription.js
        }
        
        // Load credit balance from API (backend)
        async function loadCreditBalance(user, firestore) {
            try {
                const token = await user.getIdToken();
                const API_BASE_URL = window.location.origin.includes('localhost') 
                    ? 'http://localhost:3000' 
                    : (window.location.origin.includes('easyjpgtopdf.com') 
                        ? 'https://pdf-to-word-converter-iwumaktavq-uc.a.run.app'
                        : window.location.origin);
                
                const response = await fetch(`${API_BASE_URL}/api/credits/balance`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        const credits = data.credits || 0;
                        
                        // Update credit display elements
                        document.querySelectorAll('.user-credits').forEach(el => {
                            el.textContent = credits.toFixed(0);
                        });
                        
                        const creditBalanceDisplay = document.getElementById('credit-balance-display');
                        if (creditBalanceDisplay) {
                            creditBalanceDisplay.textContent = credits.toFixed(0);
                        }
                        
                        const creditBalanceDisplayMain = document.getElementById('credit-balance-display-main');
                        if (creditBalanceDisplayMain) {
                            creditBalanceDisplayMain.textContent = credits.toFixed(0);
                        }
                        
                        // Update expiry date
                        const expiresAtEl = document.getElementById('credit-expires-at');
                        if (expiresAtEl && data.expiresAt) {
                            const expiryDate = new Date(data.expiresAt);
                            expiresAtEl.textContent = expiryDate.toLocaleDateString('en-US', { 
                                year: 'numeric', 
                                month: 'short', 
                                day: 'numeric' 
                            });
                        } else if (expiresAtEl) {
                            expiresAtEl.textContent = 'Never';
                        }
                        
                        // Store in localStorage for cross-tab sync
                        localStorage.setItem('lastCreditBalance', credits.toString());
                        localStorage.setItem('lastCreditUpdate', Date.now().toString());
                        
                        // Update last used
                        const lastUsedEl = document.getElementById('credit-last-used');
                        if (lastUsedEl && data.lastUsedAt) {
                            const lastUsedDate = new Date(data.lastUsedAt);
                            lastUsedEl.textContent = lastUsedDate.toLocaleDateString('en-US', { 
                                year: 'numeric', 
                                month: 'short', 
                                day: 'numeric' 
                            });
                        } else if (lastUsedEl) {
                            lastUsedEl.textContent = 'Never';
                        }
                    }
                } else {
                    console.warn('Failed to load credits from API, using fallback');
                    // Fallback to Firestore
                    const userDocRef = doc(firestore, 'users', user.uid);
                    const userDoc = await getDoc(userDocRef);
                    
                    if (userDoc.exists()) {
                        const userData = userDoc.data();
                        const credits = userData.credits || 0;
                        
                        document.querySelectorAll('.user-credits').forEach(el => {
                            el.textContent = credits.toFixed(0);
                        });
                        
                        const creditBalanceDisplay = document.getElementById('credit-balance-display');
                        if (creditBalanceDisplay) {
                            creditBalanceDisplay.textContent = credits.toFixed(0);
                        }
                    }
                }
            } catch (error) {
                console.error('Failed to load credit balance:', error);
            }
        }
        
        // Load credit transaction history from API (backend)
        async function loadCreditTransactions(user, firestore) {
            const transactionsList = document.getElementById('credit-transactions-list');
            if (!transactionsList) return;
            
            try {
                const token = await user.getIdToken();
                const API_BASE_URL = window.location.origin.includes('localhost') 
                    ? 'http://localhost:3000' 
                    : (window.location.origin.includes('easyjpgtopdf.com') 
                        ? 'https://pdf-to-word-converter-iwumaktavq-uc.a.run.app'
                        : window.location.origin);
                
                const response = await fetch(`${API_BASE_URL}/api/credits/history?limit=50`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        const transactions = data.transactions || [];
                        
                        if (transactions.length === 0) {
                            transactionsList.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;"><i class="fas fa-info-circle"></i> No credit transactions found yet.</p>';
                            return;
                        }
                        
                        let html = '<div style="display: flex; flex-direction: column; gap: 12px;">';
                        transactions.forEach((txn) => {
                            const date = new Date(txn.createdAt);
                            const dateStr = date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
                            const timeStr = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                            
                            const isAddition = txn.type === 'purchase';
                            const amount = Math.abs(txn.credits_change);
                            const metadata = txn.metadata || {};
                            const reason = isAddition 
                                ? `Purchased ${metadata.plan || 'credits'}` 
                                : metadata.tool_used || 'Tool usage';
                            
                            html += `
                                <div style="background: ${isAddition ? '#f0f9ff' : '#fff5f5'}; border-left: 4px solid ${isAddition ? '#10b981' : '#ef4444'}; padding: 16px; border-radius: 8px;">
                                    <div style="display: flex; justify-content: space-between; align-items: start;">
                                        <div style="flex: 1;">
                                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                                <i class="fas fa-${isAddition ? 'plus-circle' : 'minus-circle'}" style="color: ${isAddition ? '#10b981' : '#ef4444'};"></i>
                                                <strong style="color: #333; font-size: 1.1rem;">${isAddition ? '+' : '-'}${amount} credits</strong>
                                            </div>
                                            <p style="margin: 4px 0; color: #666; font-size: 0.9rem;">${reason}</p>
                                            ${metadata.file_name ? `<p style="margin: 4px 0; color: #999; font-size: 0.85rem;"><i class="fas fa-file"></i> ${metadata.file_name}</p>` : ''}
                                            ${metadata.page_count ? `<p style="margin: 4px 0; color: #999; font-size: 0.85rem;"><i class="fas fa-file-alt"></i> ${metadata.page_count} pages</p>` : ''}
                                            ${metadata.processor ? `<p style="margin: 4px 0; color: #999; font-size: 0.85rem;"><i class="fas fa-cog"></i> ${metadata.processor === 'docai' ? 'OCR' : 'Direct'}</p>` : ''}
                                            <p style="margin: 4px 0; color: #999; font-size: 0.85rem;">
                                                <i class="fas fa-clock"></i> ${dateStr} at ${timeStr}
                                            </p>
                                            <p style="margin: 4px 0; color: #999; font-size: 0.85rem;">
                                                Balance: ${txn.balance_after} credits
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            `;
                        });
                        html += '</div>';
                        transactionsList.innerHTML = html;
                        return;
                    }
                }
            } catch (apiError) {
                console.error('API credit history failed:', apiError);
            }
            
            // Show error message
            transactionsList.innerHTML = '<p style="color: #dc3545; padding: 20px;"><i class="fas fa-exclamation-triangle"></i> Failed to load credit transactions.</p>';
        }
        
        // Load page visit history
        async function loadPageVisits(user) {
            const visitsList = document.getElementById('page-visits-list');
            if (!visitsList) return;
            
            try {
                const token = await user.getIdToken();
                const API_BASE_URL = window.location.origin.includes('localhost') 
                    ? 'http://localhost:3000' 
                    : (window.location.origin.includes('easyjpgtopdf.com') 
                        ? 'https://pdf-to-word-converter-iwumaktavq-uc.a.run.app'
                        : window.location.origin);
                
                const response = await fetch(`${API_BASE_URL}/api/credits/visit-history?limit=50`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        const visits = data.visits || [];
                        
                        if (visits.length === 0) {
                            visitsList.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;"><i class="fas fa-info-circle"></i> No page visits recorded yet.</p>';
                            return;
                        }
                        
                        let html = '<div style="display: flex; flex-direction: column; gap: 12px;">';
                        visits.forEach((visit) => {
                            const date = new Date(visit.last_visited);
                            const dateStr = date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
                            const timeStr = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                            
                            html += `
                                <div style="background: #f8f9fa; border-left: 4px solid #4361ee; padding: 16px; border-radius: 8px;">
                                    <div style="display: flex; justify-content: space-between; align-items: start;">
                                        <div style="flex: 1;">
                                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                                <i class="fas fa-file-alt" style="color: #4361ee;"></i>
                                                <strong style="color: #333; font-size: 1.1rem;">${visit.page}</strong>
                                            </div>
                                            ${visit.tool_used ? `<p style="margin: 4px 0; color: #666; font-size: 0.9rem;"><i class="fas fa-tools"></i> Tool: ${visit.tool_used}</p>` : ''}
                                            ${visit.credits_spent > 0 ? `<p style="margin: 4px 0; color: #999; font-size: 0.85rem;"><i class="fas fa-coins"></i> Credits spent: ${visit.credits_spent}</p>` : ''}
                                            <p style="margin: 4px 0; color: #999; font-size: 0.85rem;">
                                                <i class="fas fa-eye"></i> Visited ${visit.visit_count} time${visit.visit_count !== 1 ? 's' : ''}
                                            </p>
                                            <p style="margin: 4px 0; color: #999; font-size: 0.85rem;">
                                                <i class="fas fa-clock"></i> Last visited: ${dateStr} at ${timeStr}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            `;
                        });
                        html += '</div>';
                        visitsList.innerHTML = html;
                        return;
                    }
                }
            } catch (error) {
                console.error('Failed to load page visits:', error);
            }
            
            visitsList.innerHTML = '<p style="color: #dc3545; padding: 20px;"><i class="fas fa-exclamation-triangle"></i> Failed to load page visits.</p>';
        }
        
        // Load receipts
        async function loadReceipts(user, firestore) {
            try {
                const receiptsRef = collection(firestore, 'users', user.uid, 'receipts');
                const q = query(receiptsRef, orderBy('createdAt', 'desc'));
                const querySnapshot = await getDocs(q);
                
                const receiptsList = document.getElementById('receipts-list');
                if (!receiptsList) return;
                
                if (querySnapshot.empty) {
                    receiptsList.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;"><i class="fas fa-info-circle"></i> No receipts found yet.</p>';
                    return;
                }
                
                let html = '<div style="display: flex; flex-direction: column; gap: 16px;">';
                querySnapshot.forEach((docSnap) => {
                    const data = docSnap.data();
                    const timestamp = data.createdAt?.toDate?.() || new Date();
                    const dateStr = timestamp.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
                    const timeStr = timestamp.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                    
                    const amount = data.amount || 0;
                    const currency = data.currency || 'INR';
                    const credits = data.credits || 0;
                    const gstAmount = data.gstAmount || 0;
                    const baseAmount = data.baseAmount || amount;
                    
                    html += `
                        <div style="background: #f8f9fa; border: 1px solid #e9ecef; padding: 20px; border-radius: 12px;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 16px;">
                                <div>
                                    <h4 style="margin: 0 0 8px 0; color: #333;">Receipt #${data.orderId?.substring(0, 12) || 'N/A'}</h4>
                                    <p style="margin: 0; color: #666; font-size: 0.9rem;">
                                        <i class="fas fa-calendar"></i> ${dateStr} at ${timeStr}
                                    </p>
                                </div>
                                <span style="background: #d4edda; color: #155724; padding: 6px 12px; border-radius: 6px; font-size: 0.85rem; font-weight: 600;">
                                    <i class="fas fa-check-circle"></i> Paid
                                </span>
                            </div>
                            <div style="border-top: 1px solid #e9ecef; padding-top: 16px; margin-top: 16px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="color: #666;">Credits Purchased:</span>
                                    <strong style="color: #333;">${credits} credits</strong>
                                </div>
                                ${currency === 'INR' && gstAmount > 0 ? `
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="color: #666;">Base Amount:</span>
                                    <span style="color: #333;">₹${baseAmount.toFixed(2)}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="color: #666;">GST (18%):</span>
                                    <span style="color: #333;">₹${gstAmount.toFixed(2)}</span>
                                </div>
                                ` : ''}
                                <div style="display: flex; justify-content: space-between; margin-top: 12px; padding-top: 12px; border-top: 2px solid #333;">
                                    <strong style="color: #333; font-size: 1.1rem;">Total Amount:</strong>
                                    <strong style="color: #333; font-size: 1.1rem;">${currency === 'INR' ? '₹' : '$'}${amount.toFixed(2)}</strong>
                                </div>
                            </div>
                            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #e9ecef;">
                                <a href="payment-receipt.html?orderId=${data.orderId || ''}" 
                                   style="color: #4361ee; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 8px;">
                                    <i class="fas fa-download"></i> Download Receipt
                                </a>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
                receiptsList.innerHTML = html;
            } catch (error) {
                console.error('Failed to load receipts:', error);
                const receiptsList = document.getElementById('receipts-list');
                if (receiptsList) {
                    receiptsList.innerHTML = '<p style="color: #dc3545; padding: 20px;"><i class="fas fa-exclamation-triangle"></i> Failed to load receipts.</p>';
                }
            }
        }

        // Load user statistics from Firestore
        async function loadUserStatistics(user, firestore) {
            try {
                const userDocRef = doc(firestore, 'users', user.uid);
                const userDoc = await getDoc(userDocRef);
                
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    
                    // Update conversions count
                    const conversionsEl = document.querySelector('.user-conversions');
                    if (conversionsEl) {
                        conversionsEl.textContent = userData.totalConversions || 0;
                    }
                    
                    // Update billing address preview
                    const billingAddressEl = document.querySelector('.user-billing-address');
                    if (billingAddressEl && userData.billingAddress) {
                        const addr = userData.billingAddress;
                        billingAddressEl.textContent = `${addr.city || ''}, ${addr.state || ''}, ${addr.country || ''}`.trim() || 'Not added yet.';
                    }
                    
                    // Update recent tool usage if data exists
                    if (userData.recentTools && userData.recentTools.length > 0) {
                        const usageList = document.querySelector('.usage-list');
                        if (usageList) {
                            usageList.innerHTML = userData.recentTools.slice(0, 5).map(tool => {
                                const date = tool.timestamp?.toDate?.() || new Date();
                                return `<li><strong>${tool.toolName}</strong> - ${date.toLocaleDateString()}</li>`;
                            }).join('');
                        }
                    }
                }
            } catch (error) {
                console.error('Failed to load user statistics:', error);
            }
        }

        // Load billing address from Firestore
        async function loadBillingAddress(user, firestore) {
            try {
                const userDocRef = doc(firestore, 'users', user.uid);
                const userDoc = await getDoc(userDocRef);
                
                if (userDoc.exists() && userDoc.data().billingAddress) {
                    const addr = userDoc.data().billingAddress;
                    
                    // Populate billing form
                    document.getElementById('billing-name').value = addr.name || '';
                    document.getElementById('billing-phone').value = addr.phone || '';
                    document.getElementById('billing-line1').value = addr.line1 || '';
                    document.getElementById('billing-line2').value = addr.line2 || '';
                    document.getElementById('billing-city').value = addr.city || '';
                    document.getElementById('billing-state').value = addr.state || '';
                    document.getElementById('billing-postal').value = addr.postal || '';
                    document.getElementById('billing-country').value = addr.country || 'India';
                    document.getElementById('billing-notes').value = addr.notes || '';
                }
            } catch (error) {
                console.error('Failed to load billing address:', error);
            }
        }

        // Load payment history with real-time updates
        async function loadPaymentHistory(user, firestore) {
            try {
                console.log('📊 Loading payment history for user:', user.uid);
                
                const paymentsRef = collection(firestore, 'payments', user.uid, 'records');
                
                // Query with fallback - try createdAt, then updatedAt
                let querySnapshot;
                try {
                    const q = query(paymentsRef, orderBy('createdAt', 'desc'));
                    querySnapshot = await getDocs(q);
                } catch (orderError) {
                    console.warn('⚠️ createdAt orderBy failed, trying without order:', orderError);
                    // Fallback: get all documents without ordering
                    querySnapshot = await getDocs(paymentsRef);
                }

                const paymentList = document.querySelector('.payment-list');
                if (!paymentList) {
                    console.error('❌ Payment list element not found');
                    return;
                }

                console.log('📦 Found payments:', querySnapshot.size);

                if (querySnapshot.empty) {
                    paymentList.innerHTML = '<li style="color: #999; padding: 20px; text-align: center;"><i class="fas fa-info-circle"></i> No payment history found yet.</li>';
                    return;
                }

                // Convert to array and sort manually if needed
                const payments = [];
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    payments.push({ id: doc.id, ...data });
                });

                // Sort by createdAt if available
                payments.sort((a, b) => {
                    const dateA = a.createdAt?.toDate?.() || a.createdAt || new Date(0);
                    const dateB = b.createdAt?.toDate?.() || b.createdAt || new Date(0);
                    return dateB - dateA; // Descending (newest first)
                });

                console.log('✅ Payments sorted:', payments.length);

                let html = '';
                payments.forEach((data) => {
                    // Handle different date formats
                    let date;
                    if (data.createdAt?.toDate) {
                        date = data.createdAt.toDate();
                    } else if (data.createdAt) {
                        date = new Date(data.createdAt);
                    } else if (data.updatedAt?.toDate) {
                        date = data.updatedAt.toDate();
                    } else if (data.updatedAt) {
                        date = new Date(data.updatedAt);
                    } else {
                        date = new Date();
                    }

                    const dateStr = date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
                    const timeStr = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                    
                    const amount = data.amount || 0;
                    const currency = data.currency || 'INR';
                    const status = data.status || data.paymentStatus || 'pending';
                    const paymentMethod = data.method || 'razorpay';
                    const orderId = data.orderId || data.id;

                    const statusClass = status === 'succeeded' || status === 'captured' ? 'success' : status === 'failed' ? 'failed' : 'pending';
                    const statusText = status === 'succeeded' || status === 'captured' ? '✓ Completed' : status === 'failed' ? '✗ Failed' : '⏳ Pending';

                    console.log('💳 Payment:', { orderId, amount, status, date: dateStr });

                    html += `
                        <li class="payment-item" style="border-left: 4px solid ${statusClass === 'success' ? '#28a745' : statusClass === 'failed' ? '#dc3545' : '#ffc107'}; padding: 16px; margin: 16px 0; background: ${statusClass === 'success' ? '#f8fff9' : statusClass === 'failed' ? '#fff5f5' : '#fffef5'}; border-radius: 8px;">
                            <div style="display: flex; justify-content: space-between; align-items: start; gap: 20px;">
                                <div style="flex: 1;">
                                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                        <strong style="color: #333; font-size: 18px;">${currency} ${amount}</strong>
                                        <span class="status-badge" style="background: ${status === 'succeeded' ? '#d4edda' : status === 'failed' ? '#f8d7da' : '#fff3cd'}; color: ${status === 'succeeded' ? '#155724' : status === 'failed' ? '#721c24' : '#856404'}; padding: 4px 12px; border-radius: 12px; font-size: 11px; font-weight: 600;">
                                            ${statusText}
                                        </span>
                                    </div>
                                    <p style="margin: 6px 0; font-size: 13px; color: #666;">
                                        <i class="fas fa-calendar-alt"></i> ${dateStr} at ${timeStr}
                                    </p>
                                    <p style="margin: 6px 0; font-size: 12px; color: #999;">
                                        <i class="fas fa-receipt"></i> Order ID: ${orderId.substring(0, 16)}...
                                    </p>
                                    <p style="margin: 6px 0; font-size: 12px; color: #999;">
                                        <i class="fas fa-credit-card"></i> ${paymentMethod.toUpperCase()}
                                    </p>
                                    ${data.contact ? `
                                    <p style="margin: 6px 0; font-size: 12px; color: #999;">
                                        <i class="fas fa-phone"></i> ${data.contact}
                                    </p>
                                    ` : ''}
                                    ${data.email ? `
                                    <p style="margin: 6px 0; font-size: 12px; color: #999;">
                                        <i class="fas fa-envelope"></i> ${data.email}
                                    </p>
                                    ` : ''}
                                </div>
                                ${status === 'succeeded' ? `
                                    <a href="payment-receipt.html?txn_id=${data.paymentId || orderId}&amount=${amount}&currency=${currency}&method=${paymentMethod}&email=${data.email || ''}&contact=${data.contact || ''}" style="font-size: 13px; color: #4361ee; text-decoration: none; font-weight: 600; padding: 8px 16px; border: 2px solid #4361ee; border-radius: 6px; transition: all 0.3s;" onmouseover="this.style.background='#4361ee'; this.style.color='white';" onmouseout="this.style.background='transparent'; this.style.color='#4361ee';">
                                        <i class="fas fa-file-invoice"></i> View Receipt
                                    </a>
                                ` : ''}
                            </div>
                        </li>
                    `;
                });

                paymentList.innerHTML = html;
            } catch (error) {
                console.error('Failed to load payment history:', error);
                const paymentList = document.querySelector('.payment-list');
                if (paymentList) {
                    paymentList.innerHTML = '<li style="color: #dc3545; padding: 20px;"><i class="fas fa-exclamation-triangle"></i> Failed to load payment history. Please refresh the page.</li>';
                }
            }
        }

        // Main auth state listener - triggers all real-time updates
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                // Update all dashboard data in real-time
                await updateDashboardData(user);
                
                // Show success message after data loads
                console.log('✅ Dashboard data loaded successfully for:', user.email);
            } else {
                console.log('⚠️ No user logged in - dashboard hidden');
            }
        });

        // Handle dashboard navigation on page load
        document.addEventListener('DOMContentLoaded', () => {
            const hash = window.location.hash.substring(1); // Remove #
            if (hash && hash.startsWith('dashboard-')) {
                // Find the button with matching target
                const targetButton = document.querySelector(`.dashboard-nav-btn[data-dashboard-target="${hash}"]`);
                if (targetButton) {
                    // Remove active from all buttons
                    document.querySelectorAll('.dashboard-nav-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    // Add active to target button
                    targetButton.classList.add('active');
                    
                    // Show target panel
                    document.querySelectorAll('.dashboard-panel').forEach(panel => {
                        panel.classList.remove('active');
                    });
                    const targetPanel = document.getElementById(hash);
                    if (targetPanel) {
                        targetPanel.classList.add('active');
                        // Scroll to panel
                        setTimeout(() => {
                            targetPanel.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }, 100);
                    }
                }
            }
        });

        // Handle hash changes (when clicking links)
        window.addEventListener('hashchange', () => {
            const hash = window.location.hash.substring(1);
            if (hash && hash.startsWith('dashboard-')) {
                const targetButton = document.querySelector(`.dashboard-nav-btn[data-dashboard-target="${hash}"]`);
                if (targetButton) {
                    document.querySelectorAll('.dashboard-nav-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    targetButton.classList.add('active');
                    
                    document.querySelectorAll('.dashboard-panel').forEach(panel => {
                        panel.classList.remove('active');
                    });
                    const targetPanel = document.getElementById(hash);
                    if (targetPanel) {
                        targetPanel.classList.add('active');
                        targetPanel.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }
            }
        });
        
        // Real-time update indicator
        console.log('🔄 Dashboard real-time updater initialized');
        
        // Load Subscription Data
        async function loadSubscriptionData(user) {
            try {
                const apiBaseUrl = window.location.origin;
                const token = await user.getIdToken();
                
                const response = await fetch(`${apiBaseUrl}/api/subscription/current`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success && data.subscription) {
                        updateSubscriptionUI(data.subscription);
                        await loadUsageTracking(user);
                    }
                }
            } catch (error) {
                console.error('Failed to load subscription:', error);
            }
        }
        
        function updateSubscriptionUI(subscription) {
            document.getElementById('plan-name').textContent = subscription.planName || subscription.plan;
            document.getElementById('current-plan').textContent = subscription.planName || subscription.plan;
            document.getElementById('subscription-status-text').textContent = subscription.status;
            
            const statusBadge = document.getElementById('plan-status');
            statusBadge.textContent = subscription.status;
            statusBadge.className = 'plan-status-badge ' + (subscription.status === 'expired' ? 'expired' : subscription.status === 'trial' ? 'trial' : '');
            
            if (subscription.expiresAt) {
                const expiresDate = new Date(subscription.expiresAt);
                document.getElementById('subscription-expires').textContent = expiresDate.toLocaleDateString();
                
                const daysRemaining = Math.ceil((expiresDate - new Date()) / (1000 * 60 * 60 * 24));
                document.getElementById('days-remaining').textContent = daysRemaining > 0 ? daysRemaining : 0;
                
                if (daysRemaining <= 7 && daysRemaining > 0) {
                    showAlert('warning', `Your subscription expires in ${daysRemaining} days. Renew now to continue using premium features.`);
                }
            } else {
                document.getElementById('subscription-expires').textContent = 'Never';
                document.getElementById('days-remaining').textContent = '∞';
            }
            
            // Update usage limits
            if (subscription.usageLimits) {
                document.getElementById('pdfs-limit').textContent = subscription.usageLimits.pdfsPerMonth === -1 ? '∞' : subscription.usageLimits.pdfsPerMonth;
                document.getElementById('storage-limit').textContent = subscription.usageLimits.storageGB === -1 ? '∞' : subscription.usageLimits.storageGB;
                document.getElementById('api-limit').textContent = subscription.usageLimits.apiCallsPerMonth === -1 ? '∞' : subscription.usageLimits.apiCallsPerMonth;
            }
            
            // Update image remover limits based on plan
            const planFeatures = subscription.planFeatures || {};
            const imageRemover = planFeatures.imageRemover || {};
            const imageRemoverLimit = imageRemover.quotaPerMonth === Infinity ? '∞' : (imageRemover.quotaPerMonth || 40);
            const imageRemoverMaxSize = imageRemover.maxFileSize === Infinity ? 'No limit' : 
                imageRemover.maxFileSize ? `${Math.round(imageRemover.maxFileSize / (1024 * 1024))} MB` : '1 MB';
            const imageRemoverUploadLimit = imageRemover.monthlyUploadLimit === Infinity ? '∞' : 
                imageRemover.monthlyUploadLimit ? `${Math.round(imageRemover.monthlyUploadLimit / (1024 * 1024))} MB` : '10 MB';
            const imageRemoverDownloadLimit = imageRemover.monthlyDownloadLimit === Infinity ? '∞' : 
                imageRemover.monthlyDownloadLimit ? `${Math.round(imageRemover.monthlyDownloadLimit / (1024 * 1024))} MB` : '2 MB';
            
            document.getElementById('image-remover-limit').textContent = imageRemoverLimit;
            document.getElementById('image-remover-max-size').textContent = imageRemoverMaxSize;
            document.getElementById('image-remover-upload-limit').textContent = imageRemoverUploadLimit;
            document.getElementById('image-remover-download-limit').textContent = imageRemoverDownloadLimit;
            
            // Show/hide action buttons
            if (subscription.status === 'active' && subscription.plan !== 'free') {
                document.getElementById('cancel-subscription-btn').style.display = 'inline-block';
            }
            if (subscription.status === 'expired' || subscription.status === 'cancelled') {
                document.getElementById('renew-subscription-btn').style.display = 'inline-block';
            }
        }
        
        async function loadUsageTracking(user) {
            try {
                const apiBaseUrl = window.location.origin;
                const token = await user.getIdToken();
                
                const response = await fetch(`${apiBaseUrl}/api/subscription/usage`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success && data.usage) {
                        updateUsageUI(data.usage);
                        updateUsageCharts(data.dailyUsage, data.monthlyUsage);
                    }
                }
            } catch (error) {
                console.error('Failed to load usage tracking:', error);
            }
        }
        
        function updateUsageUI(usage) {
            // Update PDFs usage
            const pdfsUsed = usage.currentUsage?.pdfsThisMonth || 0;
            const pdfsLimit = usage.usageLimits?.pdfsPerMonth || 10;
            document.getElementById('pdfs-used').textContent = pdfsUsed;
            const pdfsPercent = pdfsLimit === -1 ? 0 : Math.min((pdfsUsed / pdfsLimit) * 100, 100);
            const pdfsProgress = document.getElementById('pdfs-progress');
            pdfsProgress.style.width = pdfsPercent + '%';
            if (pdfsPercent >= 90) pdfsProgress.className = 'usage-progress-fill danger';
            else if (pdfsPercent >= 70) pdfsProgress.className = 'usage-progress-fill warning';
            
            // Update Storage usage
            const storageUsed = usage.currentUsage?.storageUsedGB || 0;
            const storageLimit = usage.usageLimits?.storageGB || 1;
            document.getElementById('storage-used').textContent = storageUsed.toFixed(2);
            const storagePercent = storageLimit === -1 ? 0 : Math.min((storageUsed / storageLimit) * 100, 100);
            const storageProgress = document.getElementById('storage-progress');
            storageProgress.style.width = storagePercent + '%';
            if (storagePercent >= 90) storageProgress.className = 'usage-progress-fill danger';
            else if (storagePercent >= 70) storageProgress.className = 'usage-progress-fill warning';
            
            // Update API usage
            const apiUsed = usage.currentUsage?.apiCallsThisMonth || 0;
            const apiLimit = usage.usageLimits?.apiCallsPerMonth || 100;
            document.getElementById('api-used').textContent = apiUsed;
            const apiPercent = apiLimit === -1 ? 0 : Math.min((apiUsed / apiLimit) * 100, 100);
            const apiProgress = document.getElementById('api-progress');
            apiProgress.style.width = apiPercent + '%';
            if (apiPercent >= 90) apiProgress.className = 'usage-progress-fill danger';
            else if (apiPercent >= 70) apiProgress.className = 'usage-progress-fill warning';
            
            // Update Image Background Remover usage
            const imageRemoverUsed = usage.currentUsage?.imageRemoverThisMonth || 0;
            const imageRemoverLimit = usage.usageLimits?.imageRemoverPerMonth || 40;
            document.getElementById('image-remover-used').textContent = imageRemoverUsed;
            const imageRemoverPercent = imageRemoverLimit === -1 || imageRemoverLimit === Infinity ? 0 : Math.min((imageRemoverUsed / imageRemoverLimit) * 100, 100);
            const imageRemoverProgress = document.getElementById('image-remover-progress');
            imageRemoverProgress.style.width = imageRemoverPercent + '%';
            if (imageRemoverPercent >= 90) imageRemoverProgress.className = 'usage-progress-fill danger';
            else if (imageRemoverPercent >= 70) imageRemoverProgress.className = 'usage-progress-fill warning';
            
            // Update monthly upload/download usage
            const imageRemoverUploadUsed = usage.currentUsage?.imageRemoverUploadMB || 0;
            const imageRemoverUploadLimit = usage.usageLimits?.imageRemoverMonthlyUploadMB || 10;
            document.getElementById('image-remover-upload-used').textContent = imageRemoverUploadUsed.toFixed(2);
            
            const imageRemoverDownloadUsed = usage.currentUsage?.imageRemoverDownloadMB || 0;
            const imageRemoverDownloadLimit = usage.usageLimits?.imageRemoverMonthlyDownloadMB || 2;
            document.getElementById('image-remover-download-used').textContent = imageRemoverDownloadUsed.toFixed(2);
            
            // Show alerts if limits exceeded
            if (pdfsPercent >= 100 || storagePercent >= 100 || apiPercent >= 100 || imageRemoverPercent >= 100) {
                showAlert('danger', 'You have exceeded your usage limits. Please upgrade your plan or wait for the next billing cycle.');
            } else if (pdfsPercent >= 90 || storagePercent >= 90 || apiPercent >= 90 || imageRemoverPercent >= 90) {
                showAlert('warning', 'You are approaching your usage limits. Consider upgrading your plan.');
            }
        }
        
        function updateUsageCharts(dailyUsage, monthlyUsage) {
            // Simple chart implementation (can be enhanced with Chart.js)
            const dailyCanvas = document.getElementById('daily-usage-chart');
            const monthlyCanvas = document.getElementById('monthly-usage-chart');
            
            if (dailyCanvas && dailyUsage) {
                const ctx = dailyCanvas.getContext('2d');
                drawSimpleChart(ctx, dailyUsage, 'Daily PDF Usage');
            }
            
            if (monthlyCanvas && monthlyUsage) {
                const ctx = monthlyCanvas.getContext('2d');
                drawSimpleChart(ctx, monthlyUsage, 'Monthly PDF Usage');
            }
        }
        
        function drawSimpleChart(ctx, data, label) {
            const width = ctx.canvas.width;
            const height = ctx.canvas.height;
            const maxValue = Math.max(...data.map(d => d.value || 0), 1);
            
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = 'var(--text-secondary)';
            ctx.font = '12px Arial';
            ctx.fillText(label, 10, 20);
            
            const barWidth = width / data.length - 2;
            data.forEach((item, index) => {
                const barHeight = (item.value || 0) / maxValue * (height - 40);
                ctx.fillStyle = 'var(--primary)';
                ctx.fillRect(index * (barWidth + 2) + 10, height - barHeight - 20, barWidth, barHeight);
            });
        }
        
        function showAlert(type, message) {
            const alertsContainer = document.getElementById('subscription-alerts');
            if (!alertsContainer) return;
            
            const alert = document.createElement('div');
            alert.className = `alert ${type}`;
            alert.innerHTML = `<i class="fas fa-${type === 'danger' ? 'exclamation-triangle' : type === 'warning' ? 'exclamation-circle' : 'info-circle'}"></i><span>${message}</span>`;
            alertsContainer.appendChild(alert);
            
            setTimeout(() => alert.remove(), 10000);
        }
        
        // Cancel subscription handler
        document.getElementById('cancel-subscription-btn')?.addEventListener('click', async function() {
            if (!confirm('Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period.')) {
                return;
            }
            
            try {
                const user = auth.currentUser;
                if (!user) return;
                
                const token = await user.getIdToken();
                const apiBaseUrl = window.location.origin;
                
                const response = await fetch(`${apiBaseUrl}/api/subscription/cancel`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        showAlert('info', 'Subscription cancelled successfully. You will retain access until the end of your billing period.');
                        await loadSubscriptionData(user);
                    }
                }
            } catch (error) {
                console.error('Failed to cancel subscription:', error);
                showAlert('danger', 'Failed to cancel subscription. Please try again or contact support.');
            }
        });
        
        // Load subscription data when user is authenticated
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                await loadSubscriptionData(user);
            }
        });
        
        // Theme Toggle Functionality
        function initTheme() {
            const savedTheme = localStorage.getItem('site-theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeUI(savedTheme);
            updateDashboardTheme(savedTheme);
        }
        
        function updateThemeUI(theme) {
            const themeIcon = document.getElementById('theme-icon');
            const themeText = document.getElementById('theme-text');
            
            if (themeIcon && themeText) {
                if (theme === 'light') {
                    themeIcon.className = 'fas fa-sun';
                    themeText.textContent = 'Light';
                } else {
                    themeIcon.className = 'fas fa-moon';
                    themeText.textContent = 'Dark';
                }
            }
        }
        
        function updateDashboardTheme(theme) {
            // Update dashboard cards and panels
            const cards = document.querySelectorAll('.dashboard-card, .dashboard-panel');
            cards.forEach(card => {
                if (theme === 'dark') {
                    card.style.background = 'var(--bg-secondary)';
                    card.style.color = 'var(--text-primary)';
                } else {
                    card.style.background = '';
                    card.style.color = '';
                }
            });
        }
        
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('site-theme', newTheme);
            updateThemeUI(newTheme);
            updateDashboardTheme(newTheme);
        }
        
        // Initialize theme on page load
        initTheme();
        
        // Theme toggle button event listener
        const themeToggleBtn = document.getElementById('theme-toggle-btn');
        if (themeToggleBtn) {
            themeToggleBtn.addEventListener('click', toggleTheme);
        }
    </script>
    

    <footer>
        <div class="container footer-inner">
            <div class="footer-company-links">
                <span>Company</span>
                <a href="index.html#about">About Us</a>
                <a href="index.html#contact">Contact</a>
                <a href="pricing.html">Pricing</a>
                <a href="privacy-policy.html">Privacy Policy</a>
                <a href="terms-of-service.html">Terms of Service</a>
                <a href="dmca-en.html">DMCA</a>
                <a href="blog.html">Blog</a>
            <a href="sitemap.xml">Sitemap</a>
                <a href="feedback.html">Feedback</a></div>
            <p class="footer-brand-line">&copy; easyjpgtopdf &mdash; Free PDF &amp; Image Tools for everyone. All rights reserved.</p>
                        <p class="footer-credits">
                Thanks to every open-source contributor powering this site. <a href="attributions.html">See full acknowledgements</a>.
            </p>
            <div class="footer-social-search" style="display: flex; align-items: center; justify-content: space-between; margin-top: 20px; padding-top: 20px; border-top: 1px solid #444; flex-wrap: wrap; gap: 15px;">
                <div class="footer-social-links" style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                                        <a href="https://x.com/easyjpgtopdf" target="_blank" rel="noopener noreferrer" title="Follow us on X (Twitter)" style="display: inline-flex; align-items: center; justify-content: center; width: 40px; height: 40px; color: #aaa; text-decoration: none; transition: all 0.3s; border-radius: 50%;" onmouseover="this.style.color='#fff'; this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.color='#aaa'; this.style.background='transparent'">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </a>
                                        <a href="https://www.youtube.com/@EasyJpgtoPdf" target="_blank" rel="noopener noreferrer" title="Subscribe to our YouTube channel" style="display: inline-flex; align-items: center; justify-content: center; width: 40px; height: 40px; color: #aaa; text-decoration: none; transition: all 0.3s; border-radius: 50%;" onmouseover="this.style.color='#fff'; this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.color='#aaa'; this.style.background='transparent'">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                        </svg>
                    </a>
                    <div style="display: inline-flex; align-items: center; gap: 8px; color: #aaa; cursor: default;" title="Mobile App Coming Soon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.05 20.28c-.98.95-2.05.88-3.08.4-1.09-.5-2.08-.95-3.24-1.44-2.24-1.01-4.33-1.95-5.99-3.22C2.79 14.25.99 12.12.99 9.12c0-2.23 1.21-4.15 3.29-5.19.4-.2.81-.38 1.24-.52.7-.23 1.23-.52 1.62-.82.49-.38.85-.88 1.06-1.46.19-.57.24-1.17.14-1.8-.09-.63-.29-1.24-.58-1.81L7.76.36c.16-.24.35-.45.57-.62.22-.17.46-.3.72-.4.26-.1.54-.15.82-.15.28 0 .56.05.82.15.26.1.5.23.72.4.22.17.41.38.57.62l1.39 2.06c.29.57.49 1.18.58 1.81.1.63.05 1.23-.14 1.8-.21.58-.57 1.08-1.06 1.46-.39.3-.92.59-1.62.82-.43.14-.84.32-1.24.52-2.08 1.04-3.29 2.96-3.29 5.19 0 3 1.8 5.13 4.5 6.5 1.66 1.27 3.75 2.21 5.99 3.22 1.16.49 2.15.94 3.24 1.44 1.03.48 2.1.55 3.08-.4 1.01-.98 1.01-2.4.01-3.38z"/>
                        </svg>
                        <span style="font-size: 0.9rem;">App Coming Soon</span>
                    </div>
                </div>
                <div class="footer-search" style="flex: 1; min-width: 200px; max-width: 300px;">
                                        <form action="search.html" method="get" style="display: flex; gap: 5px;">
                        <input type="text" name="q" placeholder="Search our site..." style="flex: 1; padding: 8px 12px; border: 1px solid #555; border-radius: 4px; background: #2a2a2a; color: #fff; font-size: 0.9rem; outline: none;" onfocus="this.style.borderColor='#4361ee'" onblur="this.style.borderColor='#555'">
                        <button type="submit" style="padding: 8px 15px; background: #4361ee; border: none; border-radius: 4px; color: #fff; cursor: pointer; transition: background 0.3s;" onmouseover="this.style.background='#3a0ca3'" onmouseout="this.style.background='#4361ee'">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </footer>
    <script src="js/global-components.js"></script>
    <script>
    // Signout button handler (using auth.js handleLogout function)
    document.addEventListener('DOMContentLoaded', () => {
        const signoutBtn = document.getElementById('dashboard-signout-btn');
        if (signoutBtn) {
            signoutBtn.addEventListener('click', async () => {
                // Import auth module and use handleLogout
                try {
                    const authModule = await import('./js/auth.js');
                    if (authModule && typeof authModule.handleLogout === 'function') {
                        authModule.handleLogout();
                    } else {
                        // Fallback: direct signout
                        const { auth } = await import('./js/firebase-init.js');
                        const { signOut } = await import('https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js');
                        await signOut(auth);
                        alert('You have been signed out.');
                        window.location.href = 'index.html';
                    }
                } catch (error) {
                    console.error('Signout error:', error);
                    alert('Unable to sign out. Please try again.');
                }
            });
        }
    });
    </script>
    <script>
    // Ensure header loads - multiple attempts to guarantee it works
    (function() {
        function tryLoadHeader() {
            if (typeof loadGlobalHeader === 'function') {
                try {
                    loadGlobalHeader();
                    return true;
                } catch (e) {
                    console.error('Error calling loadGlobalHeader:', e);
                }
            }
            return false;
        }
        
        // Try immediately if script already loaded
        if (document.readyState === 'complete' || document.readyState === 'interactive') {
            if (!tryLoadHeader()) {
                // Script not loaded yet, wait for it
                var attempts = 0;
                var maxAttempts = 60; // 3 seconds total
                var checkHeader = setInterval(function() {
                    attempts++;
                    if (tryLoadHeader() || attempts >= maxAttempts) {
                        clearInterval(checkHeader);
                    }
                }, 50);
            }
        } else {
            // Wait for DOM to be ready
            document.addEventListener('DOMContentLoaded', function() {
                if (!tryLoadHeader()) {
                    var attempts = 0;
                    var maxAttempts = 40;
                    var checkHeader = setInterval(function() {
                        attempts++;
                        if (tryLoadHeader() || attempts >= maxAttempts) {
                            clearInterval(checkHeader);
                        }
                    }, 50);
                }
            });
        }
        
        // Final backup attempt on window load
        window.addEventListener('load', function() {
            setTimeout(function() {
                if (!document.querySelector('header') && typeof loadGlobalHeader === 'function') {
                    loadGlobalHeader();
                }
            }, 100);
        });
    })();
    </script>
</body>
</html>
