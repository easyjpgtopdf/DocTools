<!DOCTYPE html>

<html dir="ltr" lang="hi">
<head>
<meta charset="utf-8"/>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° - ‡§Ü‡§™‡§ï‡§æ ‡§ñ‡§æ‡§§‡§æ | Your Account - easyjpgtopdf</title>
<link href="css/footer.css" rel="stylesheet"/>
<!-- Fonts -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Hind:wght@400;500;600;700&amp;family=Poppins:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<!-- CSS -->
<link href="css/fonts.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #4cc9f0;
            --light: #f5f7ff;
            --dark: #1f1f2e;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --surface: #ffffff;
            --border: rgba(67, 97, 238, 0.12);
            --bg-primary: #f5f7ff;
            --bg-secondary: #ffffff;
            --text-primary: #1f1f2e;
            --text-secondary: #6c757d;
        }
        
        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2b2b2b;
            --text-primary: #e5e5e5;
            --text-secondary: #9ca3af;
            --light: #1a1a1a;
            --dark: #e5e5e5;
            --surface: #2b2b2b;
            --border: rgba(255, 255, 255, 0.1);
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Hind', 'Poppins', 'Arial Unicode MS', 'Nirmala UI', 'Mangal', 'Arial', sans-serif;
            background: linear-gradient(180deg, rgba(67, 97, 238, 0.08), rgba(67, 97, 238, 0.02));
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background 0.3s, color 0.3s;
        }

        header {
            background: var(--bg-secondary);
            box-shadow: 0 2px 12px rgba(15, 23, 42, 0.08);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: background 0.3s;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 24px;
            padding: 16px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .logo img {
            height: 54px;
        }

        .nav-links {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            position: relative;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--primary);
        }

        .dropdown {
            position: relative;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            min-width: 220px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 12px 24px rgba(15, 23, 42, 0.12);
            padding: 10px 0;
            z-index: 50;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown-content a {
            display: block;
            padding: 10px 18px;
            color: var(--dark);
            text-decoration: none;
        }

        .dropdown-content a:hover {
            background: rgba(67, 97, 238, 0.08);
        }

        .auth-buttons {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .auth-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            border-radius: 999px;
            border: 1px solid rgba(67, 97, 238, 0.28);
            color: var(--primary);
            font-weight: 600;
            text-decoration: none;
            transition: background 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
        }

        .auth-link:hover {
            background: rgba(67, 97, 238, 0.1);
            color: var(--secondary);
            box-shadow: 0 8px 20px rgba(67, 97, 238, 0.22);
        }

        .auth-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 999px;
            border: none;
            background: linear-gradient(135deg, #ff6b6b, #f06595);
            color: #fff;
            font-weight: 600;
            text-decoration: none;
            box-shadow: 0 12px 28px rgba(240, 101, 149, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .auth-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 32px rgba(240, 101, 149, 0.35);
        }

        .user-menu {
            display: none;
            align-items: center;
            position: relative;
        }

        .user-menu-toggle {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 16px;
            border-radius: 999px;
            border: 1px solid rgba(67, 97, 238, 0.22);
            background: white;
            color: var(--dark);
            font-weight: 600;
            cursor: pointer;
            transition: box-shadow 0.2s ease, border-color 0.2s ease;
        }

        .user-menu[data-open="true"] .user-menu-toggle,
        .user-menu-toggle:hover {
            border-color: rgba(67, 97, 238, 0.42);
            box-shadow: 0 12px 28px rgba(67, 97, 238, 0.15);
        }

        .user-menu-toggle i {
            transition: transform 0.2s ease;
        }

        .user-menu[data-open="true"] .user-menu-toggle i {
            transform: rotate(180deg);
        }

        .user-initial {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: #fff;
            font-weight: 700;
            font-size: 0.95rem;
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(67, 97, 238, 0.15);
            min-width: 240px;
            display: none;
            flex-direction: column;
            padding: 12px 0;
            margin-top: 8px;
            z-index: 1000;
            border: 1px solid rgba(67, 97, 238, 0.1);
            transition: all 0.2s ease;
            overflow: hidden;
        }

        .user-menu:hover .user-dropdown,
        .user-menu[data-open="true"] .user-dropdown {
            display: flex;
            animation: fadeIn 0.15s ease-out forwards;
        }

        .user-dropdown a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            color: var(--dark);
            text-decoration: none;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }

        .user-dropdown a:hover {
            background-color: rgba(67, 97, 238, 0.08);
            color: var(--primary);
            border-left-color: var(--primary);
            padding-left: 24px;
        }

        .user-dropdown a i {
            width: 20px;
            text-align: center;
            color: var(--primary);
        }

        .user-dropdown button {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: transparent;
            border: none;
            width: 100%;
            text-align: left;
            color: var(--dark);
            font-weight: 500;
            font-size: 0.95rem;
            text-decoration: none;
            cursor: pointer;
            transition: background 0.2s ease, color 0.2s ease, padding-left 0.2s ease;
        }

        .user-dropdown button:hover {
            background: rgba(67, 97, 238, 0.08);
            color: var(--primary);
            padding-left: 24px;
        }

        .dropdown-logout {
            color: #c92a2a;
        }

        .dropdown-logout:hover {
            background: rgba(201, 42, 42, 0.12);
            color: #c92a2a;
        }

        main {
            flex: 1;
            width: 100%;
            padding: 40px 0 70px;
        }

        .dashboard-shell {
            display: flex;
            align-items: flex-start;
            gap: 32px;
        }

        .dashboard-sidebar {
            flex: 0 0 260px;
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 14px 36px rgba(15, 23, 42, 0.1);
            padding: 24px 20px;
            position: sticky;
            top: 110px;
        }

        .sidebar-profile {
            text-align: center;
            margin-bottom: 24px;
        }

        .sidebar-avatar {
            width: 74px;
            height: 74px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: #fff;
            font-weight: 700;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 14px;
        }

        .sidebar-name {
            font-weight: 600;
            color: var(--dark);
        }

        .sidebar-email {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .dashboard-nav {
            display: grid;
            gap: 6px;
        }

        .dashboard-nav h4 {
            font-size: 0.85rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            color: var(--gray);
            margin: 16px 0 8px;
        }

        .dashboard-nav button {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            border: none;
            border-radius: 12px;
            background: transparent;
            color: var(--dark);
            font-weight: 500;
            font-size: 0.95rem;
            cursor: pointer;
            transition: background 0.2s ease, color 0.2s ease, padding-left 0.2s ease;
        }

        .dashboard-nav button i {
            color: var(--primary);
        }

        .dashboard-nav button.active,
        .dashboard-nav button:hover {
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
            padding-left: 16px;
        }

        .dashboard-content {
            flex: 1;
            display: grid;
            gap: 24px;
        }

        .dashboard-panel {
            display: none;
            gap: 24px;
        }

        .dashboard-panel.active {
            display: grid;
        }

        .dashboard-card {
            background: #fff;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 12px 28px rgba(15, 23, 42, 0.08);
            border: 1px solid rgba(67, 97, 238, 0.08);
        }

        .dashboard-card h3 {
            margin: 0 0 12px;
            font-size: 1.2rem;
            color: var(--secondary);
        }

        .dashboard-card p {
            margin: 6px 0;
            color: var(--gray);
        }

        .dashboard-subtext {
            color: var(--gray);
            margin-bottom: 16px;
            font-size: 0.95rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 20px;
        }

        .notification-list,
        .payment-list,
        .usage-list,
        .order-list,
        .cancellation-list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: grid;
            gap: 12px;
        }

        .notification-item,
        .order-item,
        .cancellation-item,
        .payment-list li,
        .usage-list li {
            padding: 12px 14px;
            border-radius: 12px;
            border: 1px solid rgba(67, 97, 238, 0.15);
            background: rgba(67, 97, 238, 0.05);
            color: var(--dark);
        }

        .notification-item {
            display: flex;
            gap: 12px;
        }

        .notification-item i {
            color: var(--primary);
            margin-top: 4px;
        }

        .inline-link-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            border-radius: 999px;
            border: 1px solid rgba(67, 97, 238, 0.28);
            background: #fff;
            color: var(--primary);
            font-weight: 600;
            text-decoration: none;
            margin-top: 12px;
        }

        .inline-link-btn:hover {
            background: rgba(67, 97, 238, 0.1);
        }

        .billing-form {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .billing-form .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
        }

        .form-field {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .form-field label {
            font-weight: 600;
            color: var(--secondary);
        }

        .form-field input,
        .form-field textarea {
            border: 1px solid var(--light-gray);
            border-radius: 10px;
            padding: 10px 12px;
            font-size: 0.95rem;
            background: #fff;
            transition: border-color 0.2s ease;
        }

        .form-field input:focus,
        .form-field textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.12);
        }

        .form-field textarea {
            resize: vertical;
            min-height: 90px;
        }

        .form-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .form-feedback {
            font-size: 0.9rem;
            color: var(--primary);
        }

        .dashboard-hero {
            margin-bottom: 28px;
        }

        .dashboard-hero h1 {
            margin: 0;
            font-size: 2rem;
            color: var(--secondary);
        }

        .dashboard-hero p {
            margin: 8px 0 0;
            color: var(--gray);
            max-width: 640px;
        }

        .guest-callout {
            display: none;
            background: #fff;
            padding: 24px;
            border-radius: 16px;
            border: 1px dashed rgba(67, 97, 238, 0.25);
            box-shadow: 0 10px 26px rgba(15, 23, 42, 0.08);
            text-align: center;
            gap: 16px;
        }

        .guest-callout h3 {
            margin: 0 0 8px;
        }

        @media (max-width: 1024px) {
            .dashboard-shell {
                flex-direction: column;
            }

            .dashboard-sidebar {
                position: static;
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                flex-wrap: wrap;
                gap: 16px;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }

            .dashboard-nav {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .dashboard-nav h4 {
                grid-column: 1 / -1;
            }
        }
        
        /* Subscription Management Styles */
        .subscription-status {
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }
        
        .subscription-plan-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .subscription-plan-badge #plan-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .plan-status-badge {
            padding: 4px 12px;
            border-radius: 999px;
            font-size: 0.875rem;
            font-weight: 600;
            background: #4bb543;
            color: white;
        }
        
        .plan-status-badge.expired {
            background: #dc3545;
        }
        
        .plan-status-badge.trial {
            background: #ff9800;
        }
        
        .subscription-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }
        
        .subscription-details p {
            margin: 0;
            color: var(--text-secondary);
        }
        
        .subscription-details strong {
            color: var(--text-primary);
        }
        
        .usage-tracking-section {
            margin: 32px 0;
        }
        
        .usage-tracking-section h4 {
            margin-bottom: 20px;
            color: var(--text-primary);
        }
        
        .usage-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .usage-stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
        }
        
        .usage-stat-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
        
        .usage-stat-header i {
            color: var(--primary);
        }
        
        .usage-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
        }
        
        .usage-progress-bar {
            width: 100%;
            height: 8px;
            background: var(--light-gray);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .usage-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.3s;
        }
        
        .usage-progress-fill.warning {
            background: linear-gradient(90deg, #ff9800, #f57c00);
        }
        
        .usage-progress-fill.danger {
            background: linear-gradient(90deg, #dc3545, #c82333);
        }
        
        .usage-charts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .usage-chart-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
        }
        
        .usage-chart-card h5 {
            margin: 0 0 16px 0;
            color: var(--text-primary);
        }
        
        .subscription-actions {
            margin: 32px 0;
            padding: 24px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
        }
        
        .subscription-actions h4 {
            margin-bottom: 16px;
            color: var(--text-primary);
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .subscription-alerts {
            margin-top: 24px;
        }
        
        .alert {
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .alert.warning {
            background: rgba(255, 152, 0, 0.1);
            border: 1px solid #ff9800;
            color: #f57c00;
        }
        
        .alert.danger {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid #dc3545;
            color: #c82333;
        }
        
        .alert.info {
            background: rgba(67, 97, 238, 0.1);
            border: 1px solid var(--primary);
            color: var(--primary);
        }
        
        .theme-toggle-btn:hover {
            background: rgba(67, 97, 238, 0.1);
            border-color: rgba(67, 97, 238, 0.42);
        }
        
        [data-theme="dark"] .theme-toggle-btn {
            background: #2b2b2b;
            border-color: #3a3a3a;
            color: #e5e5e5;
        }
        
        [data-theme="dark"] .theme-toggle-btn:hover {
            background: #3a3a3a;
            border-color: #4a4a4a;
        }
    </style>
<link href="css/header.css" rel="stylesheet"/>
<link href="css/theme-modern.css" rel="stylesheet"/>
<link href="css/voice-assistant.css" rel="stylesheet"/>
<script src="js/voice-assistant.js" defer></script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° - ‡§Ü‡§™‡§ï‡§æ ‡§ñ‡§æ‡§§‡§æ | Your Account - easyjpgtopdf",
      "description": "Online PDF and image conversion tools",
      "url": "https://easyjpgtopdf.com/dashboard.html",
      "inLanguage": "en-US",
      "isPartOf": {
        "@type": "WebSite",
        "name": "easyjpgtopdf",
        "url": "https://easyjpgtopdf.com"
      },
      "publisher": {
        "@type": "Organization",
        "name": "easyjpgtopdf",
        "url": "https://easyjpgtopdf.com"
      }
    }
    </script>
</head>
<body>
    <div id="global-header-placeholder"></div>


        <nav aria-label="Breadcrumb" style="padding: 15px 0; background: #f8f9ff; border-bottom: 1px solid #e2e6ff;">
        <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 24px;">
            <ol style="list-style: none; display: flex; flex-wrap: wrap; gap: 10px; margin: 0; padding: 0; align-items: center;">
                <li><a href="index.html" style="color: #4361ee; text-decoration: none; font-weight: 500; transition: color 0.3s;" onmouseover="this.style.color='#3a0ca3'" onmouseout="this.style.color='#4361ee'">Home</a></li>
                <li><span style="margin: 0 8px; color: #9ca3af;">|</span></li>
                <li><a href="login.html" style="color: #56607a; font-weight: 500; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#4361ee'" onmouseout="this.style.color='#56607a'">Sign In</a></li>
                <li><span style="margin: 0 8px; color: #9ca3af;">|</span></li>
                <li><a href="signup.html" style="color: #56607a; font-weight: 500; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#4361ee'" onmouseout="this.style.color='#56607a'">Signup</a></li>
            </ol>
        </div>
    </nav>

<main>
<div class="container">
<div class="dashboard-hero">
<h1>Welcome to your workspace</h1>
<p>Manage your account, billing preferences, payment history, and support requests from a single, streamlined dashboard.</p>
</div>
<div class="guest-callout" id="dashboard-guest">
<h3>You are not signed in</h3>
<p>Please sign in to access your dashboard and personalized tools.</p>
<div style="display: flex; justify-content: center; gap: 12px; flex-wrap: wrap;">
<a class="auth-link" href="login.html">Sign In</a>
<a class="auth-btn" href="signup.html">Create Account</a>
</div>
</div>
<section class="user-dashboard" id="user-dashboard" style="display: none;">
<div class="dashboard-shell">
<aside class="dashboard-sidebar">
<div class="sidebar-profile">
<div class="sidebar-avatar sidebar-user-initial">U</div>
<div class="sidebar-name user-name">-</div>
<div class="sidebar-email user-email">√É¬¢√¢‚Äö¬¨√¢‚Ç¨¬ù</div>
</div>
<nav aria-label="Account navigation" class="dashboard-nav">
<h4>Profile</h4>
<button class="dashboard-nav-btn active" data-dashboard-target="dashboard-overview" type="button">
<i aria-hidden="true" class="fas fa-th-large"></i>
                                Account Overview
                            </button>
<button class="dashboard-nav-btn" data-dashboard-target="dashboard-billing" type="button">
<i aria-hidden="true" class="fas fa-file-invoice"></i>
                                Billing Details
                            </button>
<button class="dashboard-nav-btn" data-dashboard-target="dashboard-donation" type="button">
<i aria-hidden="true" class="fas fa-heart"></i>
                                Make a Donation
                            </button>
<button class="dashboard-nav-btn" data-dashboard-target="dashboard-payments" type="button">
<i aria-hidden="true" class="fas fa-wallet"></i>
                                Payment History
                            </button>
<button class="dashboard-nav-btn" data-dashboard-target="dashboard-orders" type="button">
<i aria-hidden="true" class="fas fa-clipboard-list"></i>
                                Orders &amp; Subscriptions
                            </button>
<h4>Support</h4>
<button class="dashboard-nav-btn" data-dashboard-target="dashboard-support" type="button">
<i aria-hidden="true" class="fas fa-life-ring"></i>
                                Support &amp; Notifications
                            </button>
</nav>
</aside>
<div class="dashboard-content">
<div class="dashboard-panel active" id="dashboard-overview">
<div class="dashboard-card">
<h3>Profile Overview</h3>
<p><strong>‡§®‡§æ‡§Æ:</strong> <span class="user-name">-</span></p>
<p><strong>Email:</strong> <span class="user-email">√É¬¢√¢‚Äö¬¨√¢‚Ç¨¬ù</span></p>
<p><strong>Plan:</strong> <span class="user-plan">Free</span></p>
<p><strong>Total Conversions:</strong> <span class="user-conversions">0</span></p>
<p><strong>Billing Address:</strong> <span class="user-billing-address">Not added yet.</span></p>
</div>
<div class="dashboard-card">
<h3>Recent Tool Usage</h3>
<ul class="usage-list">
<li>No activity recorded yet.</li>
</ul>
</div>
</div>
<div class="dashboard-panel" id="dashboard-billing">
<div class="dashboard-card" id="billing-card">
<h3>Billing Address</h3>
<p class="dashboard-subtext">Provide your address for invoices and compliance. This information remains confidential.</p>
<form class="billing-form" id="billing-form">
<div class="form-grid">
<div class="form-field">
<label for="billing-name">Full Name</label>
<input id="billing-name" name="billing-name" placeholder="Enter full legal name" type="text"/>
</div>
<div class="form-field">
<label for="billing-phone">Phone (optional)</label>
<input id="billing-phone" name="billing-phone" placeholder="e.g. +91-9876543210" type="tel"/>
</div>
<div class="form-field">
<label for="billing-line1">Address Line 1</label>
<input id="billing-line1" name="billing-line1" placeholder="House / Street" type="text"/>
</div>
<div class="form-field">
<label for="billing-line2">Address Line 2</label>
<input id="billing-line2" name="billing-line2" placeholder="Area / Landmark (optional)" type="text"/>
</div>
<div class="form-field">
<label for="billing-city">City</label>
<input id="billing-city" name="billing-city" placeholder="City" type="text"/>
</div>
<div class="form-field">
<label for="billing-state">State</label>
<input id="billing-state" name="billing-state" placeholder="State / Province" type="text"/>
</div>
<div class="form-field">
<label for="billing-postal">Postal Code</label>
<input id="billing-postal" name="billing-postal" placeholder="PIN / ZIP" type="text"/>
</div>
<div class="form-field">
<label for="billing-country">Country</label>
<input id="billing-country" name="billing-country" placeholder="Country" type="text" value="India"/>
</div>
</div>
<div class="form-field">
<label for="billing-notes">Additional Notes (optional)</label>
<textarea id="billing-notes" name="billing-notes" placeholder="Apartment, floor, GSTIN or anything we should mention on invoices."></textarea>
</div>
<div class="form-actions">
<button class="btn btn-primary" id="billing-save-button" type="submit">Save Address</button>
<p class="form-feedback" hidden="" id="billing-message"></p>
</div>
</form>
</div>
</div>
<div class="dashboard-panel" id="dashboard-donation">
<div class="dashboard-card">
<h3><i class="fas fa-heart"></i> Support easyjpgtopdf</h3>
<p style="color: #6c757d; margin: 12px 0;">Your donation helps us maintain free PDF and image tools for everyone.</p>
<a class="inline-link-btn" href="index.html#donation-section" style="background: linear-gradient(135deg, #4361ee, #f72585); color: white; display: inline-block; padding: 10px 20px; border-radius: 6px; text-decoration: none;" title="Opens donation form with Razorpay payment">
<i class="fas fa-heart"></i> Make a Donation
                                </a>
<p style="color: #999; font-size: 0.85rem; margin-top: 10px;">
<i class="fas fa-info-circle"></i> You'll be redirected to the donation page where you can choose your amount and proceed with secure Razorpay payment.
                                </p>
</div>
</div>
<div class="dashboard-panel" id="dashboard-payments">
<div class="dashboard-card" id="payment-card">
<h3>Payment History</h3>
<ul class="payment-list">
<li>No payments found yet.</li>
</ul>
</div>
</div>
<div class="dashboard-panel" id="dashboard-orders">
<div class="dashboard-card" id="subscription-card">
<h3>Subscription Management</h3>
<div id="subscription-status" class="subscription-status">
<div class="subscription-plan-badge" id="plan-badge">
<span id="plan-name">Free</span>
<span id="plan-status" class="plan-status-badge">Active</span>
</div>
<div class="subscription-details">
<p><strong>Current Plan:</strong> <span id="current-plan">Free</span></p>
<p><strong>Status:</strong> <span id="subscription-status-text">Active</span></p>
<p><strong>Expires At:</strong> <span id="subscription-expires">Never</span></p>
<p><strong>Days Remaining:</strong> <span id="days-remaining">‚àû</span></p>
</div>
</div>

<div class="usage-tracking-section">
<h4>Usage Tracking</h4>
<div class="usage-stats-grid">
<div class="usage-stat-card">
<div class="usage-stat-header">
<i class="fas fa-file-pdf"></i>
<span>PDFs This Month</span>
</div>
<div class="usage-stat-value">
<span id="pdfs-used">0</span> / <span id="pdfs-limit">10</span>
</div>
<div class="usage-progress-bar">
<div class="usage-progress-fill" id="pdfs-progress" style="width: 0%"></div>
</div>
</div>
<div class="usage-stat-card">
<div class="usage-stat-header">
<i class="fas fa-database"></i>
<span>Storage Used</span>
</div>
<div class="usage-stat-value">
<span id="storage-used">0</span> GB / <span id="storage-limit">1</span> GB
</div>
<div class="usage-progress-bar">
<div class="usage-progress-fill" id="storage-progress" style="width: 0%"></div>
</div>
</div>
<div class="usage-stat-card">
<div class="usage-stat-header">
<i class="fas fa-code"></i>
<span>API Calls This Month</span>
</div>
<div class="usage-stat-value">
<span id="api-used">0</span> / <span id="api-limit">100</span>
</div>
<div class="usage-progress-bar">
<div class="usage-progress-fill" id="api-progress" style="width: 0%"></div>
</div>
</div>
<div class="usage-stat-card">
<div class="usage-stat-header">
<i class="fas fa-image"></i>
<span>Image Background Remover</span>
</div>
<div class="usage-stat-value">
<span id="image-remover-used">0</span> / <span id="image-remover-limit">40</span>
</div>
<div class="usage-progress-bar">
<div class="usage-progress-fill" id="image-remover-progress" style="width: 0%"></div>
</div>
<div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 8px;">
Max file size: <span id="image-remover-max-size">1 MB</span>
</div>
<div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 4px;">
Monthly upload: <span id="image-remover-upload-used">0</span> MB / <span id="image-remover-upload-limit">10</span> MB
</div>
<div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 4px;">
Monthly download: <span id="image-remover-download-used">0</span> MB / <span id="image-remover-download-limit">2</span> MB
</div>
</div>
</div>

<div class="usage-charts">
<div class="usage-chart-card">
<h5>Daily Usage (Last 7 Days)</h5>
<canvas id="daily-usage-chart" width="400" height="200"></canvas>
</div>
<div class="usage-chart-card">
<h5>Monthly Usage (Last 6 Months)</h5>
<canvas id="monthly-usage-chart" width="400" height="200"></canvas>
</div>
</div>
</div>

<div class="subscription-actions">
<h4>Manage Subscription</h4>
<div class="action-buttons">
<a href="pricing.html" class="btn btn-primary">
<i class="fas fa-arrow-up"></i> Upgrade Plan
</a>
<button id="cancel-subscription-btn" class="btn btn-outline" style="display: none;">
<i class="fas fa-times"></i> Cancel Subscription
</button>
<button id="renew-subscription-btn" class="btn btn-outline" style="display: none;">
<i class="fas fa-sync"></i> Renew Subscription
</button>
</div>
</div>

<div class="subscription-alerts" id="subscription-alerts">
<!-- Alerts will be dynamically inserted here -->
</div>
</div>
</div>
<div class="dashboard-panel" id="dashboard-support">
<div class="dashboard-card">
<h3>Cancellation &amp; Support</h3>
<ul class="cancellation-list">
<li class="cancellation-item">
<strong>Pause auto-renewal anytime</strong>
                                        If you upgrade to premium later, visit your plan summary to cancel before the next billing date.
                                    </li>
<li class="cancellation-item">
<strong>Raise refund requests within 7 days</strong>
                                        Email support@easyjpgtopdf.com with payment reference and reason for faster resolution.
                                    </li>
</ul>
<a class="inline-link-btn" href="mailto:support@easyjpgtopdf.com">
<i class="fas fa-headset"></i>
                                    Contact support desk
                                </a>
</div>
<div class="dashboard-card">
<h3>Help &amp; Notifications</h3>
<ul class="notification-list">
<li class="notification-item">
<i class="fas fa-shield-alt"></i>
<div>
<strong>KYC &amp; Compliance Reminder</strong>
                                            Keep your Razorpay and PayU documents updated. Settlement alerts and compliance notices will appear here after you activate the gateways.
                                        </div>
</li>
<li class="notification-item">
<i class="fas fa-bell"></i>
<div>
<strong>Payment Status Updates</strong>
                                            Successful donations and premium purchases will show up under Payment History within a few minutes of gateway confirmation.
                                        </div>
</li>
<li class="notification-item">
<i class="fas fa-life-ring"></i>
<div>
<strong>Need Assistance?</strong>
                                            Reach our support team within 24 hours for billing disputes or urgent refunds. We reply from support@easyjpgtopdf.com.
                                        </div>
</li>
</ul>
<div class="notification-help-links">
<a href="mailto:support@easyjpgtopdf.com">
<i class="fas √É √Ç¬¶√Ç¬π√É √Ç¬¶√Ç¬ø√É √Ç¬¶√Ö¬°"></i>
                                        Contact Support
                                    </a>
<a href="faq.html">
<i class="fas fa-question-circle"></i>
                                        Browse FAQs
                                    </a>
</div>
</div>
</div>
</div>
</div>
</section>
</div>

    <div class="trust-badges" style="text-align: center; padding: 20px; background: linear-gradient(135deg, #f8f9ff, #ffffff); border-radius: 12px; margin: 30px 0; border: 2px solid #e2e6ff;">
        <div style="display: flex; justify-content: center; align-items: center; gap: 40px; flex-wrap: wrap;">
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-shield-alt" style="font-size: 2rem; color: #4361ee;"></i>
                <div style="text-align: left;">
                    <div style="color: #0b1630; font-weight: 600; font-size: 1.1rem;">SSL Secured</div>
                    <div style="color: #56607a; font-size: 0.9rem;">256-bit Encryption</div>
                </div>
            </div>
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-lock" style="font-size: 2rem; color: #4361ee;"></i>
                <div style="text-align: left;">
                    <div style="color: #0b1630; font-weight: 600; font-size: 1.1rem;">100% Secure</div>
                    <div style="color: #56607a; font-size: 0.9rem;">Files Auto-Deleted</div>
                </div>
            </div>
            
        </div>
    </div>
</main>
<script defer="" src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script src="js/config.js" type="module"></script>
<script src="js/firebase-init.js" type="module"></script>
<script src="js/auth.js" type="module"></script>
<script type="module">
        import { auth } from './js/firebase-init.js';
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js';
        import { getFirestore, collection, query, where, getDocs, orderBy, doc, getDoc } from 'https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js';

        // Real-time dashboard data updater
        async function updateDashboardData(user) {
            if (!user) return;

            try {
                const firestore = getFirestore();
                
                // Update Profile Overview section
                updateProfileOverview(user, firestore);
                
                // Load and display payment history
                await loadPaymentHistory(user, firestore);
                
                // Load user statistics
                await loadUserStatistics(user, firestore);
                
                // Load billing address if exists
                await loadBillingAddress(user, firestore);
                
            } catch (error) {
                console.error('Failed to update dashboard data:', error);
            }
        }

        // Update Profile Overview with real-time data
        function updateProfileOverview(user, firestore) {
            // Update all user-name elements
            document.querySelectorAll('.user-name').forEach(el => {
                el.textContent = user.displayName || user.email || 'User';
            });
            
            // Update all user-email elements
            document.querySelectorAll('.user-email').forEach(el => {
                el.textContent = user.email || '‚Äî';
            });
            
            // Update user plan will be handled by dashboard-subscription.js
        }

        // Load user statistics from Firestore
        async function loadUserStatistics(user, firestore) {
            try {
                const userDocRef = doc(firestore, 'users', user.uid);
                const userDoc = await getDoc(userDocRef);
                
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    
                    // Update conversions count
                    const conversionsEl = document.querySelector('.user-conversions');
                    if (conversionsEl) {
                        conversionsEl.textContent = userData.totalConversions || 0;
                    }
                    
                    // Update billing address preview
                    const billingAddressEl = document.querySelector('.user-billing-address');
                    if (billingAddressEl && userData.billingAddress) {
                        const addr = userData.billingAddress;
                        billingAddressEl.textContent = `${addr.city || ''}, ${addr.state || ''}, ${addr.country || ''}`.trim() || 'Not added yet.';
                    }
                    
                    // Update recent tool usage if data exists
                    if (userData.recentTools && userData.recentTools.length > 0) {
                        const usageList = document.querySelector('.usage-list');
                        if (usageList) {
                            usageList.innerHTML = userData.recentTools.slice(0, 5).map(tool => {
                                const date = tool.timestamp?.toDate?.() || new Date();
                                return `<li><strong>${tool.toolName}</strong> - ${date.toLocaleDateString()}</li>`;
                            }).join('');
                        }
                    }
                }
            } catch (error) {
                console.error('Failed to load user statistics:', error);
            }
        }

        // Load billing address from Firestore
        async function loadBillingAddress(user, firestore) {
            try {
                const userDocRef = doc(firestore, 'users', user.uid);
                const userDoc = await getDoc(userDocRef);
                
                if (userDoc.exists() && userDoc.data().billingAddress) {
                    const addr = userDoc.data().billingAddress;
                    
                    // Populate billing form
                    document.getElementById('billing-name').value = addr.name || '';
                    document.getElementById('billing-phone').value = addr.phone || '';
                    document.getElementById('billing-line1').value = addr.line1 || '';
                    document.getElementById('billing-line2').value = addr.line2 || '';
                    document.getElementById('billing-city').value = addr.city || '';
                    document.getElementById('billing-state').value = addr.state || '';
                    document.getElementById('billing-postal').value = addr.postal || '';
                    document.getElementById('billing-country').value = addr.country || 'India';
                    document.getElementById('billing-notes').value = addr.notes || '';
                }
            } catch (error) {
                console.error('Failed to load billing address:', error);
            }
        }

        // Load payment history with real-time updates
        async function loadPaymentHistory(user, firestore) {
            try {
                console.log('üìä Loading payment history for user:', user.uid);
                
                const paymentsRef = collection(firestore, 'payments', user.uid, 'records');
                
                // Query with fallback - try createdAt, then updatedAt
                let querySnapshot;
                try {
                    const q = query(paymentsRef, orderBy('createdAt', 'desc'));
                    querySnapshot = await getDocs(q);
                } catch (orderError) {
                    console.warn('‚ö†Ô∏è createdAt orderBy failed, trying without order:', orderError);
                    // Fallback: get all documents without ordering
                    querySnapshot = await getDocs(paymentsRef);
                }

                const paymentList = document.querySelector('.payment-list');
                if (!paymentList) {
                    console.error('‚ùå Payment list element not found');
                    return;
                }

                console.log('üì¶ Found payments:', querySnapshot.size);

                if (querySnapshot.empty) {
                    paymentList.innerHTML = '<li style="color: #999; padding: 20px; text-align: center;"><i class="fas fa-info-circle"></i> No payment history found yet.</li>';
                    return;
                }

                // Convert to array and sort manually if needed
                const payments = [];
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    payments.push({ id: doc.id, ...data });
                });

                // Sort by createdAt if available
                payments.sort((a, b) => {
                    const dateA = a.createdAt?.toDate?.() || a.createdAt || new Date(0);
                    const dateB = b.createdAt?.toDate?.() || b.createdAt || new Date(0);
                    return dateB - dateA; // Descending (newest first)
                });

                console.log('‚úÖ Payments sorted:', payments.length);

                let html = '';
                payments.forEach((data) => {
                    // Handle different date formats
                    let date;
                    if (data.createdAt?.toDate) {
                        date = data.createdAt.toDate();
                    } else if (data.createdAt) {
                        date = new Date(data.createdAt);
                    } else if (data.updatedAt?.toDate) {
                        date = data.updatedAt.toDate();
                    } else if (data.updatedAt) {
                        date = new Date(data.updatedAt);
                    } else {
                        date = new Date();
                    }

                    const dateStr = date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
                    const timeStr = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                    
                    const amount = data.amount || 0;
                    const currency = data.currency || 'INR';
                    const status = data.status || data.paymentStatus || 'pending';
                    const paymentMethod = data.method || 'razorpay';
                    const orderId = data.orderId || data.id;

                    const statusClass = status === 'succeeded' || status === 'captured' ? 'success' : status === 'failed' ? 'failed' : 'pending';
                    const statusText = status === 'succeeded' || status === 'captured' ? '‚úì Completed' : status === 'failed' ? '‚úó Failed' : '‚è≥ Pending';

                    console.log('üí≥ Payment:', { orderId, amount, status, date: dateStr });

                    html += `
                        <li class="payment-item" style="border-left: 4px solid ${statusClass === 'success' ? '#28a745' : statusClass === 'failed' ? '#dc3545' : '#ffc107'}; padding: 16px; margin: 16px 0; background: ${statusClass === 'success' ? '#f8fff9' : statusClass === 'failed' ? '#fff5f5' : '#fffef5'}; border-radius: 8px;">
                            <div style="display: flex; justify-content: space-between; align-items: start; gap: 20px;">
                                <div style="flex: 1;">
                                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                        <strong style="color: #333; font-size: 18px;">${currency} ${amount}</strong>
                                        <span class="status-badge" style="background: ${status === 'succeeded' ? '#d4edda' : status === 'failed' ? '#f8d7da' : '#fff3cd'}; color: ${status === 'succeeded' ? '#155724' : status === 'failed' ? '#721c24' : '#856404'}; padding: 4px 12px; border-radius: 12px; font-size: 11px; font-weight: 600;">
                                            ${statusText}
                                        </span>
                                    </div>
                                    <p style="margin: 6px 0; font-size: 13px; color: #666;">
                                        <i class="fas fa-calendar-alt"></i> ${dateStr} at ${timeStr}
                                    </p>
                                    <p style="margin: 6px 0; font-size: 12px; color: #999;">
                                        <i class="fas fa-receipt"></i> Order ID: ${orderId.substring(0, 16)}...
                                    </p>
                                    <p style="margin: 6px 0; font-size: 12px; color: #999;">
                                        <i class="fas fa-credit-card"></i> ${paymentMethod.toUpperCase()}
                                    </p>
                                    ${data.contact ? `
                                    <p style="margin: 6px 0; font-size: 12px; color: #999;">
                                        <i class="fas fa-phone"></i> ${data.contact}
                                    </p>
                                    ` : ''}
                                    ${data.email ? `
                                    <p style="margin: 6px 0; font-size: 12px; color: #999;">
                                        <i class="fas fa-envelope"></i> ${data.email}
                                    </p>
                                    ` : ''}
                                </div>
                                ${status === 'succeeded' ? `
                                    <a href="payment-receipt.html?txn_id=${data.paymentId || orderId}&amount=${amount}&currency=${currency}&method=${paymentMethod}&email=${data.email || ''}&contact=${data.contact || ''}" style="font-size: 13px; color: #4361ee; text-decoration: none; font-weight: 600; padding: 8px 16px; border: 2px solid #4361ee; border-radius: 6px; transition: all 0.3s;" onmouseover="this.style.background='#4361ee'; this.style.color='white';" onmouseout="this.style.background='transparent'; this.style.color='#4361ee';">
                                        <i class="fas fa-file-invoice"></i> View Receipt
                                    </a>
                                ` : ''}
                            </div>
                        </li>
                    `;
                });

                paymentList.innerHTML = html;
            } catch (error) {
                console.error('Failed to load payment history:', error);
                const paymentList = document.querySelector('.payment-list');
                if (paymentList) {
                    paymentList.innerHTML = '<li style="color: #dc3545; padding: 20px;"><i class="fas fa-exclamation-triangle"></i> Failed to load payment history. Please refresh the page.</li>';
                }
            }
        }

        // Main auth state listener - triggers all real-time updates
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                // Update all dashboard data in real-time
                await updateDashboardData(user);
                
                // Show success message after data loads
                console.log('‚úÖ Dashboard data loaded successfully for:', user.email);
            } else {
                console.log('‚ö†Ô∏è No user logged in - dashboard hidden');
            }
        });

        // Handle dashboard navigation on page load
        document.addEventListener('DOMContentLoaded', () => {
            const hash = window.location.hash.substring(1); // Remove #
            if (hash && hash.startsWith('dashboard-')) {
                // Find the button with matching target
                const targetButton = document.querySelector(`.dashboard-nav-btn[data-dashboard-target="${hash}"]`);
                if (targetButton) {
                    // Remove active from all buttons
                    document.querySelectorAll('.dashboard-nav-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    // Add active to target button
                    targetButton.classList.add('active');
                    
                    // Show target panel
                    document.querySelectorAll('.dashboard-panel').forEach(panel => {
                        panel.classList.remove('active');
                    });
                    const targetPanel = document.getElementById(hash);
                    if (targetPanel) {
                        targetPanel.classList.add('active');
                        // Scroll to panel
                        setTimeout(() => {
                            targetPanel.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }, 100);
                    }
                }
            }
        });

        // Handle hash changes (when clicking links)
        window.addEventListener('hashchange', () => {
            const hash = window.location.hash.substring(1);
            if (hash && hash.startsWith('dashboard-')) {
                const targetButton = document.querySelector(`.dashboard-nav-btn[data-dashboard-target="${hash}"]`);
                if (targetButton) {
                    document.querySelectorAll('.dashboard-nav-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    targetButton.classList.add('active');
                    
                    document.querySelectorAll('.dashboard-panel').forEach(panel => {
                        panel.classList.remove('active');
                    });
                    const targetPanel = document.getElementById(hash);
                    if (targetPanel) {
                        targetPanel.classList.add('active');
                        targetPanel.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }
            }
        });
        
        // Real-time update indicator
        console.log('üîÑ Dashboard real-time updater initialized');
        
        // Load Subscription Data
        async function loadSubscriptionData(user) {
            try {
                const apiBaseUrl = window.location.origin;
                const token = await user.getIdToken();
                
                const response = await fetch(`${apiBaseUrl}/api/subscription/current`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success && data.subscription) {
                        updateSubscriptionUI(data.subscription);
                        await loadUsageTracking(user);
                    }
                }
            } catch (error) {
                console.error('Failed to load subscription:', error);
            }
        }
        
        function updateSubscriptionUI(subscription) {
            document.getElementById('plan-name').textContent = subscription.planName || subscription.plan;
            document.getElementById('current-plan').textContent = subscription.planName || subscription.plan;
            document.getElementById('subscription-status-text').textContent = subscription.status;
            
            const statusBadge = document.getElementById('plan-status');
            statusBadge.textContent = subscription.status;
            statusBadge.className = 'plan-status-badge ' + (subscription.status === 'expired' ? 'expired' : subscription.status === 'trial' ? 'trial' : '');
            
            if (subscription.expiresAt) {
                const expiresDate = new Date(subscription.expiresAt);
                document.getElementById('subscription-expires').textContent = expiresDate.toLocaleDateString();
                
                const daysRemaining = Math.ceil((expiresDate - new Date()) / (1000 * 60 * 60 * 24));
                document.getElementById('days-remaining').textContent = daysRemaining > 0 ? daysRemaining : 0;
                
                if (daysRemaining <= 7 && daysRemaining > 0) {
                    showAlert('warning', `Your subscription expires in ${daysRemaining} days. Renew now to continue using premium features.`);
                }
            } else {
                document.getElementById('subscription-expires').textContent = 'Never';
                document.getElementById('days-remaining').textContent = '‚àû';
            }
            
            // Update usage limits
            if (subscription.usageLimits) {
                document.getElementById('pdfs-limit').textContent = subscription.usageLimits.pdfsPerMonth === -1 ? '‚àû' : subscription.usageLimits.pdfsPerMonth;
                document.getElementById('storage-limit').textContent = subscription.usageLimits.storageGB === -1 ? '‚àû' : subscription.usageLimits.storageGB;
                document.getElementById('api-limit').textContent = subscription.usageLimits.apiCallsPerMonth === -1 ? '‚àû' : subscription.usageLimits.apiCallsPerMonth;
            }
            
            // Update image remover limits based on plan
            const planFeatures = subscription.planFeatures || {};
            const imageRemover = planFeatures.imageRemover || {};
            const imageRemoverLimit = imageRemover.quotaPerMonth === Infinity ? '‚àû' : (imageRemover.quotaPerMonth || 40);
            const imageRemoverMaxSize = imageRemover.maxFileSize === Infinity ? 'No limit' : 
                imageRemover.maxFileSize ? `${Math.round(imageRemover.maxFileSize / (1024 * 1024))} MB` : '1 MB';
            const imageRemoverUploadLimit = imageRemover.monthlyUploadLimit === Infinity ? '‚àû' : 
                imageRemover.monthlyUploadLimit ? `${Math.round(imageRemover.monthlyUploadLimit / (1024 * 1024))} MB` : '10 MB';
            const imageRemoverDownloadLimit = imageRemover.monthlyDownloadLimit === Infinity ? '‚àû' : 
                imageRemover.monthlyDownloadLimit ? `${Math.round(imageRemover.monthlyDownloadLimit / (1024 * 1024))} MB` : '2 MB';
            
            document.getElementById('image-remover-limit').textContent = imageRemoverLimit;
            document.getElementById('image-remover-max-size').textContent = imageRemoverMaxSize;
            document.getElementById('image-remover-upload-limit').textContent = imageRemoverUploadLimit;
            document.getElementById('image-remover-download-limit').textContent = imageRemoverDownloadLimit;
            
            // Show/hide action buttons
            if (subscription.status === 'active' && subscription.plan !== 'free') {
                document.getElementById('cancel-subscription-btn').style.display = 'inline-block';
            }
            if (subscription.status === 'expired' || subscription.status === 'cancelled') {
                document.getElementById('renew-subscription-btn').style.display = 'inline-block';
            }
        }
        
        async function loadUsageTracking(user) {
            try {
                const apiBaseUrl = window.location.origin;
                const token = await user.getIdToken();
                
                const response = await fetch(`${apiBaseUrl}/api/subscription/usage`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success && data.usage) {
                        updateUsageUI(data.usage);
                        updateUsageCharts(data.dailyUsage, data.monthlyUsage);
                    }
                }
            } catch (error) {
                console.error('Failed to load usage tracking:', error);
            }
        }
        
        function updateUsageUI(usage) {
            // Update PDFs usage
            const pdfsUsed = usage.currentUsage?.pdfsThisMonth || 0;
            const pdfsLimit = usage.usageLimits?.pdfsPerMonth || 10;
            document.getElementById('pdfs-used').textContent = pdfsUsed;
            const pdfsPercent = pdfsLimit === -1 ? 0 : Math.min((pdfsUsed / pdfsLimit) * 100, 100);
            const pdfsProgress = document.getElementById('pdfs-progress');
            pdfsProgress.style.width = pdfsPercent + '%';
            if (pdfsPercent >= 90) pdfsProgress.className = 'usage-progress-fill danger';
            else if (pdfsPercent >= 70) pdfsProgress.className = 'usage-progress-fill warning';
            
            // Update Storage usage
            const storageUsed = usage.currentUsage?.storageUsedGB || 0;
            const storageLimit = usage.usageLimits?.storageGB || 1;
            document.getElementById('storage-used').textContent = storageUsed.toFixed(2);
            const storagePercent = storageLimit === -1 ? 0 : Math.min((storageUsed / storageLimit) * 100, 100);
            const storageProgress = document.getElementById('storage-progress');
            storageProgress.style.width = storagePercent + '%';
            if (storagePercent >= 90) storageProgress.className = 'usage-progress-fill danger';
            else if (storagePercent >= 70) storageProgress.className = 'usage-progress-fill warning';
            
            // Update API usage
            const apiUsed = usage.currentUsage?.apiCallsThisMonth || 0;
            const apiLimit = usage.usageLimits?.apiCallsPerMonth || 100;
            document.getElementById('api-used').textContent = apiUsed;
            const apiPercent = apiLimit === -1 ? 0 : Math.min((apiUsed / apiLimit) * 100, 100);
            const apiProgress = document.getElementById('api-progress');
            apiProgress.style.width = apiPercent + '%';
            if (apiPercent >= 90) apiProgress.className = 'usage-progress-fill danger';
            else if (apiPercent >= 70) apiProgress.className = 'usage-progress-fill warning';
            
            // Update Image Background Remover usage
            const imageRemoverUsed = usage.currentUsage?.imageRemoverThisMonth || 0;
            const imageRemoverLimit = usage.usageLimits?.imageRemoverPerMonth || 40;
            document.getElementById('image-remover-used').textContent = imageRemoverUsed;
            const imageRemoverPercent = imageRemoverLimit === -1 || imageRemoverLimit === Infinity ? 0 : Math.min((imageRemoverUsed / imageRemoverLimit) * 100, 100);
            const imageRemoverProgress = document.getElementById('image-remover-progress');
            imageRemoverProgress.style.width = imageRemoverPercent + '%';
            if (imageRemoverPercent >= 90) imageRemoverProgress.className = 'usage-progress-fill danger';
            else if (imageRemoverPercent >= 70) imageRemoverProgress.className = 'usage-progress-fill warning';
            
            // Update monthly upload/download usage
            const imageRemoverUploadUsed = usage.currentUsage?.imageRemoverUploadMB || 0;
            const imageRemoverUploadLimit = usage.usageLimits?.imageRemoverMonthlyUploadMB || 10;
            document.getElementById('image-remover-upload-used').textContent = imageRemoverUploadUsed.toFixed(2);
            
            const imageRemoverDownloadUsed = usage.currentUsage?.imageRemoverDownloadMB || 0;
            const imageRemoverDownloadLimit = usage.usageLimits?.imageRemoverMonthlyDownloadMB || 2;
            document.getElementById('image-remover-download-used').textContent = imageRemoverDownloadUsed.toFixed(2);
            
            // Show alerts if limits exceeded
            if (pdfsPercent >= 100 || storagePercent >= 100 || apiPercent >= 100 || imageRemoverPercent >= 100) {
                showAlert('danger', 'You have exceeded your usage limits. Please upgrade your plan or wait for the next billing cycle.');
            } else if (pdfsPercent >= 90 || storagePercent >= 90 || apiPercent >= 90 || imageRemoverPercent >= 90) {
                showAlert('warning', 'You are approaching your usage limits. Consider upgrading your plan.');
            }
        }
        
        function updateUsageCharts(dailyUsage, monthlyUsage) {
            // Simple chart implementation (can be enhanced with Chart.js)
            const dailyCanvas = document.getElementById('daily-usage-chart');
            const monthlyCanvas = document.getElementById('monthly-usage-chart');
            
            if (dailyCanvas && dailyUsage) {
                const ctx = dailyCanvas.getContext('2d');
                drawSimpleChart(ctx, dailyUsage, 'Daily PDF Usage');
            }
            
            if (monthlyCanvas && monthlyUsage) {
                const ctx = monthlyCanvas.getContext('2d');
                drawSimpleChart(ctx, monthlyUsage, 'Monthly PDF Usage');
            }
        }
        
        function drawSimpleChart(ctx, data, label) {
            const width = ctx.canvas.width;
            const height = ctx.canvas.height;
            const maxValue = Math.max(...data.map(d => d.value || 0), 1);
            
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = 'var(--text-secondary)';
            ctx.font = '12px Arial';
            ctx.fillText(label, 10, 20);
            
            const barWidth = width / data.length - 2;
            data.forEach((item, index) => {
                const barHeight = (item.value || 0) / maxValue * (height - 40);
                ctx.fillStyle = 'var(--primary)';
                ctx.fillRect(index * (barWidth + 2) + 10, height - barHeight - 20, barWidth, barHeight);
            });
        }
        
        function showAlert(type, message) {
            const alertsContainer = document.getElementById('subscription-alerts');
            if (!alertsContainer) return;
            
            const alert = document.createElement('div');
            alert.className = `alert ${type}`;
            alert.innerHTML = `<i class="fas fa-${type === 'danger' ? 'exclamation-triangle' : type === 'warning' ? 'exclamation-circle' : 'info-circle'}"></i><span>${message}</span>`;
            alertsContainer.appendChild(alert);
            
            setTimeout(() => alert.remove(), 10000);
        }
        
        // Cancel subscription handler
        document.getElementById('cancel-subscription-btn')?.addEventListener('click', async function() {
            if (!confirm('Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period.')) {
                return;
            }
            
            try {
                const user = auth.currentUser;
                if (!user) return;
                
                const token = await user.getIdToken();
                const apiBaseUrl = window.location.origin;
                
                const response = await fetch(`${apiBaseUrl}/api/subscription/cancel`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        showAlert('info', 'Subscription cancelled successfully. You will retain access until the end of your billing period.');
                        await loadSubscriptionData(user);
                    }
                }
            } catch (error) {
                console.error('Failed to cancel subscription:', error);
                showAlert('danger', 'Failed to cancel subscription. Please try again or contact support.');
            }
        });
        
        // Load subscription data when user is authenticated
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                await loadSubscriptionData(user);
            }
        });
        
        // Theme Toggle Functionality
        function initTheme() {
            const savedTheme = localStorage.getItem('site-theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeUI(savedTheme);
            updateDashboardTheme(savedTheme);
        }
        
        function updateThemeUI(theme) {
            const themeIcon = document.getElementById('theme-icon');
            const themeText = document.getElementById('theme-text');
            
            if (themeIcon && themeText) {
                if (theme === 'light') {
                    themeIcon.className = 'fas fa-sun';
                    themeText.textContent = 'Light';
                } else {
                    themeIcon.className = 'fas fa-moon';
                    themeText.textContent = 'Dark';
                }
            }
        }
        
        function updateDashboardTheme(theme) {
            // Update dashboard cards and panels
            const cards = document.querySelectorAll('.dashboard-card, .dashboard-panel');
            cards.forEach(card => {
                if (theme === 'dark') {
                    card.style.background = 'var(--bg-secondary)';
                    card.style.color = 'var(--text-primary)';
                } else {
                    card.style.background = '';
                    card.style.color = '';
                }
            });
        }
        
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('site-theme', newTheme);
            updateThemeUI(newTheme);
            updateDashboardTheme(newTheme);
        }
        
        // Initialize theme on page load
        initTheme();
        
        // Theme toggle button event listener
        const themeToggleBtn = document.getElementById('theme-toggle-btn');
        if (themeToggleBtn) {
            themeToggleBtn.addEventListener('click', toggleTheme);
        }
    </script>
    

    <footer>
        <div class="container footer-inner">
            <div class="footer-company-links">
                <span>Company</span>
                <a href="index.html#about">About Us</a>
                <a href="index.html#contact">Contact</a>
                <a href="pricing.html">Pricing</a>
                <a href="privacy-policy.html">Privacy Policy</a>
                <a href="terms-of-service.html">Terms of Service</a>
                <a href="dmca-en.html">DMCA</a>
                <a href="blog.html">Blog</a>
            </div>
            <p class="footer-brand-line">&copy; easyjpgtopdf &mdash; Free PDF &amp; Image Tools for everyone. All rights reserved.</p>
            <p class="footer-credits">
                Thanks to Font Awesome, Google Fonts, jsPDF, pdf.js, pdf-lib, Mammoth, Tesseract.js, IMG.LY, Firebase, Unsplash photographers, and every open-source contributor powering this site.
                <a href="attributions.html">See full acknowledgements</a>.
            </p>
        </div>
    </footer>
    <script src="js/global-components.js"></script>
</body>
</html>
