<!DOCTYPE html>
<html>
<head>
    <title>Backend Connection Test</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>Backend Connection Test</h1>
    <div id="results"></div>
    <script>
        const CLOUDRUN_API_URL = 'https://bg-remover-api-iwumaktavq-uc.a.run.app';
        const results = document.getElementById('results');
        
        function addStatus(message, type) {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = message;
            results.appendChild(div);
        }
        
        async function testBackend() {
            addStatus('Testing Backend Connection...', 'info');
            
            // Test 1: Health Check
            try {
                const healthResponse = await fetch(CLOUDRUN_API_URL + '/health', {
                    method: 'GET',
                    headers: { 'Accept': 'application/json' },
                    mode: 'cors'
                });
                
                if (healthResponse.ok) {
                    const healthData = await healthResponse.json();
                    addStatus(`✅ Health Check: ${JSON.stringify(healthData, null, 2)}`, 'success');
                    addStatus(`✅ Model: ${healthData.model || 'u2net'}`, 'success');
                    addStatus(`✅ Service: ${healthData.service || 'N/A'}`, 'success');
                } else {
                    addStatus(`❌ Health Check Failed: ${healthResponse.status}`, 'error');
                }
            } catch (error) {
                addStatus(`❌ Health Check Error: ${error.message}`, 'error');
            }
            
            // Test 2: Home Endpoint
            try {
                const homeResponse = await fetch(CLOUDRUN_API_URL + '/', {
                    method: 'GET',
                    headers: { 'Accept': 'application/json' },
                    mode: 'cors'
                });
                
                if (homeResponse.ok) {
                    const homeData = await homeResponse.json();
                    addStatus(`✅ API Info: ${homeData.service}`, 'success');
                    addStatus(`✅ Model: ${homeData.model}`, 'success');
                    addStatus(`✅ Powered By: ${homeData.powered_by}`, 'success');
                } else {
                    addStatus(`❌ Home Endpoint Failed: ${homeResponse.status}`, 'error');
                }
            } catch (error) {
                addStatus(`❌ Home Endpoint Error: ${error.message}`, 'error');
            }
        }
        
        testBackend();
    </script>
</body>
</html>

