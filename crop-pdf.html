<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>PDF Cropper - Crop PDF Pages Online Free | easyjpgtopdf</title>
    <meta name="description" content="Crop PDF pages online for free. Remove unwanted margins and areas. Resize PDF pages easily. Free PDF cropping tool.">
    <meta name="keywords" content="crop pdf, crop pdf pages, resize pdf, trim pdf margins, pdf cropper, edit pdf size">
<link href="css/footer.css" rel="stylesheet"/>
<meta content="Trim unwanted margins from any PDF page with easyjpgtopdf's free Crop PDF tool. Upload, preview, adjust, and download a perfectly cropped document in seconds." name="description"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4bb543;
            --danger: #dc3545;
            --warning: #ffc107;
            --gray: #6c757d;
            --light-gray: #e9ecef;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 200px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            z-index: 1;
            border-radius: 8px;
            padding: 10px 0;
            top: 100%;
            left: 0;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown-content a {
            display: block;
            padding: 10px 20px;
            text-decoration: none;
            color: var(--dark);
        }

        .dropdown-content a:hover {
            background-color: var(--light);
        }

        .auth-buttons {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .auth-link {
            display: inline-flex;
            align-items: center;
            padding: 10px 18px;
            border-radius: 999px;
            border: 1px solid rgba(67, 97, 238, 0.28);
            color: var(--primary);
            font-weight: 600;
            text-decoration: none;
            transition: background 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
        }

        .auth-link:hover {
            background: rgba(67, 97, 238, 0.1);
            color: var(--secondary);
            box-shadow: 0 8px 18px rgba(67, 97, 238, 0.15);
        }

        /* Footer Styles */
        footer {
            background-color: #fff;
            padding: 40px 0;
            margin-top: auto;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
        }

        .footer-inner {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .footer-company-links {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 10px;
        }

        .footer-company-links span {
            font-weight: 600;
            color: var(--dark);
        }

        .footer-company-links a {
            color: var(--gray);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-company-links a:hover {
            color: var(--primary);
        }

        .footer-brand-line {
            color: var(--gray);
            font-size: 0.95rem;
            margin: 5px 0;
        }

        .footer-credits {
            color: var(--gray);
            font-size: 0.85rem;
            line-height: 1.6;
            max-width: 800px;
        }

        .footer-credits a {
            color: var(--primary);
            text-decoration: none;
        }

        .footer-credits a:hover {
            text-decoration: underline;
        }
    :root {
      --primary: #4361ee;
      --secondary: #3a0ca3;
      --accent: #4cc9f0;
      --dark: #1a1f36;
      --muted: #667085;
      --surface: #ffffff;
      --background: #f5f7ff;
      --border: #e4e8f7;
      --shadow: 0 20px 48px -30px rgba(15, 23, 42, 0.5);
      --radius: 18px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: var(--background);
      color: var(--dark);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
    }

    body.dragging-crop, body.dragging-crop * {
      user-select: none !important;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .hidden {
      display: none !important;
    }

    .container {
      width: min(1180px, 92vw);
      margin: 0 auto;
    }

    header {
      background: #fff;
      position: sticky;
      top: 0;
      z-index: 20;
      box-shadow: 0 12px 30px -22px rgba(15, 23, 42, 0.45);
    }

    .navbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
      padding: 16px 0;
    }

    .logo {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
      font-size: 1.25rem;
      color: var(--primary);
    }

    .logo i {
      color: var(--secondary);
      font-size: 1.4rem;
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 24px;
      flex-wrap: wrap;
    }

    .nav-links > a,
    .dropdown > a {
      font-weight: 500;
      color: var(--dark);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 0;
    }

    .nav-links > a:hover,
    .nav-links > a.active,
    .dropdown > a:hover {
      color: var(--primary);
    }

    .dropdown {
      position: relative;
    }

    .dropdown i {
      font-size: 0.75rem;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      top: calc(100% + 12px);
      left: 0;
      min-width: 220px;
      padding: 12px 0;
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 22px 50px -28px rgba(15, 23, 42, 0.4);
    }

    .dropdown-content a {
      display: block;
      padding: 10px 18px;
      color: var(--dark);
      font-weight: 500;
    }

    .dropdown-content a:hover {
      background: rgba(67, 97, 238, 0.08);
      color: var(--primary);
    }

    .dropdown:hover .dropdown-content {
      display: block;
    }

    .auth-buttons {
      display: flex;
      gap: 12px;
      flex-shrink: 0;
    }

    .auth-btn {
      padding: 8px 18px;
      border-radius: 999px;
      border: 1px solid transparent;
      font-weight: 600;
      transition: all 0.2s ease;
    }

    .auth-btn.login {
      border-color: rgba(67, 97, 238, 0.4);
      color: var(--primary);
    }

    .auth-btn.signup {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: #fff;
      box-shadow: 0 16px 32px rgba(67, 97, 238, 0.35);
    }

    .auth-btn:hover {
      transform: translateY(-1px);
    }

    .hero {
      background: linear-gradient(135deg, rgba(67, 97, 238, 0.94), rgba(58, 12, 163, 0.92));
      color: #fff;
      padding: 40px 0 34px;
      margin-bottom: 24px;
      border-radius: 0 0 24px 24px;
      position: relative;
      overflow: hidden;
    }

    .hero::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, rgba(76, 201, 240, 0.35), transparent 55%);
      pointer-events: none;
    }

    .hero h1 {
      font-size: clamp(2.1rem, 3.8vw, 3rem);
      margin-bottom: 12px;
      letter-spacing: -0.5px;
    }

    .hero p {
      font-size: 1.05rem;
      max-width: 640px;
      color: rgba(255, 255, 255, 0.86);
    }

    main {
      flex: 1;
      margin-bottom: 60px;
    }

    .crop-app {
      display: grid;
      grid-template-columns: 360px 1fr;
      gap: 28px;
      align-items: flex-start;
    }

    .panel-card,
    .preview-card,
    .info-card {
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 26px;
    }

    .panel-card header h2 {
      font-size: 1.32rem;
      margin-bottom: 6px;
    }

    .panel-card header p {
      color: var(--muted);
      font-size: 0.95rem;
    }

    .drop-zone {
      border: 2px dashed var(--border);
      border-radius: 16px;
      padding: 32px 20px;
      text-align: center;
      margin: 26px 0;
      background: rgba(67, 97, 238, 0.04);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .drop-zone.dragover {
      border-color: var(--primary);
      background: rgba(67, 97, 238, 0.09);
      transform: translateY(-2px);
    }

    .drop-zone i {
      font-size: 36px;
      color: var(--primary);
      margin-bottom: 14px;
    }

    .drop-zone h3 {
      font-size: 1.1rem;
      margin-bottom: 6px;
    }

    .drop-zone p {
      color: var(--muted);
      font-size: 0.92rem;
    }

    .file-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 18px;
      border-radius: 14px;
      background: rgba(67, 97, 238, 0.11);
      border: 1px solid rgba(67, 97, 238, 0.25);
      font-size: 0.93rem;
      margin-bottom: 20px;
    }

    .file-meta strong {
      color: var(--primary);
    }

    .select-field {
      margin-bottom: 20px;
    }

    .select-field label {
      display: block;
      font-size: 0.95rem;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .select-field select {
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      font-size: 0.96rem;
      outline: none;
      transition: border-color 0.2s ease;
    }

    .select-field select:focus {
      border-color: var(--primary);
    }

    .controls-section {
      margin-top: 24px;
    }

    .controls-section h3 {
      font-size: 1.08rem;
      margin-bottom: 10px;
    }

    .controls-section p.helper {
      color: var(--muted);
      font-size: 0.9rem;
      margin-bottom: 16px;
    }

    .margin-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 18px;
    }

    .range-field label {
      display: flex;
      justify-content: space-between;
      font-size: 0.92rem;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .range-field input[type="range"] {
      width: 100%;
      accent-color: var(--primary);
    }

    .action-buttons {
      margin-top: 26px;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 9px;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: #fff;
      box-shadow: 0 18px 34px rgba(67, 97, 238, 0.32);
    }

    .btn-secondary {
      background: rgba(67, 97, 238, 0.12);
      color: var(--primary);
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      box-shadow: none;
    }

    .btn:not(:disabled):hover {
      transform: translateY(-1px);
    }

    .preview-card header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 16px;
      margin-bottom: 18px;
    }

    .preview-header-text {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .preview-card header h2 {
      font-size: 1.2rem;
    }

    .helper-text {
      color: var(--muted);
      font-size: 0.92rem;
    }

    .reupload-btn {
      display: none;
      padding: 8px 16px;
      border-radius: 999px;
      border: 1px solid rgba(67, 97, 238, 0.35);
      background: rgba(67, 97, 238, 0.12);
      color: var(--primary);
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .reupload-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 18px rgba(67, 97, 238, 0.24);
    }

    body.preview-mode .reupload-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    body.preview-mode .drop-zone {
      display: none;
    }

    .canvas-shell {
      position: relative;
      background: #f8f9ff;
      border-radius: 16px;
      padding: 16px;
      border: 1px solid var(--border);
      height: clamp(260px, 48vh, 360px);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    canvas {
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 20px 40px -32px rgba(15, 23, 42, 0.46);
    }

    #cropOverlay {
      position: absolute;
      border: 2px dashed rgba(67, 97, 238, 0.9);
      border-radius: 12px;
      pointer-events: none;
      box-shadow: 0 0 0 4000px rgba(15, 23, 42, 0.22);
      transition: all 0.12s ease;
    }

    #cropOverlay .crop-handle {
      position: absolute;
      width: 16px;
      height: 16px;
      background: rgba(67, 97, 238, 0.96);
      border-radius: 50%;
      box-shadow: 0 6px 12px rgba(67, 97, 238, 0.3);
      pointer-events: auto;
      transform: translate(-50%, -50%);
      touch-action: none;
    }

    #cropOverlay .crop-handle[data-handle="top"] {
      top: 0%;
      left: 50%;
      cursor: ns-resize;
    }

    #cropOverlay .crop-handle[data-handle="bottom"] {
      top: 100%;
      left: 50%;
      cursor: ns-resize;
    }

    #cropOverlay .crop-handle[data-handle="left"] {
      top: 50%;
      left: 0%;
      cursor: ew-resize;
    }

    #cropOverlay .crop-handle[data-handle="right"] {
      top: 50%;
      left: 100%;
      cursor: ew-resize;
    }

    #cropOverlay .crop-handle[data-handle="top-left"] {
      top: 0%;
      left: 0%;
      cursor: nwse-resize;
    }

    #cropOverlay .crop-handle[data-handle="top-right"] {
      top: 0%;
      left: 100%;
      cursor: nesw-resize;
    }

    #cropOverlay .crop-handle[data-handle="bottom-left"] {
      top: 100%;
      left: 0%;
      cursor: nesw-resize;
    }

    #cropOverlay .crop-handle[data-handle="bottom-right"] {
      top: 100%;
      left: 100%;
      cursor: nwse-resize;
    }

    .preview-hint {
      margin-top: 16px;
      font-size: 0.92rem;
      color: var(--muted);
    }

    .info-card {
      margin-top: 24px;
    }

    .info-card h3 {
      font-size: 1.06rem;
      margin-bottom: 10px;
    }

    .info-card ul {
      list-style: none;
      display: grid;
      gap: 10px;
    }

    .info-card li {
      display: flex;
      gap: 12px;
      align-items: flex-start;
      font-size: 0.94rem;
      color: var(--muted);
    }

    .info-card li i {
      color: var(--primary);
      margin-top: 4px;
    }

    @media (max-width: 1050px) {
      .crop-app {
        grid-template-columns: 1fr;
      }

      .panel-card {
        order: 2;
      }

      .preview-card {
        order: 1;
      }
    }

    @media (max-width: 768px) {
      .navbar {
        flex-direction: column;
        align-items: flex-start;
      }

      .nav-links {
        width: 100%;
        justify-content: flex-start;
      }

      .auth-buttons {
        align-self: flex-end;
      }

      .drop-zone {
        padding: 26px 18px;
      }

      .margin-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
<link href="css/header.css" rel="stylesheet"/>
<link href="css/theme-modern.css" rel="stylesheet"/>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "PDF Cropper - Crop PDF Pages Online Free | easyjpgtopdf",
      "description": "Crop PDF pages online for free. Remove unwanted margins and areas. Resize PDF pages easily. Free PDF cropping tool.",
      "url": "https://easyjpgtopdf.com/crop-pdf.html",
      "inLanguage": "en-US",
      "isPartOf": {
        "@type": "WebSite",
        "name": "easyjpgtopdf",
        "url": "https://easyjpgtopdf.com"
      },
      "publisher": {
        "@type": "Organization",
        "name": "easyjpgtopdf",
        "url": "https://easyjpgtopdf.com"
      }
    }
    </script>
</head>
<body>
<!-- Header -->
<header>
        <div class="container">
            <nav class="navbar">
                <a href="index.html" class="logo"><img src="images/logo.png" alt="Logo" style="height:54px;"></a>
                <div class="nav-links">
                    <div class="dropdown">
                        <a href="#">Convert to PDF <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="jpg-to-pdf.html">JPG to PDF</a>
                            <a href="word-to-pdf.html">Word to PDF</a>
                            <a href="excel-to-pdf.html">Excel to PDF</a>
                            <a href="ppt-to-pdf.html">PowerPoint to PDF</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Convert from PDF <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="pdf-to-jpg.html">PDF to JPG</a>
                            <a href="pdf-to-word.html">PDF to Word</a>
                            <a href="pdf-to-excel.html">PDF to Excel</a>
                            <a href="pdf-to-ppt.html">PDF to PowerPoint</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Pdf Editor <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="merge-pdf.html">Merge PDF</a>
                            <a href="split-pdf.html">Split PDF</a>
                            <a href="compress-pdf.html">Compress PDF</a>
                            <a href="edit-pdf.html">Pdf Editor</a>
                            <a href="protect-pdf.html">Protect PDF</a>
                            <a href="unlock-pdf.html">Unlock PDF</a>
                            <a href="watermark-pdf.html">Watermark PDF</a>
                            <a href="crop-pdf.html">Crop PDF</a>
                            <a href="add-page-numbers.html">Add Page Numbers</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Image Tools <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="image-repair.html">AI Image Repair</a>
                            <a href="image-compressor.html">Image Compressor</a>
                            <a href="image-resizer.html">Image Resizer</a>
                            <a href="image-editor.html">Image Editor</a>
                            <a href="background-remover.html">Image Background Remover</a>
                            <a href="ocr-image.html">OCR Image</a>
                            <a href="image-watermark.html">Image Watermark Tool</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">Other Tools <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="resume-maker.html">Resume Maker</a>
                            <a href="biodata-maker.html">Marrige Biodata-Data Maker</a>
                            <a href="ai-image-generator.html">AI Image Generator</a>
                            <a href="marriage-card.html">Marriage Card</a>
                            <a href="excel-unlocker/" target="_blank">Excel Unlocker</a>
                            <a href="protect-excel.html">Protect Excel Sheet</a>
                        </div>
                    </div>
                    <div class="dropdown">
                        <a href="#">More <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content">
                            <a href="pricing.html">Pricing</a>
                            <a href="blog.html">Blog/Articles</a>
                            <a href="https://apnaonlineservic.com" target="_blank">Shop-ApnaOnline</a>
                            <a href="https://aimathmaster.com" target="_blank">AI-Math Master</a>
                        </div>
                    </div>
                </div>
                <div class="auth-buttons">
                    <a href="login.html" class="auth-link">Sign In</a>
                    <a href="signup.html" class="auth-btn"><i class="fas fa-user-plus" aria-hidden="true"></i><span>Signup</span></a>
                </div>
                <div id="user-menu" class="user-menu" data-open="false">
                    <button id="user-menu-toggle" class="user-menu-toggle" type="button" aria-haspopup="true" aria-expanded="false" aria-label="Account menu">
                        <span class="user-initial" aria-hidden="true">U</span>
                        <i class="fas fa-chevron-down" aria-hidden="true"></i>
                    </button>
                    <div class="user-dropdown" id="user-dropdown" hidden>
                        <a href="dashboard.html#dashboard-overview" data-user-nav="dashboard-overview"><i class="fas fa-user-circle"></i> Account Dashboard</a>
                        <a href="dashboard.html#dashboard-billing" data-user-nav="dashboard-billing"><i class="fas fa-file-invoice"></i> Billing Details</a>
                        <a href="dashboard.html#dashboard-payments" data-user-nav="dashboard-payments"><i class="fas fa-wallet"></i> Payment History</a>
                        <a href="dashboard.html#dashboard-orders" data-user-nav="dashboard-orders"><i class="fas fa-clipboard-list"></i> Orders &amp; Subscriptions</a>
                        <a href="accounts.html#login"><i class="fas fa-user-cog"></i> Account Center</a>
                        <button type="button" id="logout-button" class="dropdown-logout"><i class="fas fa-sign-out-alt"></i> Sign out</button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <nav aria-label="Breadcrumb" style="padding: 15px 0; background: #f8f9ff; border-bottom: 1px solid #e2e6ff;">
        <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 24px;">
            <ol style="list-style: none; display: flex; flex-wrap: wrap; gap: 10px; margin: 0; padding: 0; align-items: center;">
                <li><a href="index.html" style="color: #4361ee; text-decoration: none; font-weight: 500;">Home</a> <span style="margin: 0 8px; color: #9ca3af;">/</span></li>
                <li style="color: #56607a; font-weight: 500;">Crop Pdf</li>
            </ol>
        </div>
    </nav>

<main>
        <h1>PDF Cropper - Crop PDF Pages Online Free</h1>
<div class="container crop-app">
<section aria-label="PDF upload and crop controls" class="panel-card">
<header>
<h2><i class="fas fa-crop"></i> Crop Settings</h2>
<p>Adjust the margins to keep only the content you need. Changes apply to every page in the file.</p>
</header>

    <nav aria-label="Breadcrumb" style="padding: 15px 0; background: #f8f9ff; border-bottom: 1px solid #e2e6ff;">
        <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 24px;">
            <ol style="list-style: none; display: flex; flex-wrap: wrap; gap: 10px; margin: 0; padding: 0; align-items: center;">
                <li><a href="index.html" style="color: #4361ee; text-decoration: none; font-weight: 500;">Home</a> <span style="margin: 0 8px; color: #9ca3af;">/</span></li>
                <li style="color: #56607a; font-weight: 500;">Crop Pdf</li>
            </ol>
        </div>
    </nav>

<div class="drop-zone" id="dropZone" role="button" tabindex="0">
<input accept="application/pdf" hidden="" id="pdfInput" type="file"/>
<i aria-hidden="true" class="fas fa-cloud-upload-alt"></i>
<h3>Drag &amp; drop or click to browse</h3>
<p>PDF files only â€¢ Max 50 MB recommended</p>
</div>
<div class="file-meta hidden" id="fileMeta">
<span><i class="fas fa-file-pdf"></i> <strong id="fileName">sample.pdf</strong></span>
<span id="filePages">1 page</span>
</div>
<div class="select-field">
<label for="pageSelect">Preview page</label>
<select disabled="" id="pageSelect">
<option>Upload a PDF first</option>
</select>
</div>
<section aria-label="Margin controls" class="controls-section">
<h3>Crop margins</h3>
<p class="helper">Adjust the sliders (percentage). The crop applies uniformly to every page.</p>
<div class="margin-grid">
<div class="range-field">
<label for="marginTop">Top <span data-margin-label="top">0%</span></label>
<input id="marginTop" max="25" min="0" step="1" type="range" value="0"/>
</div>
<div class="range-field">
<label for="marginBottom">Bottom <span data-margin-label="bottom">0%</span></label>
<input id="marginBottom" max="25" min="0" step="1" type="range" value="0"/>
</div>
<div class="range-field">
<label for="marginLeft">Left <span data-margin-label="left">0%</span></label>
<input id="marginLeft" max="25" min="0" step="1" type="range" value="0"/>
</div>
<div class="range-field">
<label for="marginRight">Right <span data-margin-label="right">0%</span></label>
<input id="marginRight" max="25" min="0" step="1" type="range" value="0"/>
</div>
</div>
</section>
<div class="action-buttons">
<button class="btn btn-secondary" id="resetButton" type="button"><i class="fas fa-undo"></i> Reset</button>
<button class="btn btn-primary" disabled="" id="downloadButton" type="button"><i class="fas fa-download"></i> Download Cropped PDF</button>
</div>
</section>
<aside aria-label="Live crop preview" class="preview-card">
<header>
<div class="preview-header-text">
<h2><i class="fas fa-eye"></i> Live Preview</h2>
<span class="helper-text" id="previewStatus">Upload a PDF to begin.</span>
</div>
<button class="reupload-btn" id="reuploadButton" type="button"><i class="fas fa-undo"></i> Reupload PDF</button>
</header>

    <nav aria-label="Breadcrumb" style="padding: 15px 0; background: #f8f9ff; border-bottom: 1px solid #e2e6ff;">
        <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 24px;">
            <ol style="list-style: none; display: flex; flex-wrap: wrap; gap: 10px; margin: 0; padding: 0; align-items: center;">
                <li><a href="index.html" style="color: #4361ee; text-decoration: none; font-weight: 500;">Home</a> <span style="margin: 0 8px; color: #9ca3af;">/</span></li>
                <li style="color: #56607a; font-weight: 500;">Crop Pdf</li>
            </ol>
        </div>
    </nav>

<div class="canvas-shell" id="canvasShell">
<canvas aria-label="PDF page preview" id="previewCanvas"></canvas>
<div aria-hidden="true" class="hidden" id="cropOverlay"></div>
</div>
<p class="preview-hint">Preview updates instantly as you tweak the margins. Download applies the crop to every page.</p>
<section aria-label="Cropping tips" class="info-card">
<h3><i class="fas fa-lightbulb"></i> Tips for perfect crops</h3>
<ul>
<li><i class="fas fa-check-circle"></i> Increase margins to remove noisy borders or scanner shadows.</li>
<li><i class="fas fa-check-circle"></i> Switch preview pages to confirm important text stays visible.</li>
<li><i class="fas fa-check-circle"></i> Keep margins below 25% to avoid trimming essential content.</li>
</ul>
</section>
</aside>
</div>

    <section class="explanatory-content" style="margin: 40px 0; padding: 40px; background: linear-gradient(135deg, #f8f9ff, #ffffff); border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <div class="container" style="max-width: 900px; margin: 0 auto;">
            <h2 style="font-size: 2rem; color: #4361ee; margin-bottom: 20px; text-align: center;">
                <i class="fas fa-info-circle" style="margin-right: 10px;"></i>
                About Crop Pdf
            </h2>
            <div class="content-text" style="font-size: 1.1rem; color: #56607a; line-height: 1.8; text-align: center; margin-bottom: 30px;">
                <p>Use our crop pdf tool</p>
            </div>
            
            <div class="features-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px;">
                <div class="feature-item" style="padding: 20px; background: white; border-radius: 12px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <i class="fas fa-bolt" style="font-size: 2rem; color: #4361ee; margin-bottom: 10px;"></i>
                    <h3 style="font-size: 1.2rem; color: #0b1630; margin-bottom: 10px;">Fast Processing</h3>
                    <p style="color: #56607a; font-size: 0.95rem;">Process files in seconds with our optimized algorithms</p>
                </div>
                
                <div class="feature-item" style="padding: 20px; background: white; border-radius: 12px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <i class="fas fa-shield-alt" style="font-size: 2rem; color: #4361ee; margin-bottom: 10px;"></i>
                    <h3 style="font-size: 1.2rem; color: #0b1630; margin-bottom: 10px;">Secure & Private</h3>
                    <p style="color: #56607a; font-size: 0.95rem;">Your files are processed securely and deleted automatically</p>
                </div>
                
                <div class="feature-item" style="padding: 20px; background: white; border-radius: 12px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <i class="fas fa-mobile-alt" style="font-size: 2rem; color: #4361ee; margin-bottom: 10px;"></i>
                    <h3 style="font-size: 1.2rem; color: #0b1630; margin-bottom: 10px;">Works Everywhere</h3>
                    <p style="color: #56607a; font-size: 0.95rem;">Use on desktop, tablet, or mobile - no installation needed</p>
                </div>
            </div>
        </div>
    </section>

    <section class="how-to-guide" style="margin: 40px 0; padding: 40px; background: white; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <h2 style="font-size: 2rem; color: #4361ee; margin-bottom: 30px; text-align: center;">
            <i class="fas fa-book-open" style="margin-right: 10px;"></i>
            How to Use Crop Pdf
        </h2>
        <div class="steps-container" style="max-width: 800px; margin: 0 auto;">
            <ol style="list-style: none; padding: 0; counter-reset: step-counter;">

                <li style="counter-increment: step-counter; margin-bottom: 25px; padding: 20px; background: #f8f9ff; border-radius: 12px; border-left: 4px solid #4361ee; position: relative; padding-left: 60px;">
                    <span style="position: absolute; left: 15px; top: 20px; background: #4361ee; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.1rem;">
                        1
                    </span>
                    <p style="font-size: 1.1rem; color: #0b1630; line-height: 1.6; margin: 0;">
                        Upload your file
                    </p>
                </li>

                <li style="counter-increment: step-counter; margin-bottom: 25px; padding: 20px; background: #f8f9ff; border-radius: 12px; border-left: 4px solid #4361ee; position: relative; padding-left: 60px;">
                    <span style="position: absolute; left: 15px; top: 20px; background: #4361ee; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.1rem;">
                        2
                    </span>
                    <p style="font-size: 1.1rem; color: #0b1630; line-height: 1.6; margin: 0;">
                        Process using our tool
                    </p>
                </li>

                <li style="counter-increment: step-counter; margin-bottom: 25px; padding: 20px; background: #f8f9ff; border-radius: 12px; border-left: 4px solid #4361ee; position: relative; padding-left: 60px;">
                    <span style="position: absolute; left: 15px; top: 20px; background: #4361ee; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.1rem;">
                        3
                    </span>
                    <p style="font-size: 1.1rem; color: #0b1630; line-height: 1.6; margin: 0;">
                        Download the result
                    </p>
                </li>

            </ol>
        </div>
    </section>

    <section class="faq-section" style="margin: 40px 0; padding: 40px; background: #f8f9ff; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
        <h2 style="font-size: 2rem; color: #4361ee; margin-bottom: 30px; text-align: center;">
            <i class="fas fa-question-circle" style="margin-right: 10px;"></i>
            Frequently Asked Questions
        </h2>
        <div class="faq-container" style="max-width: 800px; margin: 0 auto;">

            <div class="faq-item" style="margin-bottom: 20px; padding: 20px; background: white; border-radius: 12px; border-left: 4px solid #4361ee; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                <h3 style="font-size: 1.2rem; color: #0b1630; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center;" onclick="toggleFaq(this)">
                    <i class="fas fa-chevron-right" style="color: #4361ee; margin-right: 10px; transition: transform 0.3s;"></i>
                    How accurate is the conversion?
                </h3>
                <div class="faq-answer" style="font-size: 1rem; color: #56607a; line-height: 1.6; margin-top: 10px; display: none; padding-left: 30px;">
                    Our conversion tools maintain 99% accuracy, preserving all formatting, fonts, and layout from your original files.
                </div>
            </div>

            <div class="faq-item" style="margin-bottom: 20px; padding: 20px; background: white; border-radius: 12px; border-left: 4px solid #4361ee; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                <h3 style="font-size: 1.2rem; color: #0b1630; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center;" onclick="toggleFaq(this)">
                    <i class="fas fa-chevron-right" style="color: #4361ee; margin-right: 10px; transition: transform 0.3s;"></i>
                    What file sizes are supported?
                </h3>
                <div class="faq-answer" style="font-size: 1rem; color: #56607a; line-height: 1.6; margin-top: 10px; display: none; padding-left: 30px;">
                    Free users can convert files up to 10MB. Premium users can process files up to 100MB with faster processing.
                </div>
            </div>

            <div class="faq-item" style="margin-bottom: 20px; padding: 20px; background: white; border-radius: 12px; border-left: 4px solid #4361ee; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                <h3 style="font-size: 1.2rem; color: #0b1630; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center;" onclick="toggleFaq(this)">
                    <i class="fas fa-chevron-right" style="color: #4361ee; margin-right: 10px; transition: transform 0.3s;"></i>
                    Will my data be secure?
                </h3>
                <div class="faq-answer" style="font-size: 1rem; color: #56607a; line-height: 1.6; margin-top: 10px; display: none; padding-left: 30px;">
                    Yes, all files are processed securely and automatically deleted after conversion. We never store or share your documents.
                </div>
            </div>

            <div class="faq-item" style="margin-bottom: 20px; padding: 20px; background: white; border-radius: 12px; border-left: 4px solid #4361ee; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                <h3 style="font-size: 1.2rem; color: #0b1630; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center;" onclick="toggleFaq(this)">
                    <i class="fas fa-chevron-right" style="color: #4361ee; margin-right: 10px; transition: transform 0.3s;"></i>
                    Can I convert multiple files at once?
                </h3>
                <div class="faq-answer" style="font-size: 1rem; color: #56607a; line-height: 1.6; margin-top: 10px; display: none; padding-left: 30px;">
                    Yes, premium users can convert multiple files simultaneously. Free users can process one file at a time.
                </div>
            </div>

            <div class="faq-item" style="margin-bottom: 20px; padding: 20px; background: white; border-radius: 12px; border-left: 4px solid #4361ee; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                <h3 style="font-size: 1.2rem; color: #0b1630; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center;" onclick="toggleFaq(this)">
                    <i class="fas fa-chevron-right" style="color: #4361ee; margin-right: 10px; transition: transform 0.3s;"></i>
                    What formats are supported?
                </h3>
                <div class="faq-answer" style="font-size: 1rem; color: #56607a; line-height: 1.6; margin-top: 10px; display: none; padding-left: 30px;">
                    We support all major file formats. Check the tool page for specific format compatibility.
                </div>
            </div>

        </div>
    </section>
    
    <script>
    function toggleFaq(element) {
        const answer = element.nextElementSibling;
        const icon = element.querySelector('i');
        const isOpen = answer.style.display === 'block';
        
        answer.style.display = isOpen ? 'none' : 'block';
        icon.style.transform = isOpen ? 'rotate(0deg)' : 'rotate(90deg)';
    }
    </script>

    <div class="trust-badges" style="text-align: center; padding: 20px; background: linear-gradient(135deg, #f8f9ff, #ffffff); border-radius: 12px; margin: 30px 0; border: 2px solid #e2e6ff;">
        <div style="display: flex; justify-content: center; align-items: center; gap: 40px; flex-wrap: wrap;">
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-shield-alt" style="font-size: 2rem; color: #4361ee;"></i>
                <div style="text-align: left;">
                    <div style="color: #0b1630; font-weight: 600; font-size: 1.1rem;">SSL Secured</div>
                    <div style="color: #56607a; font-size: 0.9rem;">256-bit Encryption</div>
                </div>
            </div>
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-lock" style="font-size: 2rem; color: #4361ee;"></i>
                <div style="text-align: left;">
                    <div style="color: #0b1630; font-weight: 600; font-size: 1.1rem;">100% Secure</div>
                    <div style="color: #56607a; font-size: 0.9rem;">Files Auto-Deleted</div>
                </div>
            </div>
            
        </div>
    </div>
</main>
<!-- Modal Dialogs Removed as per user request -->



<script>
        // Modal functions
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.className === 'modal') {
                event.target.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        // Form submissions
        document.getElementById('login-form')?.addEventListener('submit', function(e) {
            e.preventDefault();
            // Add login logic here
            closeModal('login-modal');
        });

        document.getElementById('signup-form')?.addEventListener('submit', function(e) {
            e.preventDefault();
            // Add signup logic here
            closeModal('signup-modal');
        });
    </script>
<script>
    (async function () {
      const dropZone = document.getElementById('dropZone');
      const fileInput = document.getElementById('pdfInput');
      const fileMeta = document.getElementById('fileMeta');
      const fileNameEl = document.getElementById('fileName');
      const filePagesEl = document.getElementById('filePages');
      const pageSelect = document.getElementById('pageSelect');
      const previewCanvas = document.getElementById('previewCanvas');
      const canvasShell = document.getElementById('canvasShell');
      const overlay = document.getElementById('cropOverlay');
      const previewStatus = document.getElementById('previewStatus');
      const downloadButton = document.getElementById('downloadButton');
      const resetButton = document.getElementById('resetButton');
      const reuploadButton = document.getElementById('reuploadButton');
      const marginLabels = {
        top: document.querySelector('[data-margin-label="top"]'),
        bottom: document.querySelector('[data-margin-label="bottom"]'),
        left: document.querySelector('[data-margin-label="left"]'),
        right: document.querySelector('[data-margin-label="right"]')
      };
      const marginInputs = {
        top: document.getElementById('marginTop'),
        bottom: document.getElementById('marginBottom'),
        left: document.getElementById('marginLeft'),
        right: document.getElementById('marginRight')
      };
      const bodyEl = document.body;
      const HANDLE_KEYS = ['top', 'bottom', 'left', 'right', 'top-left', 'top-right', 'bottom-left', 'bottom-right'];
      const MAX_MARGIN = 45;
      const MAX_MARGIN_SUM = 95;

      function setPreviewMode(active) {
        if (active) {
          bodyEl.classList.add('preview-mode');
        } else {
          bodyEl.classList.remove('preview-mode');
        }
      }

      function resetWorkspace() {
        pdfDoc = null;
        originalBytes = null;
        currentPage = 1;
        fileInput.value = '';
        pageSelect.innerHTML = '<option>Upload a PDF first</option>';
        pageSelect.disabled = true;
        downloadButton.disabled = true;
        fileMeta.classList.add('hidden');
        previewCanvas.width = 0;
        previewCanvas.height = 0;
        ctx.clearRect(0, 0, previewCanvas.width || 1, previewCanvas.height || 1);
        overlay.classList.add('hidden');
        setStatus('Upload a PDF to begin.');
        resetMargins();
        setPreviewMode(false);
      }

      function ensureHandles() {
        if (overlay.dataset.handles === 'ready') return;
        HANDLE_KEYS.forEach((key) => {
          const handle = document.createElement('span');
          handle.className = 'crop-handle';
          handle.dataset.handle = key;
          handle.title = `Drag ${key.replace('-', ' ')} edge`;
          handle.addEventListener('pointerdown', onHandlePointerDown);
          overlay.appendChild(handle);
        });
        overlay.dataset.handles = 'ready';
      }

      ensureHandles();

      let dragState = null;

      const ctx = previewCanvas.getContext('2d');
      let pdfDoc = null;
      let originalBytes = null;
      let currentPage = 1;

      function loadScript(src) {
        return new Promise((resolve, reject) => {
          const script = document.createElement('script');
          script.src = src;
          script.async = true;
          script.onload = () => resolve();
          script.onerror = () => reject(new Error(`Failed to load script: ${src}`));
          document.head.appendChild(script);
        });
      }

      async function ensurePdfJs() {
        const sources = [
          {
            script: 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js',
            worker: 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js'
          },
          {
            script: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js',
            worker: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.worker.min.js'
          }
        ];

        if (window.pdfjsLib) {
          const existingWorker = window.pdfjsLib.GlobalWorkerOptions?.workerSrc;
          return {
            lib: window.pdfjsLib,
            workerSrc: existingWorker || sources[0].worker
          };
        }

        for (const source of sources) {
          try {
            await loadScript(source.script);
            if (window.pdfjsLib) {
              return {
                lib: window.pdfjsLib,
                workerSrc: source.worker
              };
            }
          } catch (error) {
            console.warn('[Crop PDF] Failed to load pdf.js source', source.script, error);
          }
        }

        throw new Error('pdf.js failed to load');
      }

      async function ensurePdfLib() {
        const sources = [
          'https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js',
          'https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js'
        ];

        if (window.PDFLib) {
          return window.PDFLib;
        }

        for (const src of sources) {
          try {
            await loadScript(src);
            if (window.PDFLib) {
              return window.PDFLib;
            }
          } catch (error) {
            console.warn('[Crop PDF] Failed to load pdf-lib source', src, error);
          }
        }

        throw new Error('pdf-lib failed to load');
      }

      function setStatus(message) {
        previewStatus.textContent = message;
      }

      setStatus('Preparing PDF toolsâ€¦');

      let pdfjsLibGlobal = null;
      let pdfJsWorkerSrc = null;
      let pdfLibGlobal = null;

      try {
        const result = await ensurePdfJs();
        pdfjsLibGlobal = result.lib;
        pdfJsWorkerSrc = result.workerSrc;
        pdfjsLibGlobal.GlobalWorkerOptions.workerSrc = pdfJsWorkerSrc;
      } catch (error) {
        console.warn('[Crop PDF] pdf.js unavailable', error);
        setStatus('PDF preview unavailable â€” check your internet connection and reload.');
      }

      try {
        pdfLibGlobal = await ensurePdfLib();
      } catch (error) {
        console.warn('[Crop PDF] pdf-lib unavailable', error);
        downloadButton.disabled = true;
        setStatus('Cropping engine unavailable â€” reload the page to try again.');
      }

      if (pdfjsLibGlobal && pdfLibGlobal) {
        setStatus('Upload a PDF to begin.');
      } else if (pdfjsLibGlobal && !pdfLibGlobal) {
        setStatus('Cropping engine unavailable â€” reload the page to try again.');
      } else if (!pdfjsLibGlobal && pdfLibGlobal) {
        setStatus('Preview unavailable. Upload a PDF to crop and download.');
      }

      function updateMarginLabel(side) {
        const value = Number(marginInputs[side].value) || 0;
        marginLabels[side].textContent = `${value}%`;
      }

      function getMargins() {
        return {
          top: Number(marginInputs.top.value) || 0,
          bottom: Number(marginInputs.bottom.value) || 0,
          left: Number(marginInputs.left.value) || 0,
          right: Number(marginInputs.right.value) || 0
        };
      }

      function updateOverlay() {
        if (!pdfDoc || !previewCanvas.width || !previewCanvas.height) {
          overlay.classList.add('hidden');
          return;
        }

        const canvasRect = previewCanvas.getBoundingClientRect();
        const shellRect = canvasShell.getBoundingClientRect();
        if (!canvasRect.width || !canvasRect.height) {
          overlay.classList.add('hidden');
          return;
        }

        const { top, bottom, left, right } = getMargins();
        const totalHorizontal = left + right;
        const totalVertical = top + bottom;

        if (totalHorizontal >= 98 || totalVertical >= 98) {
          overlay.classList.add('hidden');
          return;
        }

        const visibleWidth = canvasRect.width * (1 - totalHorizontal / 100);
        const visibleHeight = canvasRect.height * (1 - totalVertical / 100);
        const baseOffsetX = canvasRect.left - shellRect.left;
        const baseOffsetY = canvasRect.top - shellRect.top;
        const cropOffsetX = baseOffsetX + (canvasRect.width * left) / 100;
        const cropOffsetY = baseOffsetY + (canvasRect.height * top) / 100;

        overlay.style.width = `${Math.max(0, visibleWidth)}px`;
        overlay.style.height = `${Math.max(0, visibleHeight)}px`;
        overlay.style.left = `${cropOffsetX}px`;
        overlay.style.top = `${cropOffsetY}px`;
        overlay.style.transform = '';
        overlay.classList.remove('hidden');
      }

      function applyManualMargins(margins, renderLater = false) {
        ['top', 'bottom', 'left', 'right'].forEach((key) => {
          const value = Math.max(0, Math.min(MAX_MARGIN, margins[key] || 0));
          marginInputs[key].value = String(Math.round(value));
          updateMarginLabel(key);
        });
        if (renderLater) {
          renderPage(currentPage);
        } else {
          updateOverlay();
        }
      }

      function enforceTotals(margins, changedKeys) {
        const adjustPair = (primary, secondary) => {
          const total = margins[primary] + margins[secondary];
          if (total > MAX_MARGIN_SUM) {
            if (changedKeys.has(primary) && !changedKeys.has(secondary)) {
              margins[primary] = Math.max(0, MAX_MARGIN_SUM - margins[secondary]);
            } else if (!changedKeys.has(primary) && changedKeys.has(secondary)) {
              margins[secondary] = Math.max(0, MAX_MARGIN_SUM - margins[primary]);
            } else if (changedKeys.has(primary) && changedKeys.has(secondary)) {
              const excess = total - MAX_MARGIN_SUM;
              const sum = margins[primary] + margins[secondary] || 1;
              const primaryShare = margins[primary] / sum;
              margins[primary] = Math.max(0, margins[primary] - excess * primaryShare);
              margins[secondary] = Math.max(0, margins[secondary] - excess * (1 - primaryShare));
            } else {
              margins[primary] = Math.max(0, MAX_MARGIN_SUM - margins[secondary]);
            }
          }
        };

        adjustPair('top', 'bottom');
        adjustPair('left', 'right');
      }

      function computeDraggedMargins(handle, baseMargins, dxPercent, dyPercent) {
        const margins = { ...baseMargins };
        const changed = new Set();

        switch (handle) {
          case 'top':
            margins.top = baseMargins.top + dyPercent;
            changed.add('top');
            break;
          case 'bottom':
            margins.bottom = baseMargins.bottom - dyPercent;
            changed.add('bottom');
            break;
          case 'left':
            margins.left = baseMargins.left + dxPercent;
            changed.add('left');
            break;
          case 'right':
            margins.right = baseMargins.right - dxPercent;
            changed.add('right');
            break;
          case 'top-left':
            margins.top = baseMargins.top + dyPercent;
            margins.left = baseMargins.left + dxPercent;
            changed.add('top');
            changed.add('left');
            break;
          case 'top-right':
            margins.top = baseMargins.top + dyPercent;
            margins.right = baseMargins.right - dxPercent;
            changed.add('top');
            changed.add('right');
            break;
          case 'bottom-left':
            margins.bottom = baseMargins.bottom - dyPercent;
            margins.left = baseMargins.left + dxPercent;
            changed.add('bottom');
            changed.add('left');
            break;
          case 'bottom-right':
            margins.bottom = baseMargins.bottom - dyPercent;
            margins.right = baseMargins.right - dxPercent;
            changed.add('bottom');
            changed.add('right');
            break;
          default:
            break;
        }

        ['top', 'bottom', 'left', 'right'].forEach((key) => {
          margins[key] = Math.max(0, Math.min(MAX_MARGIN, margins[key] ?? 0));
        });

        enforceTotals(margins, changed);

        return margins;
      }

      function onHandlePointerDown(event) {
        if (!pdfDoc) return;
        if (!(event.target instanceof HTMLElement)) return;
        const handleKey = event.target.dataset.handle;
        if (!handleKey) return;
        const rect = previewCanvas.getBoundingClientRect();
        if (!rect.width || !rect.height) return;

        event.preventDefault();
        dragState = {
          handle: handleKey,
          startX: event.clientX,
          startY: event.clientY,
          rectWidth: rect.width,
          rectHeight: rect.height,
          pointerId: event.pointerId,
          element: event.target,
          baseMargins: getMargins()
        };

        event.target.setPointerCapture?.(event.pointerId);
        bodyEl.classList.add('dragging-crop');
        document.addEventListener('pointermove', onHandlePointerMove);
        document.addEventListener('pointerup', onHandlePointerUp);
      }

      function onHandlePointerMove(event) {
        if (!dragState || event.pointerId !== dragState.pointerId) return;
        event.preventDefault();
        const dxPercent = ((event.clientX - dragState.startX) / dragState.rectWidth) * 100;
        const dyPercent = ((event.clientY - dragState.startY) / dragState.rectHeight) * 100;
        const margins = computeDraggedMargins(dragState.handle, dragState.baseMargins, dxPercent, dyPercent);
        applyManualMargins(margins, false);
      }

      function onHandlePointerUp(event) {
        if (!dragState || event.pointerId !== dragState.pointerId) return;
        dragState.element?.releasePointerCapture?.(dragState.pointerId);
        document.removeEventListener('pointermove', onHandlePointerMove);
        document.removeEventListener('pointerup', onHandlePointerUp);
        bodyEl.classList.remove('dragging-crop');
        dragState = null;
        renderPage(currentPage);
      }

      function resetMargins() {
        Object.values(marginInputs).forEach((input) => {
          input.value = '0';
        });
        Object.keys(marginInputs).forEach(updateMarginLabel);
        if (pdfDoc) {
          renderPage(currentPage);
        } else {
          updateOverlay();
        }
      }

      async function renderPage(pageNumber) {
        if (!pdfDoc || !pdfjsLibGlobal) return;
        try {
          const page = await pdfDoc.getPage(pageNumber);
          const viewport = page.getViewport({ scale: 1 });
          const maxWidth = canvasShell.clientWidth - 32;
          const scale = Math.min(1.8, maxWidth / viewport.width);
          const scaledViewport = page.getViewport({ scale });

          previewCanvas.width = scaledViewport.width;
          previewCanvas.height = scaledViewport.height;

          await page.render({ canvasContext: ctx, viewport: scaledViewport }).promise;
          setStatus(`Showing page ${pageNumber} of ${pdfDoc.numPages}`);
          requestAnimationFrame(updateOverlay);
        } catch (error) {
          console.error('Failed to render page', error);
          setStatus('Unable to render this page. Try another or re-upload the file.');
        }
      }

      async function loadPdf(file) {
        if (!file || file.type !== 'application/pdf') {
          alert('Please select a PDF file.');
          return;
        }
        try {
          setStatus('Loading PDFâ€¦');
          downloadButton.disabled = true;
          pageSelect.disabled = true;

          const arrayBuffer = await file.arrayBuffer();
          originalBytes = arrayBuffer;
          fileNameEl.textContent = file.name;
          fileMeta.classList.remove('hidden');

          if (pdfjsLibGlobal) {
            const loadingTask = pdfjsLibGlobal.getDocument({ data: arrayBuffer });
            pdfDoc = await loadingTask.promise;

            filePagesEl.textContent = `${pdfDoc.numPages} page${pdfDoc.numPages > 1 ? 's' : ''}`;
            downloadButton.disabled = !pdfLibGlobal;

            pageSelect.innerHTML = '';
            for (let i = 1; i <= pdfDoc.numPages; i += 1) {
              const option = document.createElement('option');
              option.value = String(i);
              option.textContent = `Page ${i}`;
              pageSelect.appendChild(option);
            }
            pageSelect.disabled = false;
            currentPage = 1;
            pageSelect.value = '1';
            renderPage(1);
            setStatus('Adjust margins, then download the cropped PDF.');
            setPreviewMode(true);
          } else {
            pdfDoc = null;
            pageSelect.innerHTML = '<option value="">Preview unavailable</option>';
            pageSelect.disabled = true;
            if (pdfLibGlobal) {
              const fallbackDoc = await pdfLibGlobal.PDFDocument.load(arrayBuffer);
              const pageCount = fallbackDoc.getPageCount();
              filePagesEl.textContent = `${pageCount} page${pageCount > 1 ? 's' : ''}`;
              downloadButton.disabled = false;
              setStatus('Preview unavailable. You can still download a cropped PDF.');
              setPreviewMode(true);
            } else {
              filePagesEl.textContent = 'Unknown page count';
              downloadButton.disabled = true;
              setStatus('Required PDF libraries failed to load. Reload the page to try again.');
              setPreviewMode(false);
            }
          }
        } catch (error) {
          console.error('PDF load error:', error);
          alert('Unable to load the PDF. Please try a different file.');
          setStatus('Upload a PDF to begin.');
          setPreviewMode(false);
        }
      }

      async function downloadCroppedPdf() {
        if (!originalBytes) {
          alert('Upload a PDF first.');
          return;
        }
        if (!pdfLibGlobal) {
          alert('Cropping engine failed to load. Please reload the page and try again.');
          return;
        }
        try {
          const margins = getMargins();
          const totalHorizontal = margins.left + margins.right;
          const totalVertical = margins.top + margins.bottom;
          if (totalHorizontal >= MAX_MARGIN_SUM || totalVertical >= MAX_MARGIN_SUM) {
            alert('Margins are too large. Reduce them to keep some content.');
            return;
          }
          const pdfDocLib = await pdfLibGlobal.PDFDocument.load(originalBytes);
          const pages = pdfDocLib.getPages();

          pages.forEach((page) => {
            const width = page.getWidth();
            const height = page.getHeight();
            const left = (margins.left / 100) * width;
            const right = (margins.right / 100) * width;
            const top = (margins.top / 100) * height;
            const bottom = (margins.bottom / 100) * height;
            const newWidth = width - left - right;
            const newHeight = height - top - bottom;
            if (newWidth < 20 || newHeight < 20) {
              throw new Error('Cropping removed too much content.');
            }
            page.setCropBox(left, bottom, newWidth, newHeight);
            page.setMediaBox(left, bottom, newWidth, newHeight);
            page.setTrimBox(left, bottom, newWidth, newHeight);
          });

          const pdfBytes = await pdfDocLib.save();
          const blob = new Blob([pdfBytes], { type: 'application/pdf' });
          const url = URL.createObjectURL(blob);
          const link = document.createElement('a');
          const baseName = (fileNameEl.textContent || 'document').replace(/\.pdf$/i, '');
          link.href = url;
          link.download = `${baseName}-cropped.pdf`;
          document.body.appendChild(link);
          link.click();
          link.remove();
          URL.revokeObjectURL(url);
        } catch (error) {
          console.error('Cropping failed:', error);
          alert('Unable to crop the PDF with the current settings. Try smaller margins.');
        }
      }

      dropZone.addEventListener('click', () => fileInput.click());
      dropZone.addEventListener('keydown', (event) => {
        if (event.key === 'Enter' || event.key === ' ') {
          event.preventDefault();
          fileInput.click();
        }
      });

      dropZone.addEventListener('dragover', (event) => {
        event.preventDefault();
        dropZone.classList.add('dragover');
      });

      dropZone.addEventListener('dragleave', () => {
        dropZone.classList.remove('dragover');
      });

      dropZone.addEventListener('drop', (event) => {
        event.preventDefault();
        dropZone.classList.remove('dragover');
        const file = event.dataTransfer?.files?.[0];
        if (file) {
          loadPdf(file);
        }
      });

      fileInput.addEventListener('change', (event) => {
        const file = event.target.files?.[0];
        if (file) {
          loadPdf(file);
        }
      });

      reuploadButton.addEventListener('click', () => {
        resetWorkspace();
      });

      pageSelect.addEventListener('change', (event) => {
        const value = Number(event.target.value) || 1;
        currentPage = value;
        renderPage(value);
      });

      Object.keys(marginInputs).forEach((key) => {
        marginInputs[key].addEventListener('input', () => {
          updateMarginLabel(key);
          updateOverlay();
        });
        marginInputs[key].addEventListener('change', () => renderPage(currentPage));
        updateMarginLabel(key);
      });

      resetButton.addEventListener('click', resetMargins);
      downloadButton.addEventListener('click', downloadCroppedPdf);

      document.getElementById('currentYear').textContent = new Date().getFullYear();
    })();
  </script>
<script src="js/auth.js" type="module">

    

    <footer>
        <div class="container footer-inner">
            <div class="footer-company-links">
                <span>Company</span>
                <a href="index.html#about">About Us</a>
                <a href="index.html#contact">Contact</a>
                <a href="pricing.html">Pricing</a>
                <a href="privacy-policy.html">Privacy Policy</a>
                <a href="terms-of-service.html">Terms of Service</a>
                <a href="dmca-en.html">DMCA</a>
                <a href="blog.html">Blog</a>
            </div>
            <p class="footer-brand-line">&copy; easyjpgtopdf &mdash; Free PDF &amp; Image Tools for everyone. All rights reserved.</p>
            <p class="footer-credits">
                Thanks to Font Awesome, Google Fonts, jsPDF, pdf.js, pdf-lib, Mammoth, Tesseract.js, IMG.LY, Firebase, Unsplash photographers, and every open-source contributor powering this site.
                <a href="attributions.html">See full acknowledgements</a>.
            </p>
        </div>
    </footer>
</body>
</html>
